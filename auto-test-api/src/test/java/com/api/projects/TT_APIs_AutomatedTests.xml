<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="6c6fb9a9-5dc3-4a2a-83e3-c252e3b49272" activeEnvironment="Default" name="TT_APIs_AutomatedTests" resourceRoot="" soapui-version="5.4.0" abortOnError="false" runType="SEQUENTIAL" lastOpened="2016-09-23T17:40:06.494+05:30" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" id="d7c48414-9b1d-49d0-b44b-a92a9a748dbb" wadlVersion="http://wadl.dev.java.net/2009/02" name="SIGNIN" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}}</con:endpoint></con:endpoints><con:resource name="sign_in" path="/users/sign_in" id="948afba5-5ffc-4440-a549-d192ff653635"><con:settings/><con:parameters/><con:method name="Method 1" id="c7528823-614f-4e0c-9b32-84a978bf12a5" method="POST"><con:settings/><con:parameters/><con:request name="Request 1" id="d64103bc-b669-42bf-befd-5fb67bf06081" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value=""/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="TT-Mobile-Post" value="testing1112015a@rediffmail.compost"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}}</con:endpoint><con:request>{"login_type":"json","user":{"email":"testing1112015a@rediffmail.com","password":"testing00000007"}}</con:request><con:originalUri>http://traveler-api.ttdev.in/users/sign_in</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="785a03be-d2dd-492d-a04c-a33bfce513ea" wadlVersion="http://wadl.dev.java.net/2009/02" name="SignUp" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint><con:endpoint>http://traveler-api.ttdev.in</con:endpoint></con:endpoints><con:resource name="users" path="/users" id="3c132e51-a6c6-4439-87b8-550da6cee86a"><con:settings/><con:parameters/><con:method name="Method 1" id="7a72f1a0-f7dc-4a7d-a67d-c07e3b897b95" method="POST"><con:settings/><con:parameters/><con:request name="Request 1" id="f63e32ed-4d44-43ee-b3c2-2d7a729aa444" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="TT-Mobile" value="dtX7ByxTivHa5ic+z5QGBDhCzxkF7qdH5Iy4rY11Snw="/>
  &lt;con:entry key="User-Agent" value="${#Project#user_agent}"/>
  &lt;con:entry key="Accept" value="application/json"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"commit":"Sign Up \u0026 Continue","user":{"confirmPassword":"password123","email":"test_32656735@mailinator.com","name":"testautomation","password":"password123","role_ids":["5"],"tnc":"1"}}</con:request><con:originalUri>http://traveler-api.ttdev.in/users</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="9b994bf9-352d-4c43-abd8-1780b756b01d" wadlVersion="http://wadl.dev.java.net/2009/02" name="SignOut" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="sign_out" path="/users/sign_out" id="4f91a7cb-c33f-42b8-9c2a-92ee2f8117c4"><con:settings/><con:parameters><con:parameter><con:name>logout_type</con:name><con:value>json</con:value><con:style>QUERY</con:style><con:default>json</con:default></con:parameter></con:parameters><con:method name="Method 1" id="86be9abc-0a49-4d04-b30f-b00ca28c1c6c" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="a74304c6-ae88-4acd-8fe5-4419af193deb" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWE2NjY2OGJhODc0Y2YwMmQ5ZjNjZjUxYTU3Y2EyMjc2BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpAz7kB0kiIiQyYSQxMCRZdGhNd1VIQnpDeWVYdmRnUW1TT0QuBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--4ef404b52b58e580063137de4f128a071d56e057;"/>
  <con:entry key="TT-Mobile" value="Hd2LCpeRC2gH2bde0HL1UBP/51qZ9DhwCaANP3ihSAw="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#treveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/users/sign_out</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="9c75fd30-4a8f-4e1f-8ecb-c53da9d0121a" wadlVersion="http://wadl.dev.java.net/2009/02" name="ForgotPassword" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="password" path="/users/password" id="4808ea05-9d86-4620-b0cf-a0dd1a310190"><con:settings/><con:parameters/><con:method name="Method 1" id="99e90e87-a26e-4a0d-9dba-ee095d37bfd9" method="POST"><con:settings/><con:parameters/><con:request name="Request 1" id="11e717d5-eb1d-4bb8-b4c0-0cde719f798d" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="TT-Mobile" value=""/>
  &lt;con:entry key="User-Agent" value="${#Project#user_agent}"/>
  &lt;con:entry key="Accept" value="application/json"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"user":{"email":"test_32656735@mailinator.com"}}</con:request><con:originalUri>http://traveler-api.ttdev.in/users/password</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="559eb5ca-8fb6-4cba-a3ba-ee0bba10d604" wadlVersion="http://wadl.dev.java.net/2009/02" name="ChangePassword" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="reset_password" path="/users/password.json" id="05d6dd5f-575b-498b-994f-ad8a9016f409"><con:settings/><con:parameters/><con:method name="Method 1" id="ba859289-e309-48c7-9ef6-7c21667e10bb" method="PUT"><con:settings/><con:parameters/><con:request name="Request 1" id="5a2ab76d-7f7c-4724-8d5f-d6cda52e0e15" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="_trips3m_session=BAh7CUkiD3Nlc3Npb25faWQGOgZFVEkiJTQ3NGM0NzJmOTYwYzM5YWI3MWRlYjQwYTM1MTRiNmFkBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA1W0CUkiIiQyYSQxMCRxdzVGVkNOdHJlVHRTQndlQm1wNkQuBjsAVEkiCmZsYXNoBjsAVG86JUFjdGlvbkRpc3BhdGNoOjpGbGFzaDo6Rmxhc2hIYXNoCToKQHVzZWRvOghTZXQGOgpAaGFzaHsAOgxAY2xvc2VkRjoNQGZsYXNoZXN7BjoLbm90aWNlSSJzWW91IGhhdmUgc2lnbmVkIHVwIHN1Y2Nlc3NmdWxseS4gSWYgZW5hYmxlZCwgYSBjb25maXJtYXRpb24gbWFpbCB3aWxsIGJlIHNlbnQgdG8geW91ciBwcm92aWRlZCBlLW1haWwgYWRkcmVzcy4GOwBUOglAbm93MA%3D%3D--fd23dafb9888570cae0eaa1c2d15fde581fd7790; path=/; HttpOnly"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Connection" value="Keep-Alive"/>
  <con:entry key="Host" value="traveler-api.ttdev.in"/>
  <con:entry key="Accept-Encoding" value="gzip"/>
  <con:entry key="Content-Length" value="91"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"user":{"password":"${#Project#traveler_user_password}","password_confirmation":"${#Project#traveler_user_password}","current_password":"${#Project#traveler_user_password}"}}</con:request><con:originalUri>http://traveler-api.ttdev.in/api/v1/reset_password</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="4762a498-02ae-4e71-a0a6-78c62353a01f" wadlVersion="http://wadl.dev.java.net/2009/02" name="AppConfig" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="app_config.json" path="/api/{api_version}/app_config.json" id="4a0c8756-59f5-4d07-aefc-a09e1ccbc326"><con:settings/><con:parameters><con:parameter><con:name>user_id</con:name><con:value>{user_id}</con:value><con:style>QUERY</con:style><con:default>{user_id}</con:default></con:parameter><con:parameter><con:name>api_version</con:name><con:value>v2</con:value><con:style>TEMPLATE</con:style><con:default>v2</con:default></con:parameter></con:parameters><con:method name="Method 1" id="a270db1d-22d9-4d3e-93f0-bdea916cea7e" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="8102f3b4-c7de-4700-a705-9a8e6737f51b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="TT-Mobile" value="czLSc3s1OigRlHhB2q8TS7ZinzIXG8BBQBFNAyS30ZU="/>
  &lt;con:entry key="User-Agent" value="${#Project#user_agent}"/>
  &lt;con:entry key="Accept" value="application/json"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/app_config.json</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="user_id" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>user_id</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="2ddafee6-adec-4522-8a48-8abb54bb0ba4" wadlVersion="http://wadl.dev.java.net/2009/02" name="GetAllHOTDestinations" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#travel_apiendpoint}</con:endpoint></con:endpoints><con:resource name="hot_destination_list.json" path="/api/{api_version}/destinations/hot_destination_list.json" id="778862c1-53c9-40ad-b2ac-a258136ad92c"><con:settings/><con:parameters><con:parameter><con:name>api_version</con:name><con:value>api_version</con:value><con:style>TEMPLATE</con:style><con:default>api_version</con:default></con:parameter></con:parameters><con:method name="Method 1" id="db510ecc-e6ae-4ed7-82ae-b0757cb1e420" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="395d5b54-e258-457a-bd30-b9a40fa6c672" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWVlOGFiOWIwNjhmMmQxMTNlNTgxNDFjNDg0NjIxMDNhBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpAyzVA0kiIiQyYSQxMCRLSmlVNEp2L3F5TGEzbEZjYlJBUWJlBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--9f5f7131b8c4aefc998143c0c8c2293362ce756b;"/>
  <con:entry key="TT-Mobile" value="Reci/Qwu4ytkb+Ee8viokSHUf9r8MImpH1KNgQUorFI="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://null///api/v1/destinations/hot_destination_list.json</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="api_version" value="v1" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="1ad02eef-468d-4ffc-92db-8000f0b0217f" wadlVersion="http://wadl.dev.java.net/2009/02" name="GetFilteredResultsForDestination" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="get_filtered_results" path="/api/{api_version}/get_filtered_results" id="0400d84c-aa26-44bf-b6bc-d3801e48742b"><con:settings/><con:parameters><con:parameter><con:name>result_type</con:name><con:value>package_catalog</con:value><con:style>QUERY</con:style><con:default>package_catalog</con:default></con:parameter><con:parameter><con:name>destination</con:name><con:value>67</con:value><con:style>QUERY</con:style><con:default>67</con:default></con:parameter><con:parameter><con:name>api_version</con:name><con:value>v4</con:value><con:style>TEMPLATE</con:style><con:default>v4</con:default></con:parameter></con:parameters><con:method name="Method 1" id="cfb53988-743a-40d1-8002-18503da24ecf" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="a50b2aaf-57c9-4b82-8e15-0a5d72b68704" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWVlOGFiOWIwNjhmMmQxMTNlNTgxNDFjNDg0NjIxMDNhBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpAyzVA0kiIiQyYSQxMCRLSmlVNEp2L3F5TGEzbEZjYlJBUWJlBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--9f5f7131b8c4aefc998143c0c8c2293362ce756b; path=/;"/>
  <con:entry key="TT-Mobile" value="Q1lnUkTi8pIaANDRPmFQ9SxdzAbq+A3PHmKOJV2afCc="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v4/get_filtered_results</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>result_type</con:entry><con:entry>destination</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="85026205-7ba3-423d-b4c7-9a9f92386d54" wadlVersion="http://wadl.dev.java.net/2009/02" name="AttaractionListsByDestination" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="destination_attraction_list.json" path="/api/{api_version}/destinations/{destination_id}/destination_attraction_list.json" id="ad76eab2-46b2-4a14-bd74-c24ea94bc042"><con:settings/><con:parameters><con:parameter><con:name>destination_id</con:name><con:value>67</con:value><con:style>TEMPLATE</con:style><con:default>67</con:default></con:parameter><con:parameter><con:name>api_version</con:name><con:value>v2</con:value><con:style>TEMPLATE</con:style><con:default>v2</con:default></con:parameter></con:parameters><con:method name="Method 1" id="8f6a536f-f7b9-4d35-ab34-40e744a7f43a" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="f3033d25-2f50-4916-98d3-7bce87e60748" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWVlOGFiOWIwNjhmMmQxMTNlNTgxNDFjNDg0NjIxMDNhBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpAyzVA0kiIiQyYSQxMCRLSmlVNEp2L3F5TGEzbEZjYlJBUWJlBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--9f5f7131b8c4aefc998143c0c8c2293362ce756b; path=/;"/>
  <con:entry key="TT-Mobile" value="80nlvhP+/mwJWxqxukANMGgM988i0RUOYikEdnmhHVw="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://null///api/v2/destinations/67/destination_attraction_list.json</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>destination_id</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="7470025b-c38b-4fb3-988d-0456f227d81e" wadlVersion="http://wadl.dev.java.net/2009/02" name="DestinationHotelImages" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="destination_hotel_images.json" path="/api/{api_version}/destinations/{destinationId}/destination_hotel_images" id="70df887e-395e-4ba2-8b2b-8c4d091b2ec3"><con:settings/><con:parameters><con:parameter><con:name>destinationId</con:name><con:value>destinationId</con:value><con:style>TEMPLATE</con:style><con:default>destinationId</con:default></con:parameter><con:parameter><con:name>api_version</con:name><con:value>v2</con:value><con:style>TEMPLATE</con:style><con:default>v2</con:default></con:parameter></con:parameters><con:method name="Method 1" id="9d25fd8d-bbac-4169-9cc4-b5da02b92c69" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="f00ef24d-81e4-44a7-b43f-423ab7721729" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWVlOGFiOWIwNjhmMmQxMTNlNTgxNDFjNDg0NjIxMDNhBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpAyzVA0kiIiQyYSQxMCRLSmlVNEp2L3F5TGEzbEZjYlJBUWJlBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--9f5f7131b8c4aefc998143c0c8c2293362ce756b; path=/;"/>
  <con:entry key="TT-Mobile" value="80nlvhP+/mwJWxqxukANMGgM988i0RUOYikEdnmhHVw="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/destinations/67/destination_hotel_images.json</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="destinationId" value="67" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>destinationId</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="f00aef4f-2af0-4fd8-afef-42f285e3d2e4" wadlVersion="http://wadl.dev.java.net/2009/02" name="DestinationTopTestimonials" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="destination_top_testimonials.json" path="/api/{api_version}/destinations/{destinationId}/destination_top_testimonials.json" id="e64cafd1-6f98-45a2-bf1d-1c5de3d6e6fc"><con:settings/><con:parameters><con:parameter><con:name>destinationId</con:name><con:value>destinationId</con:value><con:style>TEMPLATE</con:style><con:default>destinationId</con:default></con:parameter><con:parameter><con:name>page_number</con:name><con:value>{page}</con:value><con:style>QUERY</con:style><con:default>{page}</con:default></con:parameter><con:parameter><con:name>api_version</con:name><con:value>v1</con:value><con:style>TEMPLATE</con:style><con:default>v1</con:default></con:parameter></con:parameters><con:method name="Method 1" id="bba9ad02-ea4b-41e3-b2d9-d1b34c559e0c" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="4ab32d67-b8f7-43ae-8d19-713dbbbdee36" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWVlOGFiOWIwNjhmMmQxMTNlNTgxNDFjNDg0NjIxMDNhBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpAyzVA0kiIiQyYSQxMCRLSmlVNEp2L3F5TGEzbEZjYlJBUWJlBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--9f5f7131b8c4aefc998143c0c8c2293362ce756b; path=/;"/>
  <con:entry key="TT-Mobile" value="UoJYeZsc7Sj1yGvwPLzwtrfLxJnzdDEalV0t8aU5RyI="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v1/destinations/67/destination_top_testimonials.json</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="destinationId" value="67"/>
  <con:entry key="page_number" value="1"/>
</con:parameters><con:parameterOrder><con:entry>destinationId</con:entry><con:entry>page_number</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="b3df01a6-da9b-41ad-90c5-1bccde33b264" wadlVersion="http://wadl.dev.java.net/2009/02" name="GetDestinationExtend" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="get_destinations_extend.json" path="/api/{api_version}/destinations/{destinationId}/get_destinations_extend.json" id="cba0b985-83f4-4f7b-9654-beb2d6b25d76"><con:settings/><con:parameters><con:parameter><con:name>destinationId</con:name><con:value>destinationId</con:value><con:style>TEMPLATE</con:style><con:default>destinationId</con:default></con:parameter><con:parameter><con:name>api_version</con:name><con:value>v2</con:value><con:style>TEMPLATE</con:style><con:default>v2</con:default></con:parameter></con:parameters><con:method name="Method 1" id="6ea166fb-d56d-400a-aed9-73adea5c01ff" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="0f32e8ff-1fc9-42c2-8ca5-ee7167455128" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWVlOGFiOWIwNjhmMmQxMTNlNTgxNDFjNDg0NjIxMDNhBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpAyzVA0kiIiQyYSQxMCRLSmlVNEp2L3F5TGEzbEZjYlJBUWJlBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--9f5f7131b8c4aefc998143c0c8c2293362ce756b;"/>
  <con:entry key="TT-Mobile" value="oQIFBskCnaIyY5CAp545xV+WtrlFcscEoz40bMpwL3k="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/destinations/67/get_destinations_extend.json</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="destinationId" value="67" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>destinationId</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="74ed2aa0-06b5-4b9b-890b-e23745960c4d" wadlVersion="http://wadl.dev.java.net/2009/02" name="ViewPackage" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="{package_headline}" path="/api/{api_version}/tour_packages/{package_headline}" id="f2540c99-f3e2-4df3-b43e-be73445e62bf"><con:settings/><con:parameters><con:parameter><con:name>package_headline</con:name><con:value>package_headline</con:value><con:style>TEMPLATE</con:style><con:default>package_headline</con:default></con:parameter><con:parameter><con:name>api_version</con:name><con:value>v3</con:value><con:style>TEMPLATE</con:style><con:default>v3</con:default></con:parameter><con:parameter><con:name>security_auth_token</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="40cb302f-62b6-4353-aec3-fc7092aec9bb" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="fccd7a70-c8f4-439c-ba58-8d6378c7da35" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWVlOGFiOWIwNjhmMmQxMTNlNTgxNDFjNDg0NjIxMDNhBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpAyzVA0kiIiQyYSQxMCRLSmlVNEp2L3F5TGEzbEZjYlJBUWJlBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--9f5f7131b8c4aefc998143c0c8c2293362ce756b"/>
  <con:entry key="TT-Mobile" value="F73uJe8DAIPpRw6deKdX7ojvF3Sc4eW8R45haEUeZxA="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v3/tour_packages/package_headline</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>package_headline</con:entry><con:entry>api_version</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="d3256e92-229e-49ac-a989-a4a66515ccb4" wadlVersion="http://wadl.dev.java.net/2009/02" name="NewRequestForm1" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="new.json" path="/api/{api_version}/requested_trips/new.json" id="7f21b5ef-17f3-4048-9f3c-04146c7a4b6f"><con:settings/><con:parameters><con:parameter><con:name>destination_ids[]</con:name><con:value>60,61</con:value><con:style>QUERY</con:style><con:default>60,61</con:default></con:parameter><con:parameter><con:name>api_version</con:name><con:value>v1</con:value><con:style>TEMPLATE</con:style><con:default>v1</con:default></con:parameter></con:parameters><con:method name="Method 1" id="78bc7a17-dd6a-4518-a4e4-6207de2dd483" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="196f7986-e711-407a-99fc-68aac4c6148a" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWVlOGFiOWIwNjhmMmQxMTNlNTgxNDFjNDg0NjIxMDNhBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpAyzVA0kiIiQyYSQxMCRLSmlVNEp2L3F5TGEzbEZjYlJBUWJlBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--9f5f7131b8c4aefc998143c0c8c2293362ce756b;"/>
  <con:entry key="TT-Mobile" value="AxdlZWNK1EOlfJ+DSOY++0ZoiL3jNdsBrsM0fNNdvmE="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v1/requested_trips/new.json</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>destination_ids[]</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="a779f994-3233-4173-9ee3-3a8843997dbe" wadlVersion="http://wadl.dev.java.net/2009/02" name="NewRequestedTrips" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="requested_trips" path="/api/{api_version}/requested_trips" id="bec9031d-2c6e-4a51-a21f-9a7c64bff397"><con:settings/><con:parameters><con:parameter><con:name>api_version</con:name><con:value>v1</con:value><con:style>TEMPLATE</con:style><con:default>v1</con:default></con:parameter></con:parameters><con:method name="Method 1" id="400355cb-b299-4de4-ae16-8c84b4dc9749" method="POST"><con:settings/><con:parameters/><con:request name="Request 1" id="4a456b39-a76e-4c09-a86d-280850ef8cf4" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value=""/>
  <con:entry key="TT-Mobile" value=""/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"requested_trip":{"deviceId":"05180c8a6a004cd998130c76c1ecdad4","email":"testing1112015a@rediffmail.com","from_complete":"Uttar Pradesh,India","from_loc":"Noida, India","usr_location":"Noida, India","phone_no":"","preferences":[],"start_date":"2016-08-26","to_loc":"Singapore,Malaysia","trip_days":"7","trip_stage":"2"}}</con:request><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>api_version</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="dc72b27c-65d4-430d-8dc7-dcc3e04d3048" wadlVersion="http://wadl.dev.java.net/2009/02" name="CreateRequest" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="{request_id}" path="/api/{api_version}/requested_trips/{request_id}" id="8502e485-840e-4f4f-bb15-4747baba649c"><con:settings/><con:parameters><con:parameter><con:name>request_id</con:name><con:value>request_id</con:value><con:style>TEMPLATE</con:style><con:default>request_id</con:default></con:parameter><con:parameter><con:name>api_version</con:name><con:value>v1</con:value><con:style>TEMPLATE</con:style><con:default>v1</con:default></con:parameter></con:parameters><con:method name="Method 1" id="0df41bd6-2c0a-4406-92bc-8a30673c9862" method="PUT"><con:settings/><con:parameters/><con:request name="Request 1" id="77caa3a5-a5fa-4223-9f05-ae63ca901e91" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value=""/>
  <con:entry key="TT-Mobile" value=""/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"requested_trip":{"deviceId":"05180c8a6a004cd998130c76c1ecdad4","adult":"2","child":"0","email":"testing1112015a@rediffmail.com","from_complete":"United","from_loc":"Noida, India","usr_location":"United","preferences":[{"customization_id":2,"options":[{"name":"3 Star","id":8,"tags":"","val":[]}]},{"customization_id":43,"options":[{"name":"in this week","id":203,"tags":"","val":[]}]},{"customization_id":71,"options":[]},{"customization_id":29,"options":[]}],"start_date":"2016-08-27","to_loc":"Singapore","trip_days":"7"}}</con:request><con:originalUri>http://master.ttdev.in/api/v1/requested_trips/request_id</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>request_id</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="5c0e149f-3806-4698-9b16-c549b946413e" wadlVersion="http://wadl.dev.java.net/2009/02" name="Admin_close_requested_trip" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="close_requested_trip" path="/admins/close_requested_trip" id="43034f9a-a191-4b90-a782-d27fba6d87e2"><con:settings/><con:parameters/><con:method name="Method 1" id="f13883b3-a78b-484d-a7f7-5b3aac5f3229" method="POST"><con:settings/><con:parameters/><con:request name="Request 1" id="49de009f-7af1-45cc-83e9-5bd95759cbd8" mediaType="application/x-www-form-urlencoded" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="_trips3m_session=BAh7C0kiD3Nlc3Npb25faWQGOgZFVEkiJTRiMGU5YzVlMDViMTExOTdiNmY4N2U1ZTIyNzVhNDY5BjsAVEkiDHJlZmVyZXIGOwBUSSIgaHR0cDovLyhkaXJlY3QpOjooZGlyZWN0KTo6BjsAVEkiEHJlZmVyZXJfbmV3BjsAVEkiHihkaXJlY3QpfihkaXJlY3Qpfn4obm9uZSkGOwBUSSIZd2FyZGVuLnVzZXIudXNlci5rZXkGOwBUWwdbBmkDiIgFSSIiJDJhJDEwJFhlOFpIY0tRT0ZhQ1ZoLnlQcElTWmUGOwBUSSIObmV4dF9wYXRoBjsARkkiHC9yZXF1ZXN0ZWRfdHJpcHMvOTUzMzQxBjsARkkiEF9jc3JmX3Rva2VuBjsARkkiMWdEbzFYRmt0eGk2SXVabTA4M0I1Z3JsanhpV2hyQzhwajk5RlBEYld0Rnc9BjsARg%3D%3D--9e61ff6bd7b63b3a8b39370bb58ed207400c902e;"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="X-Requested-With" value="XMLHttpRequest"/>
  <con:entry key="Content-Type" value="application/x-www-form-urlencoded; charset=UTF-8"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request><![CDATA[utf8=%E2%9C%93&authenticity_token=gDo1XFktxi6IuZm083B5grljxiWhrC8pj99FPDbWtFw%3D&trip_id=953341&tags=tt_demo_agent(agent)%2C+&from_loc_type=Domestic&to_loc_type=International&adminComments=&notify_agents=&task_scheduler%5Btitle%5D=&task_scheduler%5Bemail%5D=vineet.singh%40traveltriangle.com&task_scheduler%5Brun_at%5D=&task_scheduler%5Bmessage%5D=&task_scheduler%5Brequested_trip_id%5D=953341&task_scheduler%5Buser_id%5D=362632&task_scheduler_id=&status=Active&traveler_stage=&dromant_reason=&commit=Edit+Request]]></con:request><con:originalUri>http://traveler-api.ttdev.in/admins/close_requested_trip</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="f0ae7abe-d816-42bf-ae16-04956e5bd475" wadlVersion="http://wadl.dev.java.net/2009/02" name="ALL_CATEGORIES" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="all_categories.json" path="/api/{api_version}/trip_types/all_categories.json" id="be43f297-0718-420d-ac04-9c1198876e62"><con:settings/><con:parameters><con:parameter><con:name>api_version</con:name><con:value>v1</con:value><con:style>TEMPLATE</con:style><con:default>v1</con:default></con:parameter></con:parameters><con:method name="Method 1" id="b148b950-8de3-43e9-8376-b5cfcd529048" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="e77b538c-145b-4012-9b1a-22cc4b8d040d" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="tw5U6WZlXSvlz9nOnQTuybIgV3LHsuxl1tnDWYmzUeE="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://master.ttdev.in/api/v1/trip_types/all_categories.json</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>api_version</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="2da48194-2396-475f-9117-c306f5fb2667" wadlVersion="http://wadl.dev.java.net/2009/02" name="ALL_THEMES" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="all_themes.json" path="/api/{api_version}/themes/all_themes.json" id="13074785-9ace-4538-bf19-206fe191cb05"><con:settings/><con:parameters><con:parameter><con:name>api_version</con:name><con:value>api_version</con:value><con:style>TEMPLATE</con:style><con:default>api_version</con:default></con:parameter></con:parameters><con:method name="Method 1" id="81c108b1-a70d-4b18-9b81-ba07e7fd9fd8" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="46d28c9a-9d2c-449a-8e05-13548d907d93" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="YV198JPkpYtmyNHmIr9k3HJ8Ip+ONirs98fuWoH2M9M="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="f73ca72a-395e-4417-872a-e69baf8da23f" wadlVersion="http://wadl.dev.java.net/2009/02" name="Destination_Catalog" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="get_filtered_results" path="/api/{api_version}/get_filtered_results" id="51688335-5474-45aa-8b62-aeb5dd533292"><con:settings/><con:parameters><con:parameter><con:name>api_version</con:name><con:value>api_version</con:value><con:style>TEMPLATE</con:style><con:default>api_version</con:default></con:parameter><con:parameter><con:name>page_number</con:name><con:value>{pageNo}</con:value><con:style>QUERY</con:style><con:default>{pageNo}</con:default></con:parameter><con:parameter><con:name>result_type</con:name><con:value>destination_catalog</con:value><con:style>QUERY</con:style><con:default>destination_catalog</con:default></con:parameter><con:parameter><con:name>per_page</con:name><con:value>{per_page}</con:value><con:style>QUERY</con:style><con:default>{per_page}</con:default></con:parameter></con:parameters><con:method name="Method 1" id="e514dada-ea78-49fe-8aab-712fcde33811" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="335f69a5-f903-4dfd-b738-dbe4ef64bc03" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="vJmYMB6zX5sDFDcuwN/KtA1z65uEnTYfFbDhL2qGMG0="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="per_page" value="50"/>
  <con:entry key="page_number" value="1"/>
  <con:entry key="api_version" value="v4"/>
</con:parameters></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="4cfd9e69-ecd8-4d4c-8492-fc92179b0fdd" wadlVersion="http://wadl.dev.java.net/2009/02" name="ForgotPassword" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="password" path="/users/password" id="eda04f84-de4e-4b48-8e6b-73016b88d9a6"><con:settings/><con:parameters/><con:method name="Method 1" id="12c52e32-7f56-4811-9a9f-ef1d3dd388ee" method="POST"><con:settings/><con:parameters/><con:request name="Request 1" id="8775a176-4ad6-4d95-a314-55fbcdfc4577" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="sHZ0s4bfjVNmVgQcCFK8A8RHn1haKBBLNDN/9c2xETM="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"user":{"email":"testing1112015a@rediffmail.com"}}</con:request><con:originalUri>https://master.ttdev.in/users/password</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="fb13356d-b640-41c5-8152-a2c48685041e" wadlVersion="http://wadl.dev.java.net/2009/02" name="FilterType" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="filter" path="/api/{api_version}/metadata/filter" id="9f3341db-c9f9-4434-88c8-7c018bfaad53"><con:settings/><con:parameters><con:parameter><con:name>api_version</con:name><con:value>api_version</con:value><con:style>TEMPLATE</con:style><con:default>api_version</con:default></con:parameter><con:parameter><con:name>filter_type</con:name><con:value>search</con:value><con:style>QUERY</con:style><con:default>search</con:default></con:parameter><con:parameter><con:name>security_auth_token</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="bdb2b40c-cad5-488e-ae1b-1be61cbf6c7e" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="436ba333-2b44-4d4a-adc7-688847704b53" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="ZeyDUBXrnaxISvdqcsJhffWNLYwh038RT8zlvOhGkKI="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:username>ttsuer</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="api_version" value="v3" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>api_version</con:entry><con:entry>filter_type</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="359c35c1-ebfd-4a81-ae8b-e4af02ad08e9" wadlVersion="http://wadl.dev.java.net/2009/02" name="Get Filtered Results" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="get_filtered_results" path="/api/{api_version}/get_filtered_results" id="b995d46c-d6e9-4612-baf4-e7c55b93788d"><con:settings/><con:parameters><con:parameter><con:name>api_version</con:name><con:value>api_version</con:value><con:style>TEMPLATE</con:style><con:default>api_version</con:default></con:parameter><con:parameter><con:name>days</con:name><con:value>4-6</con:value><con:style>QUERY</con:style><con:default>4-6</con:default></con:parameter><con:parameter><con:name>trip_type</con:name><con:value>2</con:value><con:style>QUERY</con:style><con:default>2</con:default></con:parameter><con:parameter><con:name>category</con:name><con:value>family</con:value><con:style>QUERY</con:style><con:default>family</con:default></con:parameter><con:parameter><con:name>result_type</con:name><con:value>all</con:value><con:style>QUERY</con:style><con:default>all</con:default></con:parameter><con:parameter><con:name>price_ranges</con:name><con:value>40000-60000</con:value><con:style>QUERY</con:style><con:default>40000-60000</con:default></con:parameter></con:parameters><con:method name="Method 1" id="13226ef0-69e0-496f-acbc-3e3908b5a898" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="7a30ee31-8127-4cf9-86b0-97240048dfba" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="utlhYods7vSE3pI9j6uFJ+vs0lII5Xr5ZNTRcffUTb0="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>https://master.ttdev.in/api/api_version/get_filtered_results</con:originalUri><con:credentials><con:username>ttsuer</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="5e6ba3d9-8a76-497f-bee1-1dac7f238749" wadlVersion="http://wadl.dev.java.net/2009/02" name="FilterDestinationsCatalogSearchResults" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="get_filtered_results" path="/api/{api_version}/get_filtered_results" id="1b219307-a817-47b0-9799-cdbb37034b54"><con:settings/><con:parameters><con:parameter><con:name>days</con:name><con:value>10-12</con:value><con:style>QUERY</con:style><con:default>10-12</con:default></con:parameter><con:parameter><con:name>per_page</con:name><con:value>50</con:value><con:style>QUERY</con:style><con:default>50</con:default></con:parameter><con:parameter><con:name>result_type</con:name><con:value>destination_catalog</con:value><con:style>QUERY</con:style><con:default>destination_catalog</con:default></con:parameter><con:parameter><con:name>activity</con:name><con:value>11,4,3</con:value><con:style>QUERY</con:style><con:default>11,4,3</con:default></con:parameter><con:parameter><con:name>page_number</con:name><con:value>1</con:value><con:style>QUERY</con:style><con:default>1</con:default></con:parameter><con:parameter><con:name>months</con:name><con:value>10-12</con:value><con:style>QUERY</con:style><con:default>10-12</con:default></con:parameter><con:parameter><con:name>price_ranges</con:name><con:value>80000-100000,100000-200000</con:value><con:style>QUERY</con:style><con:default>80000-100000,100000-200000</con:default></con:parameter><con:parameter><con:name>destination_type</con:name><con:value>international</con:value><con:style>QUERY</con:style><con:default>international</con:default></con:parameter><con:parameter><con:name>sort_by</con:name><con:value/><con:style>QUERY</con:style><con:default/></con:parameter><con:parameter><con:name>api_version</con:name><con:value>v4</con:value><con:style>TEMPLATE</con:style><con:default>v4</con:default></con:parameter><con:parameter><con:name>security_auth_token</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="fd3e46da-8ece-4104-9cff-be5a6b524360" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="0684b8d0-f7d7-4119-899a-d47c06780a8f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="lI05shmbeB3/njVQ6QcGBxSfgqiRB8/PBisc2BkTchk="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://bookings-qa4.ttdev.in/api/v4/get_filtered_results</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="days" value="4-6"/>
  <con:entry key="price_ranges" value="0-100000"/>
  <con:entry key="destination_type" value="india"/>
  <con:entry key="activity" value="11,5"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
</con:parameters><con:parameterOrder><con:entry>days</con:entry><con:entry>per_page</con:entry><con:entry>result_type</con:entry><con:entry>activity</con:entry><con:entry>page_number</con:entry><con:entry>months</con:entry><con:entry>price_ranges</con:entry><con:entry>destination_type</con:entry><con:entry>sort_by</con:entry><con:entry>api_version</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="dfc1c1fb-e34d-4b38-bde8-fd706e7aed95" wadlVersion="http://wadl.dev.java.net/2009/02" name="PackageCatalogForADestination" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="get_filtered_results" path="/api/{api_version}/get_filtered_results" id="a1d4b944-083a-415f-a655-930e3b98c75a"><con:settings/><con:parameters><con:parameter><con:name>api_version</con:name><con:value>api_version</con:value><con:style>TEMPLATE</con:style><con:default>api_version</con:default></con:parameter><con:parameter><con:name>result_type</con:name><con:value>package_catalog</con:value><con:style>QUERY</con:style><con:default>package_catalog</con:default></con:parameter><con:parameter><con:name>destination</con:name><con:value>65</con:value><con:style>QUERY</con:style><con:default>65</con:default></con:parameter><con:parameter><con:name>security_auth_token</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="84446f39-18d9-4528-bdc9-45574cda6b71" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="609a0f5f-2282-4432-bf9b-fa6f91d85efd" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="9oPWMdCjVwvdSypRiYe7NVXRmYawM7G6Dk/YMieE9Q0="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://bookings-qa4.ttdev.in/api/api_version/get_filtered_results</con:originalUri><con:credentials><con:username>ttsuer</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>api_version</con:entry><con:entry>result_type</con:entry><con:entry>destination</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="7ee94fdd-5886-4645-9083-17908549417b" wadlVersion="http://wadl.dev.java.net/2009/02" name="CurrencyConverter" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="current_currency_rate.json" path="/api/{api_version}/current_currency_rate.json" id="37af83a2-bc66-4366-bee6-4b9ea91e02b6"><con:settings/><con:parameters><con:parameter><con:name>api_version</con:name><con:value>v2</con:value><con:style>TEMPLATE</con:style><con:default>v2</con:default></con:parameter></con:parameters><con:method name="Method 1" id="a349ecf3-6499-4eec-85ac-d9f081084ddb" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="7a0e6a00-5c43-41ea-be57-14bd2ab5064e" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="4pBUgHBCFnLjBnTJc6P71RmSHnjJZfqqe485CUKBjBc="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>api_version</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="f6d286cd-924f-48f5-9f24-119a24175103" wadlVersion="http://wadl.dev.java.net/2009/02" name="AllDestinations" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="all_destinations" path="/api/{api_version}/trip_types/all_destinations" id="bf4c4caa-4b02-4c0f-9f58-ecdd37a7983c"><con:settings/><con:parameters><con:parameter><con:name>api_version</con:name><con:value>api_version</con:value><con:style>TEMPLATE</con:style><con:default>api_version</con:default></con:parameter></con:parameters><con:method name="Method 1" id="af476ebe-eb62-40c7-8489-05c048657ddf" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="11a3efbf-a754-4d81-953d-eb828619270e" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="${Given TT-Mmobile token for all destination is generated#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="api_version" value="v2" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="1331663b-648f-4941-b82b-617ec32cb39c" wadlVersion="http://wadl.dev.java.net/2009/02" name="AllDestinationsByCategory" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="all_destinations.json" path="/api/{api_version}/trip_types/{category_id}/all_destinations.json" id="021cf02e-eeb3-43ed-9756-fb30b53d40d9"><con:settings/><con:parameters><con:parameter><con:name>category_id</con:name><con:value>category_id</con:value><con:style>TEMPLATE</con:style><con:default>category_id</con:default></con:parameter><con:parameter><con:name>api_version</con:name><con:value>v1</con:value><con:style>TEMPLATE</con:style><con:default>v1</con:default></con:parameter><con:parameter><con:name>security_auth_token</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="83fc694e-4f5c-4261-9b86-7918455fd9df" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="dfc00f51-db2d-4181-8022-b778d04b22b9" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value=""/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://bookings-qa4.ttdev.in/api/v1/trip_types/category_id/all_destinations.json</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk " xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>category_id</con:entry><con:entry>api_version</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="7473c553-f0a9-4e9f-b9b3-5cc174cb1282" wadlVersion="http://wadl.dev.java.net/2009/02" name="AllDestinationsByTheme" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="all_destinations" path="/api/{api_version}/themes/{theme_id}/all_destinations" id="b7a3659d-27ba-4002-bd76-b8f91779f4be"><con:settings/><con:parameters><con:parameter><con:name>api_version</con:name><con:value>api_version</con:value><con:style>TEMPLATE</con:style><con:default>api_version</con:default></con:parameter><con:parameter><con:name>theme_id</con:name><con:value>theme_id</con:value><con:style>TEMPLATE</con:style><con:default>theme_id</con:default></con:parameter></con:parameters><con:method name="Method 1" id="5c7094fd-41ba-4638-bd43-b863c9a1ad73" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="27a8e01d-34a1-4ec4-be65-1aa3c6484e89" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value=""/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="api_version" value="v1" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="5dd6a471-e110-41c1-a006-abeb8fdc354c" wadlVersion="http://wadl.dev.java.net/2009/02" name="RequestMoreQuote" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="post_traveler_ask_new_quote.json" path="/requested_trips/{requestID}/post_traveler_ask_new_quote.json" id="8288c330-90b6-48f5-90e8-96d3eefea76b"><con:settings/><con:parameters><con:parameter><con:name>requestID</con:name><con:value>requestID</con:value><con:style>TEMPLATE</con:style><con:default>requestID</con:default></con:parameter></con:parameters><con:method name="Method 1" id="d59dcdd1-971c-41f4-903e-67a949028b4d" method="POST"><con:settings/><con:parameters/><con:request name="Request 1" id="2883f348-5a00-448a-a5ee-4dc0311fba0b" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTcxMTNkYjk1MWVkZTUxMGMwOGI5MjA4ZWUzNzM4ZDg4BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA5uzCUkiIiQyYSQxMCRLQ1hrOHk1YWYuZGxITFIucUQwSFFlBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--a85801f81766e98f47c4af97eceb339af26fb966;"/>
  <con:entry key="TT-Mobile" value="qNafm82yapHXszPYUiRciBmbUDf5CexOBQ83mXDxDYk="/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"feedback":1}</con:request><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="bde3bc3c-fd34-40c1-9e54-d7c8eea5bfc5" wadlVersion="http://wadl.dev.java.net/2009/02" name="GetBookedOrConvertedQuotes" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="get_booked_or_converted_quotes.json" path="/api/{apiversion}/quotes/get_booked_or_converted_quotes.json" id="51073971-1d5a-47f8-8484-33bffc1a458f"><con:settings/><con:parameters><con:parameter><con:name>apiversion</con:name><con:value>apiversion</con:value><con:style>TEMPLATE</con:style><con:default>apiversion</con:default></con:parameter></con:parameters><con:method name="Method 1" id="96ec56f5-6e63-4608-8f72-12af789126d3" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="a5e05bb1-49bb-475e-87a8-c6790196afa1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTMxZmI3YmIyMTU2MmIyYmI5ZmViZWFlY2E0ZThkN2UyBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA5uzCUkiIiQyYSQxMCRLQ1hrOHk1YWYuZGxITFIucUQwSFFlBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--5d3521bf38b1882135510840236913749adebfff; path=/; HttpOnly"/>
  <con:entry key="TT-Mobile" value="0DqlHrp+IySa4E6nCdsZCOpck4moOsss3jFpXCUj0Mg="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="apiversion" value="v1" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="d48dbf15-5849-4e02-93bb-ce6ac0d7d001" wadlVersion="http://wadl.dev.java.net/2009/02" name="AllRequestedTripData" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="all_trips_user.json" path="/api/{api_version}/requested_trips/all_trips_user.json" id="ca818369-bbf0-4c46-b311-8454e4832520"><con:settings/><con:parameters><con:parameter><con:name>api_version</con:name><con:value>api_version</con:value><con:style>TEMPLATE</con:style><con:default>api_version</con:default></con:parameter><con:parameter><con:name>all_trip_data</con:name><con:value>false</con:value><con:style>QUERY</con:style><con:default>false</con:default></con:parameter><con:parameter><con:name>currency</con:name><con:value>Dollar</con:value><con:style>QUERY</con:style><con:default>Dollar</con:default></con:parameter></con:parameters><con:method name="Method 1" id="e7905b5d-9225-4c47-9a3d-8312abf3b8ca" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="f6ad2b15-1fdc-4ebf-b337-e16af55dc48a" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value=""/>
  <con:entry key="TT-Mobile" value=""/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="api_version" value="v2" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="dd4aec1d-e373-47e2-8349-0e6506b7c514" wadlVersion="http://wadl.dev.java.net/2009/02" name="GetSingleRequestedTrip" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="{requested_trip_id}.json" path="/api/{api_version}/requested_trips/{requested_trip_id}.json" id="e454c82c-67bf-4050-a90f-b3c9cb8a7302"><con:settings/><con:parameters><con:parameter><con:name>requested_trip_id</con:name><con:value>requested_trip_id</con:value><con:style>TEMPLATE</con:style><con:default>requested_trip_id</con:default></con:parameter><con:parameter><con:name>include_quotes</con:name><con:value>false</con:value><con:style>QUERY</con:style><con:default>false</con:default></con:parameter><con:parameter><con:name>currency</con:name><con:value>Dollar</con:value><con:style>QUERY</con:style><con:default>Dollar</con:default></con:parameter><con:parameter><con:name>api_version</con:name><con:value>v2</con:value><con:style>TEMPLATE</con:style><con:default>v2</con:default></con:parameter><con:parameter><con:name>security_auth_token</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="0cec0916-1400-437b-9c4d-fb766db699d6" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="afa80f63-d378-4a35-80d1-234322ba1e8e" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTMxZmI3YmIyMTU2MmIyYmI5ZmViZWFlY2E0ZThkN2UyBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA5uzCUkiIiQyYSQxMCRLQ1hrOHk1YWYuZGxITFIucUQwSFFlBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--5d3521bf38b1882135510840236913749adebfff; path=/; HttpOnly"/>
  <con:entry key="TT-Mobile" value="0DqlHrp+IySa4E6nCdsZCOpck4moOsss3jFpXCUj0Mg="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/requested_trips/requested_trip_id.json</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>requested_trip_id</con:entry><con:entry>include_quotes</con:entry><con:entry>currency</con:entry><con:entry>api_version</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="46bec664-86f2-4361-8534-8c8f98a53862" wadlVersion="http://wadl.dev.java.net/2009/02" name="User_Bookings" type="rest" definitionUrl="http" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="all_trips_user.json" path="/api/{api_version}/requested_trips/all_trips_user.json" id="dcd8cb69-a635-46cf-8aba-487f0efbeba7"><con:settings/><con:parameters><con:parameter><con:name>api_version</con:name><con:value>api_version</con:value><con:style>TEMPLATE</con:style><con:default>api_version</con:default></con:parameter><con:parameter><con:name>all_trip_data</con:name><con:value>true</con:value><con:style>QUERY</con:style><con:default>true</con:default></con:parameter></con:parameters><con:method name="Method 1" id="37cf658c-d260-451b-9155-9e5da4488a5b" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="27764431-8f4d-4173-a9f6-7289f6b5195c" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWJlN2E0MjRjOGZkZWZiMzFjZDQyYWVlY2E3MDkxNWU2BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA5uzCUkiIiQyYSQxMCRLQ1hrOHk1YWYuZGxITFIucUQwSFFlBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--7bfa544a488b52dce35a0df1d9d6086b8c9056bd; path=/; HttpOnly"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="TT-Mobile" value="G35TUEtf7OhRlzLWD7AuuE0ynTMAU6752hbRBmORwKk="/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="api_version" value="v2" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="c27c2560-79a0-46f4-a750-d77522593577" wadlVersion="http://wadl.dev.java.net/2009/02" name="CancelRequest" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="CancelRequest" path="/api/{apiVersion}/requested_trips/{tripID}/cancelRequest" id="38890f2b-31f4-4a56-99f7-171c93e84c94"><con:settings/><con:parameters><con:parameter><con:name>apiVersion</con:name><con:value>apiVersion</con:value><con:style>TEMPLATE</con:style><con:default>apiVersion</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>tripID</con:name><con:value>tripID</con:value><con:style>TEMPLATE</con:style><con:default>tripID</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="CancelRequest" id="62149603-1141-4dca-8d11-2af71575b2c1" method="POST"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:can="http://traveler-api.ttdev.in/api/v1/requested_trips/456360/cancelRequest">can:Response</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/html; charset=utf-8</con:mediaType><con:status>500</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:can="http://traveler-api.ttdev.in/api/v1/requested_trips/456360/cancelRequest">can:Fault</con:element></con:representation><con:request name="Request 1" id="8966fe98-1554-439a-a86d-e0ad1cf9bd81" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="_trips3m_session=BAh7CUkiD3Nlc3Npb25faWQGOgZFVEkiJWQ2NzU0NzdjOTVjMDE4M2E2MzM0NGIxNzBmZTczNWRkBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA1TCBEkiIiQyYSQxMCRLRng3ZlYxU3NkalJreEF0UWs5bmNPBjsAVEkiCmZsYXNoBjsAVG86JUFjdGlvbkRpc3BhdGNoOjpGbGFzaDo6Rmxhc2hIYXNoCToKQHVzZWRvOghTZXQGOgpAaGFzaHsAOgxAY2xvc2VkRjoNQGZsYXNoZXN7BjoLbm90aWNlSSIcU2lnbmVkIGluIHN1Y2Nlc3NmdWxseS4GOwBUOglAbm93MA%3D%3D--af818aec85a2ba30a514bdaaf6230d24538e2909; path=/; HttpOnly"/>
  <con:entry key="TT-Mobile" value="ej6eiqTd/cd0rq3yMW3tfXTmleatKP462Swi1oRwDyw="/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"cancel_reason":"","changed_destination_name":"","commit":"Cancel Request","id":456360,"otherReason":"","quote_customization":"","reason":"Canceled"}</con:request><con:originalUri>http://traveler-api.ttdev.in/api/v1/requested_trips/456360/cancelRequest</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="apiVersion" value="v1"/>
  <con:entry key="tripID" value="456360"/>
</con:parameters><con:parameterOrder><con:entry>apiVersion</con:entry><con:entry>tripID</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="add9918d-cc13-449a-b201-8a56c1c0d83c" wadlVersion="http://wadl.dev.java.net/2009/02" name="Request Call Back" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="Feedbacks" path="/api/{api_version}/feedbacks" id="a47dbe07-62d8-4d36-b2a5-2196e468a8b2"><con:settings/><con:parameters><con:parameter><con:name>api_version</con:name><con:value>api_version</con:value><con:style>TEMPLATE</con:style><con:default>api_version</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Feedbacks" id="edc4efbd-ec6b-458d-90e4-70e45df6245e" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>201</con:status><con:params/><con:element xmlns:feed="http://traveler-api.ttdev.in/api/v2/feedbacks">feed:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:feed="http://traveler-api.ttdev.in/api/v2/feedbacks">feed:Fault</con:element></con:representation><con:request name="Request 1" id="3fcc57cd-0572-43c9-95b9-63b9a6f9a8a7" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="_trips3m_session=BAh7CUkiD3Nlc3Npb25faWQGOgZFVEkiJWQ2NzU0NzdjOTVjMDE4M2E2MzM0NGIxNzBmZTczNWRkBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA1TCBEkiIiQyYSQxMCRLRng3ZlYxU3NkalJreEF0UWs5bmNPBjsAVEkiCmZsYXNoBjsAVG86JUFjdGlvbkRpc3BhdGNoOjpGbGFzaDo6Rmxhc2hIYXNoCToKQHVzZWRvOghTZXQGOgpAaGFzaHsAOgxAY2xvc2VkRjoNQGZsYXNoZXN7BjoLbm90aWNlSSIcU2lnbmVkIGluIHN1Y2Nlc3NmdWxseS4GOwBUOglAbm93MA%3D%3D--af818aec85a2ba30a514bdaaf6230d24538e2909; path=/; HttpOnly"/>
  <con:entry key="TT-Mobile" value="ej6eiqTd/cd0rq3yMW3tfXTmleatKP462Swi1oRwDyw="/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"body":"ph no - +918415236574","email":"testingtt2015@gmail.com","name":"test","time":"2016-09-21T14:59:15+0530","type":"request_on_call"}</con:request><con:originalUri>http://traveler-api.ttdev.in/api/v2/feedbacks</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="api_version" value="v2" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>api_version</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="5f2df39e-c0ff-41ad-90e5-895c8aada64c" wadlVersion="http://wadl.dev.java.net/2009/02" name="CheckAppUpdate" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="Check_app_update" path="/api/{apiversion}/check_app_update" id="8e2cc650-4c4f-4bb6-9edd-7423ccefeed9"><con:settings/><con:parameters><con:parameter><con:name>apiversion</con:name><con:value>apiversion</con:value><con:style>TEMPLATE</con:style><con:default>apiversion</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>app_ver</con:name><con:value>{appversion}</con:value><con:style>QUERY</con:style><con:default>{appversion}</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Check_app_update" id="77ac442b-4da1-4564-b9c6-c509e87e3d9e" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>text/html; charset=UTF-8</con:mediaType><con:status>500</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:chec="http://traveler-api.ttdev.in/api/v1/check_app_update">chec:Response</con:element></con:representation><con:request name="Request 1" id="19955781-fbae-4bb8-928f-9908fa4b5206" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="zr73+DX8WmWO6uII/4a+A7iKeASNvVO/X/p4w0PvInQ="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v1/check_app_update</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="app_ver" value="3.3.2"/>
  <con:entry key="apiversion" value="v1"/>
</con:parameters><con:parameterOrder><con:entry>apiversion</con:entry><con:entry>app_ver</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="941517b5-2899-4b48-9b9f-c15243b7b5f7" wadlVersion="http://wadl.dev.java.net/2009/02" name="GetCitiesForADestination" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://${#Project#travaler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="Cities.json" path="/api/{apiVersion}/destinations/{destination_id}/cities.json" id="0a7abe19-c6d1-4ce5-9a27-4a0a8a5cafd9"><con:settings/><con:parameters><con:parameter><con:name>apiVersion</con:name><con:value>apiVersion</con:value><con:style>TEMPLATE</con:style><con:default>apiVersion</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>destination_id</con:name><con:value>destination_id</con:value><con:style>TEMPLATE</con:style><con:default>destination_id</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Cities.json" id="da415514-951b-4883-9057-90c8d1c0ae8c" method="GET"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>403</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element>Response</con:element></con:representation><con:request name="Request 1" id="af13f92c-c918-4985-b355-8506a94a38e7" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="ej6eiqTd/cd0rq3yMW3tfXTmleatKP462Swi1oRwDyw="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://null///api/v1/destinations/destination_id/cities.json</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="apiVersion" value="v1"/>
  <con:entry key="destination_id" value="destination_id"/>
</con:parameters><con:parameterOrder><con:entry>apiVersion</con:entry><con:entry>destination_id</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="b1bb928b-eb2d-4887-bee8-49787fb585b6" wadlVersion="http://wadl.dev.java.net/2009/02" name="GetAgentTestimonials" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="Get_agent_testimonial" path="/api/{apiversion}/agents/{agent_id}/get_agent_testimonial" id="d80b6099-1a1e-44d2-b6aa-2e2cb1b093a3"><con:settings/><con:parameters><con:parameter><con:name>apiversion</con:name><con:value>apiversion</con:value><con:style>TEMPLATE</con:style><con:default>apiversion</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>agent_id</con:name><con:value>agent_id</con:value><con:style>TEMPLATE</con:style><con:default>agent_id</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Get_agent_testimonial" id="bb7c0841-6d44-4f11-9bc0-ef70975c6e01" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>403 401</con:status><con:params/><con:element xmlns:get="http://traveler-api.ttdev.in/api/v1/agents/199585/get_agent_testimonial">get:Fault</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element>Response</con:element></con:representation><con:request name="Request 1" id="118fc434-7f56-4d52-85ff-b8a504b4c1de" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="ej6eiqTd/cd0rq3yMW3tfXTmleatKP462Swi1oRwDyw="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v1/agents/199585/get_agent_testimonial</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="agent_id" value="199585"/>
  <con:entry key="apiversion" value="v1"/>
</con:parameters><con:parameterOrder><con:entry>apiversion</con:entry><con:entry>agent_id</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="9cf59327-3c60-4b49-b5b6-602ea6da50d6" wadlVersion="http://wadl.dev.java.net/2009/02" name="ConfirmAccountLinkForTrip" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="Confirmation_link" path="/api/{apiversion}/requested_trips/{trip_id}/confirmation_link" id="173cde81-4c0b-43f6-9a24-161c5ad9d71d"><con:settings/><con:parameters><con:parameter><con:name>apiversion</con:name><con:value>apiversion</con:value><con:style>TEMPLATE</con:style><con:default>apiversion</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>trip_id</con:name><con:value>trip_id</con:value><con:style>TEMPLATE</con:style><con:default>trip_id</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Confirmation_link" id="eec6d9ef-9543-457e-b715-f7011daa8b9d" method="GET"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>403 401</con:status><con:params/><con:element xmlns:con1="http://traveler-api.ttdev.in/api/v1/requested_trips/trip_id/confirmation_link">con1:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:con1="http://traveler-api.ttdev.in/api/v1/requested_trips/trip_id/confirmation_link">con1:Response</con:element></con:representation><con:request name="Request 1" id="85852e26-3da7-4c68-9ee2-750407b60636" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="ej6eiqTd/cd0rq3yMW3tfXTmleatKP462Swi1oRwDyw="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v1/requested_trips/trip_id/confirmation_link</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="trip_id" value="trip_id"/>
  <con:entry key="apiversion" value="v1"/>
</con:parameters><con:parameterOrder><con:entry>apiversion</con:entry><con:entry>trip_id</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="14d89f8b-ef26-4970-8519-04be9e14bfaf" wadlVersion="http://wadl.dev.java.net/2009/02" name="ResendAccountConfirmationLink" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="Confirm_email" path="/api/{apiversion}/users/confirm_email" id="29ebed50-77cd-4a81-a41b-0fff3f337643"><con:settings/><con:parameters><con:parameter><con:name>apiversion</con:name><con:value>apiversion</con:value><con:style>TEMPLATE</con:style><con:default>apiversion</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>email</con:name><con:value>{useremail}</con:value><con:style>QUERY</con:style><con:default>{useremail}</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Confirm_email" id="8fb50d5b-9a88-4dfb-84a3-ebb8a8162068" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>403 404 500</con:status><con:params/><con:element xmlns:con1="http://traveler-api.ttdev.in/api/v1/users/confirm_email">con1:Fault</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:request name="Request 1" id="c85afba0-6084-45f8-8929-72cf4dee2b09" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value=""/>
  <con:entry key="TT-Mobile" value="ej6eiqTd/cd0rq3yMW3tfXTmleatKP462Swi1oRwDyw="/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="apiversion" value="v1"/>
  <con:entry key="email" value=""/>
</con:parameters><con:parameterOrder><con:entry>apiversion</con:entry><con:entry>email</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="0ffaa784-6076-494d-bc57-ea57b9dc63b0" wadlVersion="http://wadl.dev.java.net/2009/02" name="GetOfferListForTrip" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="Show" path="/api/{apiversion}/offer/show" id="76f8ac55-5ef1-4e40-a78b-72007ca06c8f"><con:settings/><con:parameters><con:parameter><con:name>apiversion</con:name><con:value>apiversion</con:value><con:style>TEMPLATE</con:style><con:default>apiversion</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>rtrip_id</con:name><con:value>&lt;rtrip_id></con:value><con:style>QUERY</con:style><con:default>&lt;rtrip_id></con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Show" id="46ebc111-ba3d-47af-aeab-43c8907ed645" method="GET"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:show="http://traveler-api.ttdev.in/api/v2/offer/show">show:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:show="http://traveler-api.ttdev.in/api/v2/offer/show">show:Response</con:element></con:representation><con:request name="Request 1" id="92683e44-032e-42fd-889d-b207d5ccee3b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="ej6eiqTd/cd0rq3yMW3tfXTmleatKP462Swi1oRwDyw="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="apiversion" value="v2"/>
  <con:entry key="rtrip_id" value="&lt;rtrip_id>"/>
</con:parameters><con:parameterOrder><con:entry>apiversion</con:entry><con:entry>rtrip_id</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="bec59bbc-43bd-4155-b6f4-19e4a2228bcd" wadlVersion="http://wadl.dev.java.net/2009/02" name="GetAgentCompanyProfile" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="Agent_company_profile.json" path="/api/{apiversion}/agents/{agent_id}/agent_company_profile.json" id="99310161-3d58-48cd-aafc-d37136147fcf"><con:settings/><con:parameters><con:parameter><con:name>apiversion</con:name><con:value>apiversion</con:value><con:style>TEMPLATE</con:style><con:default>apiversion</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>agent_id</con:name><con:value>agent_id</con:value><con:style>TEMPLATE</con:style><con:default>agent_id</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Agent_company_profile.json" id="aa92e50c-cbde-4196-b7be-4871059c0817" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:agen="http://traveler-api.ttdev.in/api/v1/agents/agent_id/agent_company_profile.json">agen:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:agen="http://traveler-api.ttdev.in/api/v1/agents/agent_id/agent_company_profile.json">agen:Response</con:element></con:representation><con:request name="Request 1" id="5fd249fc-8319-49af-846b-7cb946ac5e8e" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWJlN2E0MjRjOGZkZWZiMzFjZDQyYWVlY2E3MDkxNWU2BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA5uzCUkiIiQyYSQxMCRLQ1hrOHk1YWYuZGxITFIucUQwSFFlBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--7bfa544a488b52dce35a0df1d9d6086b8c9056bd; path=/; HttpOnly"/>
  <con:entry key="TT-Mobile" value="G35TUEtf7OhRlzLWD7AuuE0ynTMAU6752hbRBmORwKk="/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="agent_id" value="agent_id"/>
  <con:entry key="apiversion" value="v1"/>
</con:parameters><con:parameterOrder><con:entry>apiversion</con:entry><con:entry>agent_id</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="d6589a44-6938-4e43-a23c-69d8a1e51bf0" wadlVersion="http://wadl.dev.java.net/2009/02" name="" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint></con:endpoints><con:resource name="Traveller_calls_agent" path="/api/{api_version}/quotes/{package_id}/traveller_calls_agent" id="df6356c1-fe19-4807-9929-da4e9933fc9e"><con:settings/><con:parameters><con:parameter><con:name>api_version</con:name><con:value>api_version</con:value><con:style>TEMPLATE</con:style><con:default>api_version</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>package_id</con:name><con:value>package_id</con:value><con:style>TEMPLATE</con:style><con:default>package_id</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Traveller_calls_agent" id="1389fb54-c7e0-41a4-9793-a8a8fd0112b8" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="8bc77ab0-c4b2-4d5b-bbe7-d0ff443079cc" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWJlN2E0MjRjOGZkZWZiMzFjZDQyYWVlY2E3MDkxNWU2BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA5uzCUkiIiQyYSQxMCRLQ1hrOHk1YWYuZGxITFIucUQwSFFlBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--7bfa544a488b52dce35a0df1d9d6086b8c9056bd; path=/; HttpOnly"/>
  <con:entry key="TT-Mobile" value="G35TUEtf7OhRlzLWD7AuuE0ynTMAU6752hbRBmORwKk="/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="package_id" value="package_id"/>
  <con:entry key="api_version" value="v3"/>
</con:parameters><con:parameterOrder><con:entry>api_version</con:entry><con:entry>package_id</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="ffae232a-ef60-4e6c-b263-84f2a7c5ca5d" wadlVersion="http://wadl.dev.java.net/2009/02" name="REQUESTNEWQUOTEDETAIL" type="rest" definitionUrl="hji" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="new" path="/api/v4/requested_trips/{requestID}/quotes/new" id="0b601389-9372-4933-a6d2-d88fff619fed"><con:settings/><con:parameters><con:parameter><con:name>requestID</con:name><con:style>TEMPLATE</con:style></con:parameter><con:parameter><con:name>security_auth_token</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="a8ffc674-73be-4af5-8a4b-c1c82f8b4b2c" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="7dcecddc-c035-4ed9-a869-45324dc9b574" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTg4MTNiNTEwZTQwMjI4ZjQ2NDFkOGUyNDgwZDNlNzRhBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA6ELA0kiIiQyYSQxMCRRdTBBa2ZXRGg1NjlXckFmcHZ3TmplBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--a330c87a3f840d9a58e19b343b9f41343fc42ea4; path=/; HttpOnly"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="Content-Type" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v4/requested_trips/889699/quotes/new</con:originalUri><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>requestID</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="f29c4f8d-a1a0-46dc-8d57-b5da97b36821" wadlVersion="http://wadl.dev.java.net/2009/02" name="CreateQuote" type="rest" definitionUrl="createquote" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="quotes" path="/api/v4/requested_trips/{request_id}/quotes" id="55ad4e5b-a2c7-4346-a3ce-e941aab43c6d"><con:settings/><con:parameters><con:parameter><con:name>request_id</con:name><con:style>TEMPLATE</con:style></con:parameter></con:parameters><con:method name="Method 1" id="bc8bc869-5c08-490e-a976-5d14405908f5" method="POST"><con:settings/><con:parameters/><con:request name="Request 1" id="07a0e598-f3b8-4df7-8cfa-e914de4d51d2" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="Cookie" value=""/>
  &lt;con:entry key="User-Agent" value="${#Project#user_agent}"/>
  &lt;con:entry key="Accept" value="application/json"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"utf8":"✓",
"authenticity_token":"8g+WtepgUDToey49evWgFuDCWNjvWDfEv+ji32uAIAk=",
"version":"",
"should_warnings_override":"false",
"commit":"SAVE &amp; SEND",
"quote_match_param":"last",
"quote":
 {"type_of_trip":"",
  "days":"5",
  "nights":"4",
  "perperson":"per person",
  "currency":"Rupee",
  "flight_cost":"0",
  "visa_cost":"0",
  "price":"32430",
  "hotels":"gjfjhg",
  "flights":"",
  "cabs":"fjhfjhfjhgfj",
  "quote_inclusions_attributes":
   {"0":
     {"id":"",
      "inclusion_id":"447",
      "comments_added":"",
      "is_included":"1"},
    "1":{"id":"", "inclusion_id":"99", "is_included":"1"},
    "2":{"id":"", "inclusion_id":"100", "is_included":"0"},
    "3":{"id":"", "inclusion_id":"101", "is_included":"0"},
    "4":
     {"id":"",
      "inclusion_id":"102",
      "comments_added":"",
      "is_included":"0"},
    "5":
     {"id":"",
      "inclusion_id":"103",
      "comments_added":"",
      "is_included":"0"},
    "6":
     {"id":"",
      "inclusion_id":"104",
      "comments_added":"",
      "is_included":"0"},
    "7":
     {"id":"",
      "inclusion_id":"105",
      "comments_added":"",
      "is_included":"0"},
    "8":
     {"id":"",
      "inclusion_id":"113",
      "comments_added":"",
      "is_included":"0"},
    "9":
     {"id":"",
      "inclusion_id":"446",
      "comments_added":"",
      "is_included":"0"},
    "10":
     {"id":"",
      "inclusion_id":"114",
      "comments_added":"",
      "is_included":"1"},
    "11":
     {"id":"",
      "inclusion_id":"115",
      "comments_added":"",
      "is_included":"0"}},
  "trip_days_attributes":
   {"0":{"title":"fdhghdg", "description":"gfdhgf", "_destroy":"false"},
    "1":{"title":"gfhghfh", "description":"gffhfh", "_destroy":"false"},
    "2":{"title":"gfhfh", "description":"gfhh", "_destroy":"false"},
    "3":{"title":"hggfhg", "description":"hgfhgh", "_destroy":"false"},
    "5":{"title":"ghgfh", "description":"ghhggf", "_destroy":"false"}},
  "terms_conditions":"gghhg",
  "description":"hfhg"},
"quote_land_package_cost":"0",
"flights_not_included":"true",
"save_inclusions":"true",
"action":"create",
"controller":"quotes",
"requested_trip_id":"946352l"}</con:request><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>request_id</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="609122b0-8360-4a4b-ad94-92df96044a7f" wadlVersion="http://wadl.dev.java.net/2009/02" name="AddAgentTagAndActivetrip" type="rest" definitionUrl="addtagandactivetrip" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="add_tag_and_activate_trip" path="/api/v3/requested_trips/{rtrip_id}/add_tag_and_activate_trip" id="67b335e1-b928-4230-af00-04750e847a19"><con:settings/><con:parameters><con:parameter><con:name>rtrip_id</con:name><con:value>rtrip_id</con:value><con:style>TEMPLATE</con:style><con:default>rtrip_id</con:default></con:parameter><con:parameter><con:name>tag_id</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>is_activate</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>delete_agent_tags</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="da5f13ce-cbbb-4bec-a4f4-52f51eaa9404" method="POST"><con:settings/><con:parameters/><con:request name="Request 1" id="e6fc8241-2c92-43eb-985f-aac69af3230d" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value=""/>
  <con:entry key="TT-Mobile" value=""/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="delete_agent_tags" value="delete_agent_tags"/>
  <con:entry key="is_activate" value="is_activate"/>
  <con:entry key="tag_id" value="tag_id"/>
</con:parameters><con:parameterOrder><con:entry>rtrip_id</con:entry><con:entry>tag_id</con:entry><con:entry>is_activate</con:entry><con:entry>delete_agent_tags</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="b600a454-3c62-4cf4-8356-51b863896071" wadlVersion="http://wadl.dev.java.net/2009/02" name="GetRequestDetail" type="rest" definitionUrl="getquotedetail" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="{quoteId}" path="/api/{version}/requested_trips/{rtripId}" id="48dc86ac-a6b6-4f84-8cde-227c5ecd881f"><con:settings/><con:parameters><con:parameter><con:name>rtripId</con:name><con:value>rtripId</con:value><con:style>TEMPLATE</con:style><con:default>rtripId</con:default></con:parameter><con:parameter><con:name>version</con:name><con:style>TEMPLATE</con:style></con:parameter><con:parameter><con:name>include_quotes</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>security_auth_token</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="28c87d5f-5b9c-4355-aaf8-af490b1a164f" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="3bb87632-a6dc-4ec6-a6d6-0d9edb486313" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value=""/>
  <con:entry key="TT-Mobile" value=""/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="include_quotes" value="include_quotes"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="version" value="version"/>
</con:parameters><con:parameterOrder><con:entry>rtripId</con:entry><con:entry>version</con:entry><con:entry>include_quotes</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="b5e9dc0a-d817-448c-8265-59b85683b6e6" wadlVersion="http://wadl.dev.java.net/2009/02" name="SetStatusOfQuote" type="rest" definitionUrl="ChangeQuoteStatus" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="statusChange" path="/api/v1/requested_trips/{requested_trip_id}/quotes/{quote_id}/statusChange" id="f798bdc1-0a41-4645-80f7-229a9ec0fc96"><con:settings/><con:parameters><con:parameter><con:name>requested_trip_id</con:name><con:value>requested_trip_id</con:value><con:style>TEMPLATE</con:style><con:default>requested_trip_id</con:default></con:parameter><con:parameter><con:name>quote_id</con:name><con:value>quote_id</con:value><con:style>TEMPLATE</con:style><con:default>quote_id</con:default></con:parameter><con:parameter><con:name>state</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>quote_decline_reason</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>request</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="3d3d5c49-a14f-4761-8c1d-04bd74ff0f2b" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="22a0bfba-34d9-4651-b664-c2b5ce6edd42" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value=""/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>requested_trip_id</con:entry><con:entry>quote_id</con:entry><con:entry>request</con:entry><con:entry>state</con:entry><con:entry>quote_decline_reason</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="fc94ad4d-4a4e-4123-b88d-8a08224a41a4" wadlVersion="http://wadl.dev.java.net/2009/02" name="InitPaymentTransaction" type="rest" definitionUrl="initpaymenttransaction" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="initialize_transaction" path="/api/v1/transactions/initialize_transaction" id="54da5df7-9c6a-48f8-870e-d1dc5e3c1a66"><con:settings/><con:parameters><con:parameter><con:name>payment_id</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>requested_trip_id</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>quote_id</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>amount</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>currency</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>api_request</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="1712ed5e-e1bc-4074-bef4-7b346a0fbdd3" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="f04f33ec-7585-41eb-81d8-fd9f01e6d740" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value=""/>
  <con:entry key="TT-Mobile" value=""/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="amount" value="amount"/>
  <con:entry key="requested_trip_id" value="requested_trip_id"/>
  <con:entry key="quote_id" value="quote_id"/>
  <con:entry key="api_request" value="true"/>
  <con:entry key="currency" value="currency"/>
</con:parameters><con:parameterOrder><con:entry>payment_id</con:entry><con:entry>requested_trip_id</con:entry><con:entry>quote_id</con:entry><con:entry>amount</con:entry><con:entry>currency</con:entry><con:entry>api_request</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="9984e729-9eb1-48ee-a187-b2e1543f2746" wadlVersion="http://wadl.dev.java.net/2009/02" name="ReactivateTrip" type="rest" definitionUrl="reactivetrip" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="reactivate" path="/api/v1/requested_trips/{rid}/reactivate" id="0ec907c9-018e-4c78-93fe-89de6bf8c0cc"><con:settings/><con:parameters><con:parameter><con:name>rid</con:name><con:value>rid</con:value><con:style>TEMPLATE</con:style><con:default>rid</con:default></con:parameter></con:parameters><con:method name="Method 1" id="a33a16ef-462e-493e-b3f1-aa0abd260cb8" method="POST"><con:settings/><con:parameters/><con:request name="Request 1" id="b5de6e3f-e9ea-4de7-bbdc-12793f33aba5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value=""/>
  <con:entry key="TT-Mobile" value=""/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"id":753697}</con:request><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="rid" value="753697" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="5195007b-3a29-49b9-85b5-049a8f05cce7" wadlVersion="http://wadl.dev.java.net/2009/02" name="PostCommentOnQuote" type="rest" definitionUrl="PostCommentOnQuote" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="comments" path="/api/v1/requested_trips/{requested_trip_id}/quotes/{quote_id}/comments" id="5e42a148-1929-44e8-9c21-3dd2944f7990"><con:settings/><con:parameters><con:parameter><con:name>requested_trip_id</con:name><con:value>requested_trip_id</con:value><con:style>TEMPLATE</con:style><con:default>requested_trip_id</con:default></con:parameter><con:parameter><con:name>quote_id</con:name><con:value>quote_id</con:value><con:style>TEMPLATE</con:style><con:default>quote_id</con:default></con:parameter></con:parameters><con:method name="Method 1" id="c591b680-2b6b-44c5-9dd9-c1a4c8c6dfb6" method="POST"><con:settings/><con:parameters/><con:request name="Request 1" id="e28f41e2-92a4-49ae-8602-5718ecd91d33" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value=""/>
  <con:entry key="TT-Mobile" value=""/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>[{
	"_id": ,
	"attachments_attributes": [],
	"comment": "hii",
	"commentBy": "TRAVELLER",
	"commentable_id": 1178784,
	"commentable_type": "Quote",
	"created_at": "2016-05-26T18:49:47+0530",
	"displayTime": "26 May, 2016 06:49 pm",
	"email": "testing1112015@rediffmail.com",
	"role": "traveller",
	"status": "PENDING",
	"title": "preferences_input_comment",
	"trip_id": 753679,
	"user_id": 251180
}]</con:request><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="9ab6334b-8a1b-4c1e-b947-1e5bed86391d" wadlVersion="http://wadl.dev.java.net/2009/02" name="ViewAllQuoteComments" type="rest" definitionUrl="ViewAllQuoteComment" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="show_all_comments" path="/api/v2/requested_trips/{requested_trip_id}/quotes/{quote_id}/comments/show_all_comments" id="3a7e78b2-907b-4a15-b867-3dcafc6679ff"><con:settings/><con:parameters><con:parameter><con:name>requested_trip_id</con:name><con:value>requested_trip_id</con:value><con:style>TEMPLATE</con:style><con:default>requested_trip_id</con:default></con:parameter><con:parameter><con:name>quote_id</con:name><con:value>quote_id</con:value><con:style>TEMPLATE</con:style><con:default>quote_id</con:default></con:parameter></con:parameters><con:method name="Method 1" id="40c83d23-453b-4902-bb25-be537194cabf" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="71d09b8d-04a9-44c3-8d86-7b04d4115d57" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value=""/>
  <con:entry key="TT-Mobile" value=""/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="2167b5e4-a1db-460a-bd9d-0e10181628c2" wadlVersion="http://wadl.dev.java.net/2009/02" name="GetHotelDetails" type="rest" definitionUrl="gethoteldetails" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="get_hotel_detail" path="/api/{version}/quotes/{quote_id}/get_hotel_detail" id="7f5e3f97-b148-4c46-8c03-963b24b36d48"><con:settings/><con:parameters><con:parameter><con:name>quote_id</con:name><con:value>quote_id</con:value><con:style>TEMPLATE</con:style><con:default>quote_id</con:default></con:parameter><con:parameter><con:name>requested_trip_id</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>version</con:name><con:style>TEMPLATE</con:style></con:parameter></con:parameters><con:method name="Method 1" id="6b780865-e5b8-4099-860e-3dbb3105b8ab" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="1636edc6-4369-41e1-9fa7-7a6b5fbb4a94" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value=""/>
  <con:entry key="TT-Mobile" value=""/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="requested_trip_id" value="rtrip"/>
  <con:entry key="version" value="v3"/>
</con:parameters><con:parameterOrder><con:entry>quote_id</con:entry><con:entry>requested_trip_id</con:entry><con:entry>version</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="b3f1e29a-9c2d-4e9a-b07a-e125e280442f" wadlVersion="http://wadl.dev.java.net/2009/02" name="HotelAccept" type="rest" definitionUrl="accpthotel" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="mark_hotel_accepted" path="/api/v3/mark_hotel_accepted" id="a2f4f949-6bb0-42da-b3af-99ad329a314e"><con:settings/><con:parameters><con:parameter><con:name>id</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="b22ed64b-80c7-4d98-9e3f-46ad519b7bbd" method="POST"><con:settings/><con:parameters/><con:request name="Request 1" id="dc0645be-c1f1-4a69-8912-6f4f067f12de" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash key for quote hotel detail#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="quoteid" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>id</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="5fc4ba84-3bf9-4800-b7fb-b7de7906d7f1" wadlVersion="http://wadl.dev.java.net/2009/02" name="GetTripDayDetail" type="rest" definitionUrl="gettripdaydetail" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="get_tripday_detail" path="/api/v1/quotes/{quote_id}/get_tripday_detail" id="07be4c59-b3d1-40ba-8a36-811528a3b1e2"><con:settings/><con:parameters><con:parameter><con:name>quote_id</con:name><con:value>quote_id</con:value><con:style>TEMPLATE</con:style><con:default>quote_id</con:default></con:parameter></con:parameters><con:method name="Method 1" id="b16d3b37-8481-4ad3-9a0a-994c08222723" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="c28ecd1f-323b-4419-b65b-6dc4b84e0989" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="hashkey"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="9ff90e93-60f5-475f-9364-db7adbc60426" wadlVersion="http://wadl.dev.java.net/2009/02" name="GetPackageTestimonials" type="rest" definitionUrl="viewpackagetestimonials" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="review" path="/api/v3/tour_packages/{package_name}/review" id="1dbc6a28-0f62-463e-97e9-6c3ff8d164c4"><con:settings/><con:parameters><con:parameter><con:name>package_name</con:name><con:value>package_name</con:value><con:style>TEMPLATE</con:style><con:default>package_name</con:default></con:parameter><con:parameter><con:name>page_number</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>id</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>security_auth_token</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="71fb46b1-bb94-436b-8005-059762d0abe0" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="7d27f5dc-c828-4701-b8f3-fbdae52a56db" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="hash_key"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="id" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>package_name</con:entry><con:entry>page_number</con:entry><con:entry>id</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="5104b409-e887-41c1-9d2c-eca54fba7c24" wadlVersion="http://wadl.dev.java.net/2009/02" name="GetSimiliarPackages" type="rest" definitionUrl="GetSimiliarPackages" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="{package_id}" path="/api/v4/get_similar_packages/{package_id}" id="b96d087b-9165-4b46-8ee6-22f379109ee1"><con:settings/><con:parameters><con:parameter><con:name>package_id</con:name><con:value>package_id</con:value><con:style>TEMPLATE</con:style><con:default>package_id</con:default></con:parameter></con:parameters><con:method name="Method 1" id="2207a344-a57d-4387-be62-dbebdd790500" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="419772c3-0fef-411e-b835-b403c2e5c15f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="User-Agent" value="${#Project#user_agent}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="9fe226b7-45c8-49d9-adef-7e62319ee12e" wadlVersion="http://wadl.dev.java.net/2009/02" name="GetPackageFAQ" type="rest" definitionUrl="getpackagefaq" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="faq" path="/api/v3/tour_packages/{package_name}/faq" id="01102f41-e725-42f4-aff6-a0cc9d2e3a4f"><con:settings/><con:parameters><con:parameter><con:name>package_name</con:name><con:value>package_name</con:value><con:style>TEMPLATE</con:style><con:default>package_name</con:default></con:parameter><con:parameter><con:name>id</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="fdab122a-a2c2-4eb5-af93-507265c94166" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="e91d2953-7d47-42d4-84e7-4fb6bd662788" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value=""/>
  <con:entry key="TT-Mobile" value=""/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="id" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>package_name</con:entry><con:entry>id</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="6a0e5ebe-8185-4871-b286-8167679fa57a" wadlVersion="http://wadl.dev.java.net/2009/02" name="GetPrefilledInvoiceData" type="rest" definitionUrl="GetPreFilledInvoiceData" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="prefill_invoice_data.json" path="/api/v4/invoices/prefill_invoice_data.json" id="0b2ff300-017b-4f57-a129-c17980341876"><con:settings/><con:parameters><con:parameter><con:name>quote_id</con:name><con:value>{quoteid}</con:value><con:style>QUERY</con:style><con:default>{quoteid}</con:default></con:parameter></con:parameters><con:method name="Method 1" id="de12cf7a-965f-4384-9b24-c9bd506aa0e4" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="b352093f-30b4-4595-8fc0-2612e0b51b77" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="Cookie"/>
  <con:entry key="TT-Mobile" value="hash_key"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.agentnotifier"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="d9f32cb6-de22-4b4f-829d-e82f90492ff7" wadlVersion="http://wadl.dev.java.net/2009/02" name="SyncInvoiceComissionPayment" type="rest" definitionUrl="SyncInvoiceComissionPayment" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="sync_invoice_commission_payments.json" path="/api/v4/invoices/sync_invoice_commission_payments.json" id="1a36ed7d-9a19-49e6-b332-9fd983dd509d"><con:settings/><con:parameters/><con:method name="Method 1" id="cb175baf-3af6-4594-9507-e12957d16bed" method="POST"><con:settings/><con:parameters/><con:request name="Request 1" id="6c77f7f1-8c5f-49d4-a022-94b5a9930451" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value=""/>
  <con:entry key="TT-Mobile" value=""/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.agentnotifier"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{
  "agent_commission_charged": 5.53,
  "discount": 0.0,
  "discount_traveller": 0,
  "flight_amount": 0,
  "payments_attributes": [
    {
      "_destroy": false,
      "from_traveler": 32430.0,
      "is_editable": true,
      "scheduled_date": "2016-11-08",
      "status": "Scheduled",
      "traveler_currency": "Rupee",
      "user_id": 199585
    }
  ],
  "quote_id": "1534740",
  "visa_cost": 0
}</con:request><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="5999c8e2-3edd-407d-b3e5-59dfe12dc6ff" wadlVersion="http://wadl.dev.java.net/2009/02" name="CreateInvoice" type="rest" definitionUrl="CreateInvoice" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="create_invoice.json" path="/api/v4/invoices/create_invoice.json" id="ef46c607-d99b-471a-bd4a-33a5deaac00e"><con:settings/><con:parameters/><con:method name="Method 1" id="23cd4be2-cb7e-4d5b-bb46-b585d74683e9" method="POST"><con:settings/><con:parameters/><con:request name="Request 1" id="e3a9e075-4d6c-4525-92dc-93a23212a8ff" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="Cookie"/>
  <con:entry key="TT-Mobile" value="hash_key"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{
  "agent_commision": 5.53,
  "invoice": {
    "address": "",
    "agent_earning": 30636.619140625,
    "agent_id": 199585,
    "discount": 0.0,
    "discount_traveller": 0,
    "email": "ttagentdemo@gmail.com",
    "flight_amount": 0,
    "payments_attributes": [
      {
        "_destroy": true,
        "from_traveler": 32430.0,
        "is_editable": true,
        "scheduled_date": "2016-11-08",
        "status": "Scheduled",
        "traveler_currency": "Rupee",
        "user_id": 199585
      }
    ],
    "quote_id": "1534740",
    "requested_trip_id": 947896,
    "invoices_deliverables_attributes": [
      {
        "deliverable_id": 1,
        "_destroy": false
      },
      {
        "comments": "shhhshshs",
        "deliverable_id": 6,
        "_destroy": false
      }
    ],
    "toc": "snnsnssnsnsn",
    "traveller_fullname": "Tour",
    "traveller_phone_no": "+912541369874",
    "trip_details": "Name: Tour\nAdult(s): 0\nChild: 0\nDestination: Australia\n",
    "ttcommission": 1793.3800048828125,
    "visa_cost": 0,
    "voucher_days": 3
  },
  "selectPayment": 1
}</con:request><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="cd685c4f-675a-49d9-a979-ceb4accca085" wadlVersion="http://wadl.dev.java.net/2009/02" name="SendInvoice" type="rest" definitionUrl="SendInvoice" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="send_invoice.json" path="/api/v4/invoices/send_invoice.json" id="d6d6c9fb-2f1f-4052-b98f-da8c91b12ce2"><con:settings/><con:parameters><con:parameter><con:name>id</con:name><con:value>{invoiceID}</con:value><con:style>QUERY</con:style><con:default>{invoiceID}</con:default></con:parameter></con:parameters><con:method name="Method 1" id="bcecf52a-1543-45f9-95ff-5cf9ca6fb8d1" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="f2b52a37-569e-4411-99e9-5faa33461d92" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value=""/>
  <con:entry key="TT-Mobile" value=""/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.agentnotifier"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="b031dc37-5ddb-4d28-abd6-8b5b9f8cc101" wadlVersion="http://wadl.dev.java.net/2009/02" name="DownloadInvoice" type="rest" definitionUrl="DownloadInvoice" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="{invoiceID}" path="/api/v1/invoice/download/{invoiceID}" id="cea88d54-e267-4b59-872a-f461bbe23e43"><con:settings/><con:parameters><con:parameter><con:name>invoiceID</con:name><con:value>invoiceID</con:value><con:style>TEMPLATE</con:style><con:default>invoiceID</con:default></con:parameter></con:parameters><con:method name="Method 1" id="f22f0b9f-01a6-46fe-bc7b-4ffd84cd0ffe" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="8d735de3-8993-4118-bc09-685b8a7619ba" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash key#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="4673af45-e123-4ada-a918-e8b1ed286ad8" wadlVersion="http://wadl.dev.java.net/2009/02" name="GetOffer" type="rest" definitionUrl="getOffer" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="show" path="/api/v2/offer/show" id="95f34e48-5272-4fba-b832-d06eb6593fa9"><con:settings/><con:parameters><con:parameter><con:name>rtrip_id</con:name><con:value>{rtripId}</con:value><con:style>QUERY</con:style><con:default>{rtripId}</con:default></con:parameter></con:parameters><con:method name="Method 1" id="0a87b343-82c0-4129-ad44-ad5bea0f4e95" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="9fcda0c2-b78a-443d-9fd2-adb31082e3b5" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash key for quote hotel detail#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="234866bf-16c9-4bb4-9c2b-39b3232516b1" wadlVersion="http://wadl.dev.java.net/2009/02" name="SocialSignIn" type="rest" definitionUrl="SocialSignIn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="callback.json" path="/api/v5/auth/social/callback.json" id="ef8558a9-996f-4016-b253-7c652d8553c6"><con:settings/><con:parameters><con:parameter><con:name>security_auth_token</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="9677fc9f-1315-435a-b741-f7e27878b0fa" method="POST"><con:settings/><con:parameters/><con:request name="Request 1" id="a0128e96-2c35-4adf-81d8-e28bfa4fa9b5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="TT-Mobile" value=""/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="Connection" value="Keep-Alive"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{
  "auth_token": "EAABjHt0SzDMBAFNq3yfZAVqGjnZAxwbHzRgDx12EmEerehthqTKvkLpvZCFOO5HHZAJZAavrJCr1GPMOvwYRj3CUnjidHZC3Mx0ChJYTJRVICa5Jj8Ch6CFL8FDcANPRBZA2ewOwESOVHa6LcSlwofxYCGZAKJFGe4LZB2xuUdeSsZAwzjZA2BnZBbhRVPjbePGKKddDoGUO2NDb91zp02Dv2aZAKXEOp8IjId7uZAsU1ZCqbZBNktek9iyxOplZA",
  "credentials": {},
  "extra": {
    "raw_info": {
      "email": "usetesttravel@gmail.com",
      "first_name": "Lorem",
      "gender": "male",
      "id": "118111472062960",
      "last_name": "Singh",
      "name": "Lorem Singh"
    }
  },
  "info": {
    "email": "usetesttravel@gmail.com",
    "first_name": "Lorem",
    "image": "http://graph.facebook.com/118111472062960/picture?type=large",
    "last_name": "Singh",
    "name": "Lorem Singh"
  },
  "provider": "facebook",
  "uid": "118111472062960"
}</con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="security_auth_token" value="security_auth_token" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>security_auth_token</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="4eeaa9aa-3861-4331-b19d-c3bef1dcceae" wadlVersion="http://wadl.dev.java.net/2009/02" name="UpdateUserProfile" type="rest" definitionUrl="UpdateUserProfile" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="users.json" path="/users.json" id="5e0d79ec-f2c2-44be-af0a-a05010a76aa4"><con:settings/><con:parameters><con:parameter><con:name>security_auth_token</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="9633699c-f0ea-4adb-8f58-097d2ea81f5c" method="PUT"><con:settings/><con:parameters/><con:request name="Request 1" id="5bd081a2-0c53-42a8-8552-b877c4d371b8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{
	"user": {
		"agent_reviews_converted_quotes": 0,
		"converted_trips": 0,
		"first_name": "Lorem Tt Test Ipsum",
		"gender": "female",
		"id": 953268,
		"last_name": "G",
		"phone_no": "+9156558555588",
		"roles": []
	},
	"errors": {},
	"httpCode": 0,
	"message": "",
	"statusCode": 0
}</con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>security_auth_token</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="3313bd5e-e0ce-4769-9936-d443140e69f9" wadlVersion="http://wadl.dev.java.net/2009/02" name="Destination_through_category" type="rest" definitionUrl="api/v4/get_filtered_results?result_type=destination_catalog&amp;per_page=50&amp;trip_type=2&amp;page_number=1&amp;sort_by=relevance" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints/><con:resource name="get_filtered_results" path="/api/v4/get_filtered_results" id="30d2d8dd-3cb2-4abc-aba3-44f32a2566b6"><con:settings/><con:parameters><con:parameter><con:name>result_type</con:name><con:value>destination_catalog</con:value><con:style>QUERY</con:style><con:default>destination_catalog</con:default></con:parameter><con:parameter><con:name>trip_type</con:name><con:value>2</con:value><con:style>QUERY</con:style><con:default>2</con:default></con:parameter><con:parameter><con:name>page_number</con:name><con:value>1</con:value><con:style>QUERY</con:style><con:default>1</con:default></con:parameter><con:parameter><con:name>sort_by</con:name><con:value>relevance</con:value><con:style>QUERY</con:style><con:default>relevance</con:default></con:parameter><con:parameter><con:name>security_auth_token</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>per_page</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Method 1" id="ff256baf-97f1-4f96-be16-c60f87a93d35" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="cc5f0f1e-0c7f-4bbe-93f8-82c0aa1ad821" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://master.ttdev.in/api/v4/get_filtered_results</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="per_page" value="50"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
</con:parameters><con:parameterOrder><con:entry>result_type</con:entry><con:entry>trip_type</con:entry><con:entry>page_number</con:entry><con:entry>sort_by</con:entry><con:entry>security_auth_token</con:entry><con:entry>per_page</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:testSuite id="fdca761a-7dc9-4c44-8551-75593cd9d082" name="ReusableTests" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="1966b330-a53d-494b-ba1a-a687afdeabe8" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="CreateToken" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script" id="4afacfac-43d1-4460-8712-12aef9c0477c"><con:settings/><con:config><script>import java.security.MessageDigest;
import org.codehaus.groovy.runtime.EncodingGroovyMethods;


String requestUrl = context.expand('${#TestCase#request_url}');
String userEmail = context.expand('${#TestCase#user_email}');
String requestType = context.expand('${#TestCase#request_type}');
log.info requestUrl;
String digest;

if( requestType == "get" ){
  	digest = requestUrl; 
} else {
digest = userEmail + requestType;
}

digest = getUserDigest(digest); //this is final digest

log.info digest;
testRunner.testCase.setPropertyValue("hash_key",digest);

String getUserDigest(String digest) {
   String TT_S_KEY = "DAFAC0A55F50A75558B778035E3C9A8BDF03AF1E4C2124D2CD5DD42092EFD32E";
   try {
       digest = TT_S_KEY + digest;
       MessageDigest msgDigest = MessageDigest.getInstance("SHA-256");
       msgDigest.update(digest.getBytes());
       EncodingGroovyMethods encodeObj = new EncodingGroovyMethods();
       //digest = new String(Base64.encode(msgDigest.digest(), Base64.DEFAULT));
       digest = encodeObj.encodeBase64(msgDigest.digest()).toString();
       if (digest.length() > 164) {
           digest = digest.substring(0, 163);
       }
       return digest;
   } catch (Exception e) {
       log.info e.getMessage();
   }
   return null;
}
</script></con:config></con:testStep><con:properties><con:property><con:name>request_url</con:name><con:value>https://master.ttdev.in/api/v3/quotes/4807337/get_hotel_detail?requested_trip_id=2612706</con:value></con:property><con:property><con:name>user_email</con:name><con:value>lorem_tt_test_ipsum@mailinator.com</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>h58YpSJQjc4rj5J80NXUN40KZ9BZV8CiZE0yLT4QkWE=</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase id="d6e38075-ad8f-4890-9379-2f1cb755b34d" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User press the search tab" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Given user get the TT-MObile token for search tab" id="75ded9eb-a813-4ba3-863d-9f02dd664f1f"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>https://${#Project#traveler_apiendpoint}/api/v3/metadata/filter?filter_type=search</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>4YsS2hJh+f1PpHS+Jrq4YTCgu/5v/BQrcAu7s19AGH8=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="And search filter type is invoked" id="c582bfd1-ee48-40eb-ae4b-3f4844427f9d"><con:settings/><con:config service="FilterType" resourcePath="/api/{api_version}/metadata/filter" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And search filter type is invoked" id="436ba333-2b44-4d4a-adc7-688847704b53" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="${Given user get the TT-MObile token for search tab#hash_key}"/>
  <con:entry key="Content-Type" value="application/json;Char=UTF-8"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>https://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v3/metadata/filter</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="d15bc2a0-6f2b-4528-8a83-580060e4b43e" name="HTTP Status - 200"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="3057c977-27a6-49f4-98bb-4e4c141a510e" name="Verify Filter details"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

//Assert the filter type
String filter_type = json_response_holder.filter_type;
assert(filter_type == "search");

//Assert the filters details.

String[] filter_titles = json_response_holder.filters.title;

assert("Category" in filter_titles);
assert("Budget perperson (In Rs.)" in filter_titles);
assert("Duration(days)" in filter_titles);</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:preemptive>true</con:preemptive><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Preemptive</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="api_version" value="v3"/>
  <con:entry key="security_auth_token" value=""/>
</con:parameters><con:parameterOrder><con:entry>api_version</con:entry><con:entry>filter_type</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="And again get the TT-Mobile token for package_catalog" id="081872f1-42f8-4133-b434-88d56388db6e"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>http://${#Project#traveler_apiendpoint}/api/v3/metadata/filter?filter_type=package_catalog</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>8ajc9H9leOG1BmtydPJ/SvsLQhj9guLdCogpHAr57/U=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="And invoke the package catalog" id="07a22636-0847-443f-8510-d1c10aec6bc3"><con:settings/><con:config service="FilterType" resourcePath="/api/{api_version}/metadata/filter" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And invoke the package catalog" id="436ba333-2b44-4d4a-adc7-688847704b53" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="TT-Mobile" value="${And again get the TT-Mobile token for package_catalog#hash_key}"/>
  &lt;con:entry key="Accept" value="application/json"/>
  &lt;con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v3/metadata/filter</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="3d4990d0-03f4-483c-a160-1478cd19b031" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="fc38b5b1-362c-44ef-901a-4ff36c3b1466" name="Verify package_catalog data"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

String filter_type = json_response_holder.filter_type;

assert(filter_type == "package_catalog");

String[] filter_titles = json_response_holder.filters.title;

assert("Type of Destination" in filter_titles);
assert("Categories" in filter_titles);
assert("Duration(days)" in filter_titles);
assert("Budget perperson (In Rs.)" in filter_titles);
assert("Hotel Star Rating" in filter_titles);
assert("Activities" in filter_titles);
assert("" in filter_titles);


int number_of_filters = filter_titles.size();

for(int i = 0; i &lt; number_of_filters;i++){

if(filter_titles[i] == "Type of Destination"){
	String[] option_title = json_response_holder.filters.options[i].title;
	int number_of_options = option_title.size();
	assert(number_of_options == 2);
	assert("India" in option_title);
	assert("International" in option_title);
}
else if(filter_titles[i] == "Categories"){
	String[] option_title = json_response_holder.filters.options[i].title;
	int number_of_options = option_title.size();
	assert(number_of_options == 2);
	assert("Honeymoon" in option_title);
	assert("Family" in option_title);
}
else if(filter_titles[i] == "Duration(days)"){
	String[] option_title = json_response_holder.filters.options[i].title;
	int number_of_options = option_title.size();
	assert(number_of_options == 5);
	assert("1-3" in option_title);
	assert("4-6" in option_title);
	assert("7-9" in option_title);
	assert("10-12" in option_title);
	assert(">12" in option_title);
	
}
else if(filter_titles[i] == "Budget perperson (In Rs.)"){
	String[] option_title = json_response_holder.filters.options[i].title;
	int number_of_options = option_title.size();
	assert(number_of_options == 8);
	assert("Below 10,000" in option_title);
	assert("10,000 - 20,000" in option_title);
	assert("20,000 - 40,000" in option_title);
	assert("40,000 - 60,000" in option_title);
	assert("60,000 - 80,000" in option_title);
	assert("80,000 - 1 Lac" in option_title);
	assert("1 Lac - 2 Lac" in option_title);
	assert("Above 2 Lac" in option_title);
}
else if(filter_titles[i] == "Hotel Star Rating"){
	String[] option_title = json_response_holder.filters.options[i].title;
	int number_of_options = option_title.size();
	assert(number_of_options == 4);
	assert("5 Star" in option_title);
	assert("4 Star" in option_title);
	assert("3 Star" in option_title);
	assert("2 Star" in option_title);

}
else if(filter_titles[i] == "Activities"){
	String[] option_title = json_response_holder.filters.options[i].title;
	int number_of_options = option_title.size();
	assert(number_of_options == 5);
	assert("Adventure" in option_title);
	assert("Nature" in option_title);
	assert("Hill Station" in option_title);
	assert("Religious" in option_title);
	assert("Water Activities" in option_title);

}
else if(filter_titles[i] == ""){
	String[] option_title = json_response_holder.filters.options[i].title;
	String filter_name = json_response_holder.filters.param_name[i];
	assert(filter_name == "sort_by");
	
	int number_of_options = option_title.size();
	assert(number_of_options == 5);
	assert("Popularity" in option_title);
	assert("Price: Low To High" in option_title);
	assert("Price: High To Low" in option_title);
	assert("Duration: Low To High" in option_title);
	assert("Duration: High To Low" in option_title);

}

	
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="filter_type" value="package_catalog"/>
  <con:entry key="api_version" value="v3"/>
  <con:entry key="security_auth_token" value=""/>
</con:parameters><con:parameterOrder><con:entry>api_version</con:entry><con:entry>filter_type</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="Again get the TT-MObile token for destination_catalog" id="f36190c1-bdc7-4bb0-8787-9ba192c9be94"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>http://${#Project#traveler_apiendpoint}/api/v3/metadata/filter?filter_type=destination_catalog</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>r2Iq3XMcz61F5/9fICbWOCj1+pNY6jrQvg9U7vbqXy0=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="And also invoke the destination catalog" id="d3e727e9-f7e9-4d98-8a0a-57c42054a716"><con:settings/><con:config service="FilterType" resourcePath="/api/{api_version}/metadata/filter" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And also invoke the destination catalog" id="436ba333-2b44-4d4a-adc7-688847704b53" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="TT-Mobile" value="${Again get the TT-MObile token for destination_catalog#hash_key}"/>
  &lt;con:entry key="Accept" value="application/json"/>
  &lt;con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v3/metadata/filter</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="bab5f0bc-75e9-4391-9b1d-1049503ea8c0" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="d99d3722-3308-4dd1-a945-bf997fc5d953" name="Verify destimation catalog data"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

String filter_type = json_response_holder.filter_type;
assert(filter_type == "destination_catalog");

String[] filter_titles = json_response_holder.filters.title;

int filter_count = filter_titles.size();
assert(filter_count != 0);

assert("Destination type" in filter_titles);

assert("Month of travel" in filter_titles);

assert("Activities" in filter_titles);

assert("Duration(days)" in filter_titles);

assert("Budget (per person)" in filter_titles);

assert("" in filter_titles);</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="filter_type" value="destination_catalog"/>
  <con:entry key="api_version" value="v3"/>
  <con:entry key="security_auth_token" value=""/>
</con:parameters><con:parameterOrder><con:entry>api_version</con:entry><con:entry>filter_type</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="443a1d8a-5ee5-4957-86ba-237b43c1fc4e" name="UserProfileAndAccount"><con:settings/><con:savedRecentRuns>1</con:savedRecentRuns><con:runType>SEQUENTIAL</con:runType><con:testCase id="5ab66c45-5d18-4dcb-8819-795ff4a3c798" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User_LoggedIn_To_TT_With_CorrectCredentials" searchProperties="true"><con:settings/><con:savedRecentRuns>1</con:savedRecentRuns><con:testStep type="calltestcase" name="Given user gets the hash key" id="a312f009-b295-493d-a53c-e260ac7319f0"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/users/sign_in</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>post</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>GR486AYqjPUnYu76T+mzDogFbAgwY7Rz90tp9bQbIjs=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user logged in successfully with correct credentials" id="0e1675e5-97d4-454a-b905-87c616add1bc"><con:settings/><con:config service="SIGNIN" methodName="Method 1" resourcePath="/users/sign_in" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user logged in successfully with correct credentials" id="55632a5e-ad0a-4e8b-ae12-9dd447c981db" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="${Given user gets the hash key#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="TT-Mobile-Post" value="${#Project#user_email}"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
</xml-fragment>]]></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"login_type":"json","user":{"email":"${#Project#user_email}","password":"${#Project#user_password}"}}</con:request><con:originalUri>http://traveler-api.ttdev.in/users/sign_in</con:originalUri><con:assertion type="Simple Contains" id="3c794e95-ea7c-457e-971f-f30d9110fc59" name="EmailExistsInResponse"><con:configuration><token>${#Project#user_email}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="dcd47f93-5282-4b7f-a6bf-743b2a7e0455" name="success status is true"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8ca175ae-cf19-4e41-b512-9690eebb3082" name="Get user details"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

String user_id = json_response_holder.current_user.id.toString();

String auth_key = json_response_holder.current_user.pubnub_auth.auth_key;

messageExchange.modelItem.testCase.setPropertyValue("user_id",user_id);

messageExchange.modelItem.testCase.setPropertyValue("auth_key",auth_key);</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="e7d7bd92-1d43-400b-8111-eca1329e2326" name="Get the response cookie"><con:configuration><scriptText>for(String cookie in messageExchange.getResponseHeaders()["Set-Cookie"]){
	if(cookie.contains("_trips3m_session")){
		messageExchange.modelItem.testCase.setPropertyValue("Cookie",cookie);
		messageExchange.modelItem.testCase.testSuite.setPropertyValue("Cookie",cookie);
	}
}</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="Again user get the hash key" id="13724300-9a2b-4709-b9d8-40f223c2db59"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/app_config.json?user_id=${#TestCase#user_id}</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>ox011eEu0DMfX4VTMNZ5/oSGGGSsNBFbj5wdkfcIVVw=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="And App config is loaded successfully for a user" id="34c19dcb-6898-4195-8ec6-c335b0057e64"><con:settings/><con:config service="AppConfig" resourcePath="/api/{api_version}/app_config.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And App config is loaded successfully for a user" id="8102f3b4-c7de-4700-a705-9a8e6737f51b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="TT-Mobile" value="${Again user get the hash key#hash_key}"/>
  &lt;con:entry key="User-Agent" value="${#Project#user_agent}"/>
  &lt;con:entry key="Accept" value="application/json"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/app_config.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="ab82efe1-d321-49e2-9874-fc8d1baeec24" name="HTTP Status - 200"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="user_id" value="${#TestCase#user_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>user_id</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>user_id</con:name><con:value>953268</con:value></con:property><con:property><con:name>auth_key</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">75c78998026011e7904f06304046af90</con:value></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTFlNTQwZmM2ZjYyNjM0N2I3NjJhMGI2ODIxMTdkZDE3BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRVVDZUSmpMeTdYOTZsVThCQ1o2MG11BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--a060ba3b1e7e2d1eda2662af3aa80ebde38494de; path=/; HttpOnly</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase id="0e255d9d-5360-41c4-acdf-df9417904836" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User_NotLoggedIn_With_InCorrectCredentials" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Given user gets the hash key" id="af11ad44-cb99-4797-89cd-e0bf3dec411d"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>post</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>GR486AYqjPUnYu76T+mzDogFbAgwY7Rz90tp9bQbIjs=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user not logged in if password is incorrect" id="199a53a1-33d7-4133-80e6-da483d24b331"><con:settings/><con:config service="SIGNIN" methodName="Method 1" resourcePath="/users/sign_in" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user not logged in if password is incorrect" id="55632a5e-ad0a-4e8b-ae12-9dd447c981db" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="${Given user gets the hash key#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="TT-Mobile-Post" value="${#Project#user_email}"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
</xml-fragment>]]></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"login_type":"json","user":{"email":"${#Project#user_email}","password":"incorrectpassword"}}</con:request><con:originalUri>http://traveler-api.ttdev.in/users/sign_in</con:originalUri><con:assertion type="Simple Contains" id="3c794e95-ea7c-457e-971f-f30d9110fc59" name="error in response"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="dcd47f93-5282-4b7f-a6bf-743b2a7e0455" name="error message validation"><con:configuration><token>Invalid email or password.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="And user not logged in if username is incorrect" id="206f70f0-96ce-414c-8ebb-ca6e4a7ca1b1"><con:settings/><con:config service="SIGNIN" methodName="Method 1" resourcePath="/users/sign_in" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And user not logged in if username is incorrect" id="55632a5e-ad0a-4e8b-ae12-9dd447c981db" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="${Given user gets the hash key#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="TT-Mobile-Post" value="${#Project#user_email}"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
</xml-fragment>]]></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"login_type":"json","user":{"email":"incorrectemail@mailinator.com","password":"${#Project#user_password}"}}</con:request><con:originalUri>http://traveler-api.ttdev.in/users/sign_in</con:originalUri><con:assertion type="Simple Contains" id="3c794e95-ea7c-457e-971f-f30d9110fc59" name="error in response"><con:configuration><token>error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="dcd47f93-5282-4b7f-a6bf-743b2a7e0455" name="error message validation"><con:configuration><token>Invalid email or password</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>user_id</con:name><con:value>251180</con:value></con:property><con:property><con:name>auth_key</con:name><con:value>2dbd3c985d5011e697ad0a213af2e147</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase id="deabf5ec-49ea-4267-8d1f-d8c63215b89a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User_LoggedOut_Successfully" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Given user login to app" id="f21db895-3dee-414e-89dd-e00a57c4f7bb"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5ab66c45-5d18-4dcb-8819-795ff4a3c798</con:targetTestCase><con:properties><con:property><con:name>user_id</con:name><con:value>953268</con:value></con:property><con:property><con:name>auth_key</con:name></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWZlMzBlMDUxZTNhY2Q2ZmI1YjAxZjdlNDcxMTRjMTFhBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRwcDFxcWR4Lk10c1h2Y1NjRmNNWDkuBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--c69a1a0dad306789d767aa1560fc1e9b55f43477; path=/; HttpOnly</con:value></con:property></con:properties><con:returnProperties><con:entry>user_id</con:entry><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="And get the TT-Mobile token for logout" id="861c919a-f439-4299-951a-3405b2fff2ce"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/users/sign_out?logout_type=json</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>CZQT4GP/RkZ4+JWWvqFrS0QuP6u3RaVnJfowCNtPZPU=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user just Logged Out" id="0e777f02-be47-4f41-aa71-8fca5590ed0c"><con:settings/><con:config service="SignOut" resourcePath="/users/sign_out" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user just Logged Out" id="a74304c6-ae88-4acd-8fe5-4419af193deb" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to app#Cookie}"/>
  <con:entry key="TT-Mobile" value="${And get the TT-Mobile token for logout#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/users/sign_out</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="ba4778ef-d417-4a81-99b0-38ee7575f576" name="HTTP Status - 200"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="31127733-a7aa-477b-8f4d-f52208ba35d2" name="success"><con:configuration><token>success</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9f19524f-ef61-4a73-ac49-99c44e77ac0e" name="true"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>user_id</con:name><con:value>251180</con:value></con:property><con:property><con:name>auth_key</con:name><con:value>2dbd3c985d5011e697ad0a213af2e147</con:value></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7B0kiD3Nlc3Npb25faWQGOgZFVEkiJTY1YmI3YjU1ODY3ZjY4ZGVmYTczZWI3YTUwOTYxOTQ5BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--774be2df43dcfa877aa5c85c7ae28182ad7736f6; path=/; HttpOnly</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase id="dc3f7c93-a697-40cd-9132-6d3aa4c3adda" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User_Forgot_Password" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Given user generate TT-Mobile token for Forgot password" id="bde51a5a-8831-4174-928e-813bb51358c5"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/users/password</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>post</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>GR486AYqjPUnYu76T+mzDogFbAgwY7Rz90tp9bQbIjs=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="When user select forgot password then request gets created" id="b45bae47-fde6-4f37-a129-afbf7b05e258"><con:settings/><con:config service="ForgotPassword" resourcePath="/users/password" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="When user select forgot password then request gets created" id="11e717d5-eb1d-4bb8-b4c0-0cde719f798d" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="${Given user generate TT-Mobile token for Forgot password#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"user":{"email":"${#Project#user_email}"}}</con:request><con:originalUri>http://traveler-api.ttdev.in/users/password</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="9ae7d300-3385-4fc2-8750-7c09f6c21d7a" name="HTTP Status - 201 Created!"><con:settings/><con:configuration><codes>201</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase id="fcb50d9a-0a9b-4d4b-a4d6-ddd8f2590462" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User_Explore_All_Bookings" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Given user login to application" id="1084e9ec-5c22-4384-82e9-33443d7a5543"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5ab66c45-5d18-4dcb-8819-795ff4a3c798</con:targetTestCase><con:properties><con:property><con:name>user_id</con:name><con:value>953268</con:value></con:property><con:property><con:name>auth_key</con:name></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWI0OWFiMmFhZjkyMGMzNjM3M2IyNjA4NWJjZmVlZGFlBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRwcDFxcWR4Lk10c1h2Y1NjRmNNWDkuBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--9dc5f9e7971473beb6dbee31776d17643a64462b; path=/; HttpOnly</con:value></con:property></con:properties><con:returnProperties><con:entry>user_id</con:entry><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="When user get the TT-Mobile token to view bookings" id="2f48802f-5399-4df1-848d-4d5754959ca5"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/all_trips_user.json?all_trip_data=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>4vUXcxcdfPE+QsdO6ANcxuRCd+fz/Pc9TtMFC0fuNlA=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user can view all booking done" id="6fa422c8-76df-4827-981e-efb030162698"><con:settings/><con:config service="User_Bookings" resourcePath="/api/{api_version}/requested_trips/all_trips_user.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user can view all booking done" id="27764431-8f4d-4173-a9f6-7289f6b5195c" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${When user get the TT-Mobile token to view bookings#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://null///api/v2/requested_trips/all_trips_user.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7c0fe8a6-efd2-401b-a741-0a6b2c0e0461" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="99160cbe-74f3-4a35-a76b-2321aaa47d18" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

int destination_count = json_response_holder.id.size();

for(int i = 0; i&lt;destination_count;i++){
	ArrayList&lt;String> allnodes = new ArrayList&lt;String>();
	json_response_holder.trip_data[i].each{
		allnodes.add(it.getKey());
	}
	assert("adult" in allnodes);
	assert("budget" in allnodes);
	assert("child" in allnodes);
	assert("currency" in allnodes);
	assert("start_date" in allnodes);
	assert("status" in allnodes);
	assert("to_loc" in allnodes);
	assert("trip_days" in allnodes);

}
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="api_version" value="v2" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase id="cb9331f2-2ca5-4abe-b3d6-ebe73b8081a9" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="User_Request_A_CallBack" searchProperties="true" maxResults="0"><con:settings/><con:savedRecentRuns>1</con:savedRecentRuns><con:testStep type="calltestcase" name="Given user gets the TT-Mobile for callback request" id="c8426cf3-8108-4be1-9288-47848c5b0504"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/feedbacks</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>post</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>GR486AYqjPUnYu76T+mzDogFbAgwY7Rz90tp9bQbIjs=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user request a call back" id="20dfc1db-7b8f-489b-b469-cc6628ae9c7f"><con:settings/><con:config service="Request Call Back" resourcePath="/api/{api_version}/feedbacks" methodName="Feedbacks" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user request a call back" id="3fcc57cd-0572-43c9-95b9-63b9a6f9a8a7" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${#TestSuite#Cookie}"/>
  <con:entry key="TT-Mobile" value="${Given user gets the TT-Mobile for callback request#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"body":"ph no - +918415236574","email":"${#Project#user_email}","name":"test","time":"2016-09-21T14:59:15+0530","type":"request_on_call"}</con:request><con:originalUri>http://traveler-api.ttdev.in/api/v2/feedbacks</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b8149e7e-bc4a-4cf4-921c-c11aa66aaed3" name="HTTP Status 201 - Created!"><con:settings/><con:configuration><codes>201</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="api_version" value="v2" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>c8426cf3-8108-4be1-9288-47848c5b0504</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="82f4979b-de8e-4137-bafb-2239c035324a" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="User_Checks_App_Update" searchProperties="true" maxResults="0"><con:settings/><con:savedRecentRuns>1</con:savedRecentRuns><con:testStep type="calltestcase" name="Given user gets TT-Mobile to check app update" id="749c87ee-dfe9-4ff2-83fe-18d9b38734b8"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/check_app_update?app_ver=${#Project#appversion}</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>ZsHYwQuGUaWRzbGoXTODTRsnvN7cDAE4qVu3EUyIwGI=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user checks the app updates" id="1acacec6-308f-4eab-b503-e2b400e21eba"><con:settings/><con:config service="CheckAppUpdate" resourcePath="/api/{apiversion}/check_app_update" methodName="Check_app_update" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user checks the app updates" id="19955781-fbae-4bb8-928f-9908fa4b5206" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="${Given user gets TT-Mobile to check app update#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v1/check_app_update</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="58a06503-7f13-4dd8-a76d-7955fc566975" name="HTTP Status - 200"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="app_ver" value="${#Project#appversion}"/>
  <con:entry key="apiversion" value="v1"/>
</con:parameters><con:parameterOrder><con:entry>apiversion</con:entry><con:entry>app_ver</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>749c87ee-dfe9-4ff2-83fe-18d9b38734b8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="5ea54979-dc28-465b-8aa1-76eb7747c744" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="User_SignUp_To_Application" searchProperties="true" maxResults="0"><con:settings/><con:savedRecentRuns>1</con:savedRecentRuns><con:testStep type="calltestcase" name="Given user gets TT-Mobile for Sign UP" id="feccc9f5-f627-444b-8b20-6f0e17a358d4"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/users</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>post</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>GR486AYqjPUnYu76T+mzDogFbAgwY7Rz90tp9bQbIjs=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="groovy" name="And get the unique email for sign up" id="3564ac9e-74c4-4eda-bdfc-ee9d65146e7b"><con:settings/><con:config><script>String uniqueemail = "tttest" + String.valueOf(System.currentTimeMillis()) + "@mailinator.com";
String uniemailencoded = uniqueemail.replace("@","%40");
testRunner.testCase.setPropertyValue("uniemailencoded", uniemailencoded);
testRunner.testCase.setPropertyValue("uniqueemail", uniqueemail);
testRunner.testCase.setPropertyValue("uniquepassword", "1234567");</script></con:config></con:testStep><con:testStep type="restrequest" name="Then user sign up to application" id="b0455c69-0aec-4a44-8afa-fffd874e19b7"><con:settings/><con:config service="SignUp" resourcePath="/users" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user sign up to application" id="f63e32ed-4d44-43ee-b3c2-2d7a729aa444" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="${Given user gets TT-Mobile for Sign UP#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"commit":"Sign Up \u0026 Continue","user":{"confirmPassword":"${#TestCase#uniquepassword}","email":"${#TestCase#uniqueemail}","name":"testautomation","password":"${#TestCase#uniquepassword}","role_ids":["5"],"tnc":"1"}}</con:request><con:originalUri>http://traveler-api.ttdev.in/users</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="110bcf4d-6d57-41dc-9401-134ad605ad05" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="db986c27-e781-4b6b-81c1-2b5b41712961" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

assert(json_response_holder.success == true) : response;

String redirect = json_response_holder.redirect;
assert(redirect == "/tour-packages");

String email = json_response_holder.current_user.email;
String email_passd = context.expand('${#TestCase#uniqueemail}').toLowerCase();
String first_name = json_response_holder.current_user.first_name;
assert(email == email_passd);
assert(first_name == "testautomation");

ArrayList allnodes = new ArrayList();
json_response_holder.current_user.each{
	allnodes.add(it.getKey());
}
assert("id" in allnodes);
assert("pic" in allnodes);
assert("phone_no" in allnodes);


json_response_holder.current_user.pubnub_auth.each{
	allnodes.add(it.getKey());
}
assert("auth_key" in allnodes);
assert("heartbeat" in allnodes);
assert("heartbeat_intervals" in allnodes);
assert("publish_key" in allnodes);
assert("subscribe_key" in allnodes);


</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="2a824bfa-27e1-4fcd-a86e-5c6e59fa18b9" name="Get response cookie"><con:configuration><scriptText>for(String cookie in messageExchange.getResponseHeaders()["Set-Cookie"]){
	if(cookie.contains("_trips3m_session")){
		messageExchange.modelItem.testCase.setPropertyValue("Cookie",cookie);
	}
}</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="And when user get TT-Mobile for change password" id="dbdf0b93-919a-459f-bee9-d8b85edea02a"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/reset_password</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>put</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>uG1NajqyLf34UgcknM9HdKdzcpBIRJM+HXmugMwsuio=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user changes the password" id="b0cb9f8e-f101-4474-8520-3a711c5dd247"><con:settings/><con:config service="ChangePassword" resourcePath="/users/password.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user changes the password" id="5a2ab76d-7f7c-4724-8d5f-d6cda52e0e15" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${#TestCase#Cookie}"/>
  <con:entry key="TT-Mobile" value="${And when user get TT-Mobile for change password#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"user":{"password":"abc123","password_confirmation":"abc123","current_password":"${#TestCase#uniquepassword}"}}</con:request><con:originalUri>http://traveler-api.ttdev.in/api/v1/reset_password</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="56627888-8f9e-40b2-87b4-8e381925ef60" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="faeb8f78-26b5-473b-9340-a71539cfc814" name="Success - true"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>uniqueemail</con:name><con:value>tttest1523264736642@mailinator.com</con:value></con:property><con:property><con:name>uniquepassword</con:name><con:value>1234567</con:value></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CUkiD3Nlc3Npb25faWQGOgZFVEkiJTU2Yzg2ODM0YTIwZmI5ZDFhNzBmMWVhYmZmMDMzNzZkBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA4NgGiIiJDJhJDEwJENzY1EzNldXSS9naVBiTjBpY0dISnVJIgpmbGFzaAY7AFRvOiVBY3Rpb25EaXNwYXRjaDo6Rmxhc2g6OkZsYXNoSGFzaAk6CkB1c2VkbzoIU2V0BjoKQGhhc2h9AEY6DEBjbG9zZWRGOg1AZmxhc2hlc3sGOgtub3RpY2VJInNZb3UgaGF2ZSBzaWduZWQgdXAgc3VjY2Vzc2Z1bGx5LiBJZiBlbmFibGVkLCBhIGNvbmZpcm1hdGlvbiBtYWlsIHdpbGwgYmUgc2VudCB0byB5b3VyIHByb3ZpZGVkIGUtbWFpbCBhZGRyZXNzLgY7AFQ6CUBub3cw--c6254a9499edf9739bb74d72c88d219d4bd51494; path=/; HttpOnly</con:value></con:property><con:property><con:name>uniemailencoded</con:name><con:value>tttest1523264736642%40mailinator.com</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>feccc9f5-f627-444b-8b20-6f0e17a358d4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3564ac9e-74c4-4eda-bdfc-ee9d65146e7b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dbdf0b93-919a-459f-bee9-d8b85edea02a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b0cb9f8e-f101-4474-8520-3a711c5dd247</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="9032b71d-9389-4f09-8381-f9dec26b07f1" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Agent_User_LoggedIn_To_TT_With_CorrectCredentials" searchProperties="true"><con:settings/><con:savedRecentRuns>1</con:savedRecentRuns><con:testStep type="calltestcase" name="Given user gets the hash key" id="2a42b76a-136e-4c11-9ea9-050e9c482d19"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#agent_user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>post</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>moebPtN2nZl9eM39PpWrKKv70v5s0VEQ/wk0h1VNY48=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user logged in successfully with correct credentials" id="8a3fad78-c76f-4f63-89d5-c01f6ba0e86a"><con:settings/><con:config service="SIGNIN" methodName="Method 1" resourcePath="/users/sign_in" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user logged in successfully with correct credentials" id="55632a5e-ad0a-4e8b-ae12-9dd447c981db" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="${Given user gets the hash key#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="TT-Mobile-Post" value="${#Project#user_email}"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
</xml-fragment>]]></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"login_type":"json","user":{"email":"${#Project#agent_user_email}","password":"${#Project#agent_user_password}"}}</con:request><con:originalUri>http://traveler-api.ttdev.in/users/sign_in</con:originalUri><con:assertion type="Simple Contains" id="3c794e95-ea7c-457e-971f-f30d9110fc59" name="EmailExistsInResponse"><con:configuration><token>${#Project#agent_user_email}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="dcd47f93-5282-4b7f-a6bf-743b2a7e0455" name="success status is true"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8ca175ae-cf19-4e41-b512-9690eebb3082" name="Get user details"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

String user_id = json_response_holder.current_user.id.toString();

String auth_key = json_response_holder.current_user.pubnub_auth.auth_key;

messageExchange.modelItem.testCase.setPropertyValue("user_id",user_id);

messageExchange.modelItem.testCase.setPropertyValue("auth_key",auth_key);</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="e7d7bd92-1d43-400b-8111-eca1329e2326" name="Get the response cookie"><con:configuration><scriptText>for(String cookie in messageExchange.getResponseHeaders()["Set-Cookie"]){
	if(cookie.contains("_trips3m_session")){
		messageExchange.modelItem.testCase.setPropertyValue("Cookie",cookie);
	}
}</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="Again user get the hash key" id="140b54d4-22f1-464e-9491-d0f52587ac81"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/app_config.json?user_id=${#TestCase#user_id}</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#agent_user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>5PYp5CrEqzbOE0xbo9lEdKYx49ABrdaPsw+ipbDA5Vs=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="And App config is loaded successfully for a user" id="888400e0-7372-4077-8fe3-7304fca97cd8"><con:settings/><con:config service="AppConfig" resourcePath="/api/{api_version}/app_config.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And App config is loaded successfully for a user" id="8102f3b4-c7de-4700-a705-9a8e6737f51b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="TT-Mobile" value="${Again user get the hash key#hash_key}"/>
  &lt;con:entry key="User-Agent" value="${#Project#user_agent}"/>
  &lt;con:entry key="Accept" value="application/json"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/app_config.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="ab82efe1-d321-49e2-9874-fc8d1baeec24" name="HTTP Status - 200"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="user_id" value="${#TestCase#user_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>user_id</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>user_id</con:name><con:value>759117</con:value></con:property><con:property><con:name>auth_key</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">c5209aa8aa7b11e68ada0e2443afcf25</con:value></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTJjYTA3MDEwZTBjMzY5MWM0ZmMwOGUyZDc4ODY4N2Y3BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA02VC0kiIiQyYSQxMCRJa3hSLk02Sm9aYmhKZm9DTVZMZ0guBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--b5646d4b64bede7aaabf34de1ea223ae3a4ab72a; path=/; HttpOnly</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase id="67e7e418-8cca-4c1e-abab-7049529c68de" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Admin_User_LoggedIn_To_TT_With_CorrectCredentials" searchProperties="true"><con:settings/><con:savedRecentRuns>1</con:savedRecentRuns><con:testStep type="calltestcase" name="Given user gets the hash key" id="d6222aac-d5ab-4811-80aa-b34e40f1bae0"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/users/sign_in</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#admin_user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>post</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>CLtif+rkGPg3AQIXO2F9T1l5DcAktw7ZX7tOWWv0ZS8=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user logged in successfully with correct credentials" id="9dc86dcb-de35-4ab6-8e88-440e0de1d204"><con:settings/><con:config service="SIGNIN" methodName="Method 1" resourcePath="/users/sign_in" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user logged in successfully with correct credentials" id="55632a5e-ad0a-4e8b-ae12-9dd447c981db" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="${Given user gets the hash key#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="TT-Mobile-Post" value="${#Project#user_email}"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
</xml-fragment>]]></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"login_type":"json","user":{"email":"${#Project#admin_user_email}","password":"${#Project#admin_user_password}"}}</con:request><con:originalUri>http://traveler-api.ttdev.in/users/sign_in</con:originalUri><con:assertion type="Simple Contains" id="3c794e95-ea7c-457e-971f-f30d9110fc59" name="EmailExistsInResponse"><con:configuration><token>${#Project#admin_user_email}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="dcd47f93-5282-4b7f-a6bf-743b2a7e0455" name="success status is true"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8ca175ae-cf19-4e41-b512-9690eebb3082" name="Get user details"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

String user_id = json_response_holder.current_user.id.toString();

String auth_key = json_response_holder.current_user.pubnub_auth.auth_key;

messageExchange.modelItem.testCase.setPropertyValue("user_id",user_id);

messageExchange.modelItem.testCase.setPropertyValue("auth_key",auth_key);</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="e7d7bd92-1d43-400b-8111-eca1329e2326" name="Get the response cookie"><con:configuration><scriptText>for(String cookie in messageExchange.getResponseHeaders()["Set-Cookie"]){
	if(cookie.contains("_trips3m_session")){
		messageExchange.modelItem.testCase.setPropertyValue("Cookie",cookie);
	}
}</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="Again user get the hash key" id="13c559ef-70cb-48f2-a92d-e80726b67eb8"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/app_config.json?user_id=${#TestCase#user_id}</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#admin_user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>Wrfs3NBkEwClVxu/G3b2i/v9GsliZf7DF4WF8DYIaYA=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="And App config is loaded successfully for a user" id="9107d9a9-40ad-4b04-b022-3874d012004e"><con:settings/><con:config service="AppConfig" resourcePath="/api/{api_version}/app_config.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And App config is loaded successfully for a user" id="8102f3b4-c7de-4700-a705-9a8e6737f51b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="TT-Mobile" value="${Again user get the hash key#hash_key}"/>
  &lt;con:entry key="User-Agent" value="${#Project#user_agent}"/>
  &lt;con:entry key="Accept" value="application/json"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/app_config.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="ab82efe1-d321-49e2-9874-fc8d1baeec24" name="HTTP Status - 200"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="user_id" value="${#TestCase#user_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>user_id</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>user_id</con:name><con:value>759118</con:value></con:property><con:property><con:name>auth_key</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">e3a117c23bc611e8b460064d670c296a</con:value></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWMyZWYxZjhmNTY2NTBiZGIyMTg2YWNmYjYxZmQ4ZGEyBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA06VC0kiIiQyYSQxMCRJWDBpRG9HLm5aSWRmR1ptbFNXRC9PBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--e67079c83564bcc99bd0f3931281985cca878cf9; path=/; HttpOnly</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase id="e08ed09b-9d67-4f8d-b9e8-8bba71bd335b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User_Change_Password" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Given user login to application" id="886c3a9d-bcae-4c37-a17f-16d9493875e1"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5ab66c45-5d18-4dcb-8819-795ff4a3c798</con:targetTestCase><con:properties><con:property><con:name>user_id</con:name><con:value>953268</con:value></con:property><con:property><con:name>auth_key</con:name><con:value>75c78998026011e7904f06304046af90</con:value></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWI2MGY1M2JjOGQxZDY1NzI4NjViNDQ5OTllYzY3MTk4BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRwcDFxcWR4Lk10c1h2Y1NjRmNNWDkuBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--a243bc5c3ff786d913979540f3ab8788a7a84b6a; path=/; HttpOnly</con:value></con:property></con:properties><con:returnProperties><con:entry>user_id</con:entry><con:entry>auth_key</con:entry><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="When User gets HashKey for Change Password" id="972e7a1f-7ca8-43c1-9f0a-b0cdce78c64b"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/users/password.json</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>PUT</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>6V6DfGNjq4yCR14Hvey5KO59A/4F6Kgvrlqh2ozB9w8=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then User Change Password" id="ce965d7a-33a4-4e6e-9a48-d4cde2821422"><con:settings/><con:config service="ChangePassword" resourcePath="/users/password.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then User Change Password" id="5a2ab76d-7f7c-4724-8d5f-d6cda52e0e15" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${When User gets HashKey for Change Password#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Connection" value="Keep-Alive"/>
  <con:entry key="Accept-Encoding" value="gzip"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"user":{"password":"${#Project#user_password}","password_confirmation":"${#Project#user_password}","current_password":"${#Project#user_password}"}}</con:request><con:originalUri>http://traveler-api.ttdev.in/api/v1/reset_password</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="23b3fd37-6f02-448d-a448-03821ec926d7" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="c674e6fa-5554-4ed8-bf24-99979551fa34" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);
String msg=json_response_holder.success;

assert(msg =="true")</scriptText></con:configuration></con:assertion><con:assertion type="Simple Contains" id="82d509c9-d525-4a3a-acf4-dec540563e6c" name="Contains"><con:configuration><token>${#TestCase#phone}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="e3e6b505-7a3e-415e-bd18-c4c8192a1bf0" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User_LoggedIn_Using_FB" searchProperties="true" disabled="true"><con:settings/><con:testStep type="calltestcase" name="Given User gets hashkey for Fb login" id="e5ec9611-586c-4157-91f5-30f87d19dcf0"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>http://${#Project#traveler_apiendpoint}/api/v5/auth/social/callback.json</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>POST</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>ZZI5TMWfUFaSWkk0CLP+vVTtvaRYj1+Jb4FsP33AmYQ=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then LoggedIn Using FB" id="ab5448d1-d0bb-45a9-8058-2af829c93d86"><con:settings/><con:config service="SocialSignIn" resourcePath="/api/v5/auth/social/callback.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then LoggedIn Using FB" id="a0128e96-2c35-4adf-81d8-e28bfa4fa9b5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="TT-Mobile" value="${Given User gets hashkey for Fb login#hash_key}"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="Connection" value="Keep-Alive"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>https://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{
  "auth_token": "EAABjHt0SzDMBAFNq3yfZAVqGjnZAxwbHzRgDx12EmEerehthqTKvkLpvZCFOO5HHZAJZAavrJCr1GPMOvwYRj3CUnjidHZC3Mx0ChJYTJRVICa5Jj8Ch6CFL8FDcANPRBZA2ewOwESOVHa6LcSlwofxYCGZAKJFGe4LZB2xuUdeSsZAwzjZA2BnZBbhRVPjbePGKKddDoGUO2NDb91zp02Dv2aZAKXEOp8IjId7uZAsU1ZCqbZBNktek9iyxOplZA",
  "credentials": {},
  "extra": {
    "raw_info": {
      "email": "usetesttravel@gmail.com",
      "first_name": "Lorem",
      "gender": "male",
      "id": "118111472062960",
      "last_name": "Singh",
      "name": "Lorem Singh"
    }
  },
  "info": {
    "email": "usetesttravel@gmail.com",
    "first_name": "Lorem",
    "image": "http://graph.facebook.com/118111472062960/picture?type=large",
    "last_name": "Singh",
    "name": "Lorem Singh"
  },
  "provider": "facebook",
  "uid": "118111472062960"
}</con:request><con:originalUri>https://master.ttdev.in/api/v5/auth/social/callback.json</con:originalUri><con:assertion type="Simple Contains" id="3bb7be56-4ea6-4ddd-9f56-7261707f2473" name="EmailExistsInResponse"><con:configuration><token>usetesttravel@gmail.com</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="3e09c4ed-b2ec-4901-b606-5777ddef698e" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="c7be5b41-a2f0-4b30-88bc-e2684528a544" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User_LoggedIn_Using_Google+" searchProperties="true" disabled="true"><con:settings/><con:testStep type="calltestcase" name="Given User gets hashkey for Fb login" id="313b1fbd-8688-4294-8769-6914cf02745d"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>http://${#Project#traveler_apiendpoint}/api/v5/auth/social/callback.json</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>POST</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>ZZI5TMWfUFaSWkk0CLP+vVTtvaRYj1+Jb4FsP33AmYQ=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then LoggedIn Using Google" id="6c46f6be-dd89-4e4f-96cc-03faad829d30"><con:settings/><con:config service="SocialSignIn" resourcePath="/api/v5/auth/social/callback.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then LoggedIn Using Google" id="a0128e96-2c35-4adf-81d8-e28bfa4fa9b5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="TT-Mobile" value="${Given User gets hashkey for Fb login#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="Connection" value="Keep-Alive"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>https://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"auth_token":"eyJhbGciOiJSUzI1NiIsImtpZCI6IjVjMjk5YzFhZWI3MGE4YzdiZmVjMDRjNGUxNmUwODAyMDE3ZTA2MDYifQ.eyJhenAiOiI3Mjk2OTI5MzQ2MzEtYzcwdGU0ZGdxb2V1bnBrOXA0aG1tZ2pxNmFtYzQ5ZDMuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJhdWQiOiI3Mjk2OTI5MzQ2MzEtNGFsZ2kydmNnc2oxZmg1dTcyYWZ0cGxjcGdtYWcydGkuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJzdWIiOiIxMDI5MjYwNDUzMjA2MjU4MzMxNzUiLCJlbWFpbCI6InVzZXRlc3R0cmF2ZWxAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImlzcyI6Imh0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbSIsImlhdCI6MTUwMDYzMjY5MSwiZXhwIjoxNTAwNjM2MjkxLCJuYW1lIjoiVGVzdCBUcmF2ZWwiLCJwaWN0dXJlIjoiaHR0cHM6Ly9saDMuZ29vZ2xldXNlcmNvbnRlbnQuY29tLy1kcFB1RlRFcUlSZy9BQUFBQUFBQUFBSS9BQUFBQUFBQUFBQS9BSTZ5R1h6Nm1Ca014dXdEa2VOdXVoMV9iZ1ZCaHo1X1B3L3M5Ni1jL3Bob3RvLmpwZyIsImdpdmVuX25hbWUiOiJUZXN0IiwiZmFtaWx5X25hbWUiOiJUcmF2ZWwiLCJsb2NhbGUiOiJlbiJ9.XTNkkbX99jDuoQubAF7tiHTaTWVRe35NG8uaY7ULMvITihiCe8EsTzaP6BxtseQbZUXPvy6Zq8i1VFkbOymfR6geNTBWRJtQCS8gvloigWu1otKo4-miAYx9_1BsxkYOMTDyHQ2KfCqqQvof4Xe1sL7mW49F32fXvuUhwCrebZPQryDAuWv2T5N_tyssH-8HYk3XE4M161bEhAIpT1NkcDI3fOxfdHQCg4e5-m4jK4qv51HKhTKZxxB0ZqVKp3rSe84hj1g_l3-MbY7JKJaWbt1TVi0J5CUGr5hYeWwT4O_E1eTd_s3pQwCcsTpGrq_3hATcxKqQQlqBOUp3Cz4pUw","credentials":{},"extra":{"raw_info":{"email":"usetesttravel@gmail.com","family_name":"Travel","name":"Test Travel","picture":"https://lh3.googleusercontent.com/-dpPuFTEqIRg/AAAAAAAAAAI/AAAAAAAAAAA/AI6yGXz6mBkMxuwDkeNuuh1_bgVBhz5_Pw/s96-c/photo.jpg"}},"info":{"email":"usetesttravel@gmail.com","first_name":"Test","image":"https://lh3.googleusercontent.com/-dpPuFTEqIRg/AAAAAAAAAAI/AAAAAAAAAAA/AI6yGXz6mBkMxuwDkeNuuh1_bgVBhz5_Pw/s96-c/photo.jpg","last_name":"Travel","name":"Test Travel"},"provider":"google_oauth2","uid":"102926045320625833175"}</con:request><con:originalUri>https://master.ttdev.in/api/v5/auth/social/callback.json</con:originalUri><con:assertion type="Simple Contains" id="3bb7be56-4ea6-4ddd-9f56-7261707f2473" name="EmailExistsInResponse"><con:configuration><token>usetesttravel@gmail.com</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="3e09c4ed-b2ec-4901-b606-5777ddef698e" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="d15ca161-55dc-4742-b91a-4142d4d4b0a4" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User_Update_Profile" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Given user login to application" id="623e85bf-f24c-45f7-a713-e01ddfb25aec"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5ab66c45-5d18-4dcb-8819-795ff4a3c798</con:targetTestCase><con:properties><con:property><con:name>user_id</con:name><con:value>953268</con:value></con:property><con:property><con:name>auth_key</con:name><con:value>75c78998026011e7904f06304046af90</con:value></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTdjYTExNWE3ZmJiMmJkYmQ3YjFmNDM0MThmNmUxMDM3BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRVVDZUSmpMeTdYOTZsVThCQ1o2MG11BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--83ef3cbdb3b4190c52f0bd3a0db802c67d483a98; path=/; HttpOnly</con:value></con:property></con:properties><con:returnProperties><con:entry>user_id</con:entry><con:entry>auth_key</con:entry><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="When user gets hashkey for Update profile" id="8b47b147-0eb6-4e42-af65-57f771bbed98"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}//users.json</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>PUT</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>6V6DfGNjq4yCR14Hvey5KO59A/4F6Kgvrlqh2ozB9w8=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script" id="8cc82406-ad6a-459b-8b9d-f748bca2773d"><con:settings/><con:config><script>import java.text.SimpleDateFormat;
import java.util.Random;

Long timeStamp = System.currentTimeMillis();

String number = String.valueOf(timeStamp%1000000000);
String phone = "+918" + String.valueOf(number);

testRunner.testCase.setPropertyValue("phone",phone);
log.info("Phone-- "+phone);</script></con:config></con:testStep><con:testStep type="restrequest" name="Then User Update Profile" id="1a9dd531-41d1-47db-871a-3fe648dff702"><con:settings/><con:config service="UpdateUserProfile" resourcePath="/users.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then User Update Profile" id="5bd081a2-0c53-42a8-8552-b877c4d371b8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${When user gets hashkey for Update profile#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Connection" value="Keep-Alive"/>
  <con:entry key="Accept-Encoding" value="gzip"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{
	"user": {
		"agent_reviews_converted_quotes": 0,
		"converted_trips": 0,
		"first_name": "Lorem Tt Test Ipsum",
		"gender": "female",
		"id": ${Given user login to application#user_id},
		"last_name": "G",
		"phone_no": "${#TestCase#phone}",
		"roles": []
	},
	"errors": {},
	"httpCode": 0,
	"message": "",
	"statusCode": 0
}</con:request><con:originalUri>https://master.ttdev.in/users.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="254c1a4c-9244-408a-9b7e-a116cd7b39b9" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="02558516-3dd8-4a54-a3c3-c43e20eb00c6" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);
String success_msg=json_response_holder.success;
assert(success_msg =="true")</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>phone</con:name><con:value>+918264742566</con:value></con:property></con:properties></con:testCase><con:properties><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTFlNTQwZmM2ZjYyNjM0N2I3NjJhMGI2ODIxMTdkZDE3BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRVVDZUSmpMeTdYOTZsVThCQ1o2MG11BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--a060ba3b1e7e2d1eda2662af3aa80ebde38494de; path=/; HttpOnly</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite id="55d1a32b-2205-44d2-be30-11598b75a47b" name="Explore_The_App"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="47175fee-a1e3-4650-bc6a-2f23d7e50ba6" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User_Browse_EXPLORE_Tabs" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Given user gets the TT-Mobile hash key" id="a93ac3e4-31e4-41fa-84d0-e29031423242"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/app_config.json</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>ot2VTZeNakDJQPOTKnzeGAlJNCaKNTmEOpD/gxl0vNY=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="And user initializes an app and config is loaded" id="dd9f4c15-5966-4def-8cdc-40bcd4cea604"><con:settings/><con:config service="AppConfig" resourcePath="/api/{api_version}/app_config.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And user initializes an app and config is loaded" id="8102f3b4-c7de-4700-a705-9a8e6737f51b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="${Given user gets the TT-Mobile hash key#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/app_config.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b83965ec-e39d-47a3-be60-5ad8cc7f9894" name="HTTP Status - 200"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="e565bd59-0945-45bb-a01d-ed4d4d0940ed" name="Verify The Nodes In response"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def is_coupon_enabled = json_response_holder.is_coupon_enabled;
def is_referer_enabled = json_response_holder.is_referer_enabled;
def isFabMenuEnabled = json_response_holder.isFabMenuEnabled;
def referral_text = json_response_holder.referral_text;
def helpline = json_response_holder.helpline;
def discount_text = json_response_holder.discount_text;

// verify all node is present, with any value.
assert(is_coupon_enabled != null) : "is_coupon_enabled node is not present";
assert(is_referer_enabled != null) : "is_referer_enabled node is not present";
assert(isFabMenuEnabled != null) : "isFabMenuEnabled node is not present";
assert(referral_text != null) : "referral_text node is not present";
assert(helpline != null) : "helpline node is not present";
assert(discount_text != null) : "discount_text node is not present";
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="user_id" value=""/>
  <con:entry key="api_version" value="${#Project#api_version}"/>
</con:parameters><con:parameterOrder><con:entry>user_id</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="When user again get the TT-Mobile token for all_categories" id="e62c51b1-6e1d-4aa7-a55b-1edf2bec4b20"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/trip_types/all_categories.json</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>fQEP1DABdTWO7HLxYVV8YATFoTNXtu3OAgo/ynB4ZeA=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="And user navigate to all categories" id="6f106587-0109-49a5-b3a5-6269bea25564"><con:settings/><con:config service="ALL_CATEGORIES" resourcePath="/api/{api_version}/trip_types/all_categories.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And user navigate to all categories" id="e77b538c-145b-4012-9b1a-22cc4b8d040d" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="${When user again get the TT-Mobile token for all_categories#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v1/trip_types/all_categories.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="ce0eeb5d-adcf-4b46-90e5-3cd9dacac21b" name="HTTP Status - 200"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Then user can view all categories with valid data" id="89029789-e01b-4d69-804d-22f439d584b2"><con:settings/><con:config><script>import groovy.json.JsonSlurper;
String response = context.expand('${And user navigate to all categories#Response}');

def json_response_holder = new JsonSlurper().parseText(response);

def all_agents = json_response_holder.agents;
def all_destinationcount_foreachcategory = json_response_holder.destination_count;
def all_ids = json_response_holder.id;
def all_category_names = json_response_holder.name;

//verify that category count is not zero.

int category_count = all_category_names.size();
assert(category_count != 0) : "No Catgory fetched.";

// Verify if all the expected nodes are present for each category.

for(int i = 0;i&lt;category_count;i++){
	def agent = json_response_holder.agents[i];
	def destination_count = json_response_holder.destination_count[i];
	def id = json_response_holder.id[i];
	//def cloud_images_id = json_response_holder.cloud_images[i].id[0];
	//def cloud_images_largeimageurl = json_response_holder.cloud_images[i].large_image_url[0];
	
	assert(agent != null): "agent node is not present for " + i + " number category";
	assert(destination_count != null) : "destination_count node is not present for " + i + " number category";
	assert(id != null) : "id node is not present for " + i + " number category";
	//assert(cloud_images_id != null) : "cloud_images_id node is not present for " + i + " number category";
	//assert(cloud_images_largeimageurl != null) : "cloud_images_largeimageurl node is not present for " + i + " number category";
}
</script></con:config></con:testStep><con:testStep type="calltestcase" name="When user get the TT-Mobile token for All_themes" id="ac80b8db-272c-434d-a9b1-3a4318123bf1"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/themes/all_themes.json</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>xDFCV5tI/oQLpUqBhPOsmizG11YkymexicuMM03cvyo=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="And user navigate to all themes" id="7d2e8a91-748c-4b33-bfcb-fbeaaddc9292"><con:settings/><con:config service="ALL_THEMES" resourcePath="/api/{api_version}/themes/all_themes.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And user navigate to all themes" id="46d28c9a-9d2c-449a-8e05-13548d907d93" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="${When user get the TT-Mobile token for All_themes#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v1/themes/all_themes.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="0ad08b87-f307-46eb-9cf5-d6721af79545" name="HTTP Status - 200"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="api_version" value="v1" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Then user can view all themes with valid data" id="d6152404-b0ce-4b30-8532-43f6edb14ad5"><con:settings/><con:config><script>import groovy.json.JsonSlurper;
String response = context.expand('${And user navigate to all themes#Response}');

def json_response_holder = new JsonSlurper().parseText(response);

def all_ids =  json_response_holder.id;
def all_largeimageurls = json_response_holder.large_image;
def all_theme_names = json_response_holder.name;

//verify that themes count should not be ZERO.
int themes_count = all_ids.size();
assert(themes_count != 0) : "No Themes could be fetched.";

//Verify all expected nodes are there for each theme.

for(int i = 0;i&lt;themes_count;i++){
	def theme_id = json_response_holder.id[i];
	def large_image_urls = json_response_holder.large_image[i];
	def theme_name = json_response_holder.name[i];

	assert(theme_id != null) : "id node is not present for " + i + " number theme.";
	assert(large_image_urls != null) : "large_image_urls node is not present for " + i + " number theme.";
	assert(theme_name != null) : "theme_name node is not present for " + i + " number theme.";
}
</script></con:config></con:testStep><con:testStep type="calltestcase" name="When user gets TT-Mobile token for destinations" id="7a8c122f-c64f-43ff-8557-9a9774226617"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v4/get_filtered_results?page_number=1&amp;result_type=destination_catalog&amp;per_page=50</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>fX5RXOA5NQkqX7/+De83Ek3aiYwLulIW/S6/BVG2XK0=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="And user navigate to destination tab" id="c619cbb2-f7dc-4b3c-85ff-1e3c73ef13e2"><con:settings/><con:config service="Destination_Catalog" resourcePath="/api/{api_version}/get_filtered_results" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And user navigate to destination tab" id="335f69a5-f903-4dfd-b738-dbe4ef64bc03" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="${When user gets TT-Mobile token for destinations#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v4/get_filtered_results</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e4461dd4-01ce-4096-8262-53c827c5fcc1" name="HTTP Status - 200"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="per_page" value="50"/>
  <con:entry key="page_number" value="1"/>
  <con:entry key="api_version" value="v4"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Then user can view the destinations" id="a8fcaa8d-9288-4edf-a148-f9425ab326aa"><con:settings/><con:config><script>import groovy.json.JsonSlurper;
String response = context.expand('${And user navigate to destination tab#Response}');

def json_response_holder = new JsonSlurper().parseText(response);

String result_type = json_response_holder.result_type;
assert(result_type == "destination_catalog");

def all_ids_for_destination = json_response_holder.destinations.id;




// verify the total destinations displayed in a  page.
int total_destinations_per_page = all_ids_for_destination.size();
assert(total_destinations_per_page &lt;= 50 &amp;&amp; total_destinations_per_page != 0);

// verify all nodes are present for each destinations.



for(int i = 0;i&lt;total_destinations_per_page;i++){
	int j = i+1;
	
	ArrayList keys = new ArrayList();
	json_response_holder.destinations[i].each{
		keys.add(it.getKey()); 
	}
	assert("agents" in keys);
	assert("bookings" in keys);
	assert("bttv" in keys);
	assert("img" in keys);
	assert("lat" in keys);
	assert("lon" in keys);
	assert("max_b" in keys);
	assert("min_b" in keys);
	assert("name" in keys);
	assert("destinations_extend" in keys);
}
</script></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase id="a7d467d9-754a-40f8-9df6-dc345855765b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User_Get_All_Destinations" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Given TT-Mmobile token for all destination is generated" id="b1ed659e-fd3e-4baf-ac1b-2c2486d8349b"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/trip_types/all_destinations</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>sgqb5W/wQBB5Qzpp9ljkWErsFURsMysVFPnA2Gzmve4=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then all destination can be explored" id="d28fc11f-2727-4bce-9e75-27c533406e2e"><con:settings/><con:config service="AllDestinations" resourcePath="/api/{api_version}/trip_types/all_destinations" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then all destination can be explored" id="11a3efbf-a754-4d81-953d-eb828619270e" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="${Given TT-Mmobile token for all destination is generated#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/trip_types/all_destinations</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="64c27ab6-2259-43bf-9f37-9ad6bedcdb56" name="HTTP Status - 200"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="74b4cf28-3f7a-4208-aa5f-f7408b392db3" name="Verify response"><con:configuration><scriptText>import groovy.json.JsonSlurper;
import java.util.Random;
String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

Random rand = new Random();
int destination_count = json_response_holder.id.size();
 log.info destination_count;
//Verify count of destination is not ZERO.
assert(destination_count != 0);

for(int i = 0;i &lt; destination_count;i++){
	ArrayList allnodes = new ArrayList();
	json_response_holder[i].each{
		allnodes.add(it.getKey());
	}
	assert("agents" in allnodes);
	assert("bookings" in allnodes);
	assert("bttv" in allnodes);
	assert("id" in allnodes);
	assert("lat" in allnodes);
	assert("lon" in allnodes);
	assert("max_b" in allnodes);
	assert("min_b" in allnodes);
	assert("name" in allnodes);
	assert("img" in allnodes);
}</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="api_version" value="v2" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase id="5d253813-823d-459e-8621-87d32aae3c44" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User_Get_All_Destinations_By_Category" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Given TT-Mobile token for all categories is generated" id="3ac6832b-5a0d-4292-b184-4e7764657d6e"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/trip_types/all_categories.json</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>fQEP1DABdTWO7HLxYVV8YATFoTNXtu3OAgo/ynB4ZeA=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user explored all categories to select the category" id="c57d9722-c259-406f-978e-8f1aa81f1871"><con:settings/><con:config service="ALL_CATEGORIES" resourcePath="/api/{api_version}/trip_types/all_categories.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user explored all categories to select the category" id="e77b538c-145b-4012-9b1a-22cc4b8d040d" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="${Given TT-Mobile token for all categories is generated#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v1/trip_types/all_categories.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="dc60dbaa-729f-4b96-80e0-e63e2dac3eb2" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="beac7a6f-2b8e-40d9-8d69-8afeb6b7dc8f" name="Get the random category"><con:configuration><scriptText>import groovy.json.JsonSlurper;
import java.util.Random;
String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

int total_categories = json_response_holder.id.size();
Random rand = new Random();
int randomindex = rand.nextInt((total_categories - 0) + 1) + 0;

// Get the details of random category.
String agents = json_response_holder.agents[randomindex].toString();
String destination_count = json_response_holder.destination_count[randomindex].toString();
String id = json_response_holder.id[randomindex].toString();
String name = json_response_holder.name[randomindex];
//String cloud_image_id = json_response_holder.cloud_images[randomindex].id[0].toString();
//String cloud_image_url = json_response_holder.cloud_images[randomindex].large_image_url[0];

messageExchange.modelItem.testCase.setPropertyValue("agents",agents);
messageExchange.modelItem.testCase.setPropertyValue("destination_count",destination_count);
messageExchange.modelItem.testCase.setPropertyValue("id",id);
messageExchange.modelItem.testCase.setPropertyValue("name",name);
//messageExchange.modelItem.testCase.setPropertyValue("cloud_image_id",cloud_image_id);
//messageExchange.modelItem.testCase.setPropertyValue("cloud_image_url",cloud_image_url);

</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="And get token for destinations by category" id="f5ba98f9-754b-4ffe-947f-27406aa0e3ce"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>/api/v4/get_filtered_results?result_type=destination_catalog&amp;per_page=50&amp;trip_type=${#TestCase#id}&amp;page_number=1&amp;sort_by=relevance </con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>cpPak8OcFTIWp8ycsoujpWNhuc1iNyT+HIiZIlZY0lY=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Destinations by category" id="b851f995-453e-4d33-b083-6bf849658b1f"><con:settings/><con:config service="Destination_through_category" resourcePath="/api/v4/get_filtered_results" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Destinations by category" id="cc5f0f1e-0c7f-4bbe-93f8-82c0aa1ad821" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="${And get token for destinations by category#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://master.ttdev.in/api/v4/get_filtered_results</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="6580c63b-8dd1-41ec-bc59-c68d0b59930b" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="f178b576-18c4-4665-8cd7-4889eba2931c" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;
import java.util.Random;
String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

String destination_count=json_response_holder.destinations.id.size();

log.info destination_count;
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="per_page" value="100"/>
  <con:entry key="trip_type" value="${#TestCase#id}"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
</con:parameters><con:parameterOrder><con:entry>result_type</con:entry><con:entry>trip_type</con:entry><con:entry>page_number</con:entry><con:entry>sort_by</con:entry><con:entry>security_auth_token</con:entry><con:entry>per_page</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>agents</con:name><con:value>1157</con:value></con:property><con:property><con:name>destination_count</con:name><con:value>55</con:value></con:property><con:property><con:name>id</con:name><con:value>2</con:value></con:property><con:property><con:name>name</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Adventure</con:value></con:property><con:property><con:name>cloud_image_id</con:name><con:value>5</con:value></con:property><con:property><con:name>cloud_image_url</con:name><con:value>https://res.cloudinary.com/dxqin8fbx/image/fetch/f_auto,q_auto:eco,w_630/http://d2ve4ka4f767m6.cloudfront.net/attachments/cloud_images/cloud_images/5/original/erawan_falls.jpg</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase id="6727a625-397f-4bd3-ac5b-2982a56c4a34" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User_Get_All_Destinations_By_Theme" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Given TT-Mobile token is generated for all themes" id="9c2d68f5-24fa-4269-bbf4-05842956465e"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/themes/all_themes.json</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>xDFCV5tI/oQLpUqBhPOsmizG11YkymexicuMM03cvyo=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then all themes are explored successfully" id="934c94fb-10c2-4d56-b117-fe53da189855"><con:settings/><con:config service="ALL_THEMES" resourcePath="/api/{api_version}/themes/all_themes.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then all themes are explored successfully" id="46d28c9a-9d2c-449a-8e05-13548d907d93" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="${Given TT-Mobile token is generated for all themes#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v1/themes/all_themes.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4aeb77a9-64d8-41a3-a248-79ea4f70f861" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="cabf5459-1531-40e9-bae7-1ee31fd06c21" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;
import java.util.Random;
String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);


int total_themes = json_response_holder.id.size();
Random rand = new Random();

// verify total themes loaded should not be ZERO!
assert(total_themes != 0);


//Get the details of random theme.
int randomindex = rand.nextInt((total_themes - 0) + 1) + 0;
String id = json_response_holder.id[randomindex].toString()
String name = json_response_holder.name[randomindex];
String large_image = json_response_holder.large_image[randomindex];

messageExchange.modelItem.testCase.setPropertyValue("id",id);
messageExchange.modelItem.testCase.setPropertyValue("name",name);
messageExchange.modelItem.testCase.setPropertyValue("large_image",large_image);





</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="api_version" value="v1" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="When TT-Mobile token is generated for all detination by theme" id="2d95569c-625b-4b3d-acc2-cffdc9d07ce5"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/themes/${#TestCase#id}/all_destinations</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>iUmL56X1Cih0ws2zK4T1h1hokq8XfMJYjNDCZZlnWDw=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Get all destinations by theme" id="e56b77b0-a621-4bcd-a190-4919ae96ab04"><con:settings/><con:config service="AllDestinationsByTheme" resourcePath="/api/{api_version}/themes/{theme_id}/all_destinations" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get all destinations by theme" id="27a8e01d-34a1-4ec4-be65-1aa3c6484e89" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="${When TT-Mobile token is generated for all detination by theme#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v1/themes/theme_id/all_destinations</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="186452b6-e7a1-4e68-9e2c-0a566c377b53" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="e388da67-9609-467f-a058-80442554b21a" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

log.info json_response_holder.id.size();</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="theme_id" value="${#TestCase#id}"/>
  <con:entry key="api_version" value="v1"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>id</con:name><con:value>7</con:value></con:property><con:property><con:name>name</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Best International Honeymoon Destinations</con:value></con:property><con:property><con:name>large_image</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">https://res.cloudinary.com/dma3zc8eo/image/fetch/f_auto,q_auto:eco,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/themes/7/original/image_7.jpeg</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase id="1f3dd7c3-ffc0-424f-800f-572e48b4e2da" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="LoggedInUser_get_the_BookedOrConvertedQuotes" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Given user logged in to application" id="803106bb-5290-4163-b96c-2e40dd35e093"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5ab66c45-5d18-4dcb-8819-795ff4a3c798</con:targetTestCase><con:properties><con:property><con:name>user_id</con:name><con:value>953268</con:value></con:property><con:property><con:name>auth_key</con:name></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTdiMTFkMGNlY2I2YTk0NTZkNWJiZGUyNjc3NWIxMjI2BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRVVDZUSmpMeTdYOTZsVThCQ1o2MG11BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--64bb0fb82a116564ddc90f644f345494d1f29c8c; path=/; HttpOnly</con:value></con:property></con:properties><con:returnProperties><con:entry>user_id</con:entry><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="And when TT-Mobile token for get converted quotes is generated" id="492c8439-cd31-4133-b3e5-f117315fa4c6"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/quotes/get_booked_or_converted_quotes.json</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>Yom3EYjW2t+HvYE8phfAeBpef6ZVWx4g7Snachr0K4g=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user is able to explore the booked and converted quotes" id="83316f04-1e1c-46ff-95e1-494b2a530b70"><con:settings/><con:config service="GetBookedOrConvertedQuotes" resourcePath="/api/{apiversion}/quotes/get_booked_or_converted_quotes.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user is able to explore the booked and converted quotes" id="a5e05bb1-49bb-475e-87a8-c6790196afa1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user logged in to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${And when TT-Mobile token for get converted quotes is generated#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v1/quotes/get_booked_or_converted_quotes.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="d35fe841-9a62-45a0-805a-2e3074454d83" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="apiversion" value="v1" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase id="1abbce3c-7bfc-490e-9aed-57a99a071c87" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="LoggedInUser_Get_All_Requested_TripData" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Given user logged into application" id="14d4faf6-66f0-4d2c-8bd2-2b64c681217e"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5ab66c45-5d18-4dcb-8819-795ff4a3c798</con:targetTestCase><con:properties><con:property><con:name>user_id</con:name><con:value>953268</con:value></con:property><con:property><con:name>auth_key</con:name><con:value/></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTE3MzI1Y2FmOTE0Mzc5MDg5MGFiN2NmODJiMGI1NmFmBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRVVDZUSmpMeTdYOTZsVThCQ1o2MG11BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--fd3a5e895453dd25ebedf900a452eb45d9ef03fd; path=/; HttpOnly</con:value></con:property></con:properties><con:returnProperties><con:entry>user_id</con:entry><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="When TT-Mobile to get all requested trip data is generated" id="bcab301b-d2d1-4fa7-99f7-55fce5f2b9e3"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/all_trips_user.json?all_trip_data=false&amp;currency=Dollar</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>erzBomEZOY32KfRLUj79CXVQVl74Rt6cT0M0K5lYAHA=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user can explore all requested trip data" id="312e35b5-7c65-4ca5-8435-edec849d7977"><con:settings/><con:config service="AllRequestedTripData" resourcePath="/api/{api_version}/requested_trips/all_trips_user.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user can explore all requested trip data" id="f6ad2b15-1fdc-4ebf-b337-e16af55dc48a" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user logged into application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${When TT-Mobile to get all requested trip data is generated#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/requested_trips/all_trips_user.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c7db4a17-14ad-4776-9c4b-796df20145ed" name="HTTP Status - 200"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="b76c91ee-5dee-4a7b-97a5-b750bfb7cb84" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;
import java.util.Random;
String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);


try{
String firstTripID = json_response_holder.id[0].toString();
messageExchange.modelItem.testCase.setPropertyValue("trip_id",firstTripID);
}
catch(Exception e){
	assert false : "No trip for user";
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="api_version" value="v2" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="And when TT-Mobile token for single requested trip data is generated" id="90f15c2c-6fb3-4ab2-9126-74ead729665f"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/${#TestCase#trip_id}.json?include_quotes=false&amp;currency=Dollar</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>EGftHOU9KU8NOaWW0xKokA6F4ic2+67kSwAKSfVa7LQ=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user can explore single requested trip data" id="363863b5-b9fe-44d9-b82b-0c20f9e107cb"><con:settings/><con:config service="GetSingleRequestedTrip" resourcePath="/api/{api_version}/requested_trips/{requested_trip_id}.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user can explore single requested trip data" id="afa80f63-d378-4a35-80d1-234322ba1e8e" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user logged into application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${And when TT-Mobile token for single requested trip data is generated#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting><con:setting id="RecordRequestRepresentations">false</con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/requested_trips/requested_trip_id.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="cb7a5032-1ac8-4edc-972a-fb47eee7303a" name="HTTP Status - 200"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="requested_trip_id" value="${#TestCase#trip_id}"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
</con:parameters><con:parameterOrder><con:entry>requested_trip_id</con:entry><con:entry>include_quotes</con:entry><con:entry>currency</con:entry><con:entry>api_version</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>trip_id</con:name><con:value>2612688</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="99a4fd70-ea71-4deb-9bca-43ab425296a1" name="CommentOnQuote"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="40e19397-ece4-4479-b7e8-5e030d397cb7" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User Comment On The Quote" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="loggedIn user rquest a quote" id="f38104ff-98b8-4ac7-8421-2d8fe218d42a"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>2040cc92-e9d4-4517-a063-39395e85cdb8</con:targetTestCase><con:properties><con:property><con:name>number_of_days</con:name><con:value>${#TestCase#number_of_days}</con:value></con:property><con:property><con:name>per_page</con:name><con:value>${#TestCase#per_page}</con:value></con:property><con:property><con:name>activity</con:name><con:value>${#TestCase#activity}</con:value></con:property><con:property><con:name>months</con:name><con:value>${#TestCase#months}</con:value></con:property><con:property><con:name>price_ranges</con:name><con:value>${#TestCase#price_ranges}</con:value></con:property><con:property><con:name>destination_type</con:name><con:value>${#TestCase#destination_type}</con:value></con:property><con:property><con:name>activity_encoded</con:name><con:value>${#TestCase#activity_encoded}</con:value></con:property><con:property><con:name>price_ranges_encoded</con:name><con:value>${#TestCase#price_ranges_encoded}</con:value></con:property><con:property><con:name>months_encoded</con:name><con:value>${#TestCase#months_encoded}</con:value></con:property><con:property><con:name>destination_id</con:name><con:value>57</con:value></con:property><con:property><con:name>destination_name</con:name></con:property><con:property><con:name>selected_package_id</con:name></con:property><con:property><con:name>selected_package_name</con:name></con:property><con:property><con:name>selected_package_price_total</con:name></con:property><con:property><con:name>selected_package_headline</con:name></con:property><con:property><con:name>selected_package_days</con:name></con:property><con:property><con:name>selected_package_nights</con:name></con:property><con:property><con:name>selected_package_cities</con:name></con:property><con:property><con:name>destinations</con:name></con:property><con:property><con:name>destinations_encoded</con:name></con:property><con:property><con:name>destination_names</con:name></con:property><con:property><con:name>destination_names_encoded</con:name></con:property><con:property><con:name>start_date</con:name></con:property><con:property><con:name>RequestID</con:name><con:value>2612694</con:value></con:property><con:property><con:name>request_redirectUrl</con:name></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CkkiD3Nlc3Npb25faWQGOgZFVEkiJTE5MDQxMDZlYmU2ZjEwMGFlNjQ1YzNmODA1Y2FiZDk3BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRVVDZUSmpMeTdYOTZsVThCQ1o2MG11BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVEkiGGFsbG93X2N1c3RvbWl6YXRpb24GOwBGaQPC3SdJIgpmbGFzaAY7AFRvOiVBY3Rpb25EaXNwYXRjaDo6Rmxhc2g6OkZsYXNoSGFzaAk6CkB1c2VkbzoIU2V0BjoKQGhhc2h9AEY6DEBjbG9zZWRGOg1AZmxhc2hlc3sGOhJydHJpcF9jcmVhdGVkVDoJQG5vdzA%3D--25788d4dff8fea851dfcb341000e154da3d446cc; path=/; HttpOnly</con:value></con:property><con:property><con:name>user_id</con:name><con:value>953268</con:value></con:property></con:properties><con:returnProperties><con:entry>destination_id</con:entry><con:entry>RequestID</con:entry><con:entry>Cookie</con:entry><con:entry>user_id</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for destination hotel detail" id="9c8a28aa-c9ed-4acf-bc77-8277f0928c0e"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/destinations/${loggedIn user rquest a quote#destination_id}/destination_hotel_images</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>Ia9dfDxP6ZJx2ivLDfModyD88YUQL1o9IZAkcpUrA+Q=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="get destination hotel list" id="26950d57-60b2-4002-8a55-2ff37f85967d"><con:settings/><con:config service="DestinationHotelImages" resourcePath="/api/{api_version}/destinations/{destinationId}/destination_hotel_images" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="get destination hotel list" id="f00ef24d-81e4-44a7-b43f-423ab7721729" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for destination hotel detail#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/destinations/67/destination_hotel_images.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="69d48784-f9f6-4d46-b41f-4e97a941b7af" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="7d45352f-9592-4e9d-a41f-cafe6b72a7f2" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def hotels= json_response_holder.hotel_images;
for (def hotel in hotels){
	messageExchange.modelItem.testCase.setPropertyValue("address",hotel.address);
	messageExchange.modelItem.testCase.setPropertyValue("category",String.valueOf(hotel.category));
	messageExchange.modelItem.testCase.setPropertyValue("city",hotel.city);
	messageExchange.modelItem.testCase.setPropertyValue("city_id",String.valueOf(hotel.city_id));
	messageExchange.modelItem.testCase.setPropertyValue("d_id",String.valueOf(hotel.d_id));
	messageExchange.modelItem.testCase.setPropertyValue("img",hotel.img);
	messageExchange.modelItem.testCase.setPropertyValue("name",hotel.name);
	messageExchange.modelItem.testCase.setPropertyValue("picture",hotel.pictures);
	break;

}
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="destinationId" value="${loggedIn user rquest a quote#destination_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>destinationId</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="admin tag agent with trip" id="ed09a16a-2e02-4840-8ed9-5cc560a066e6"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>16865839-07a3-4d5d-aff3-bc09595f8bf3</con:targetTestCase><con:properties><con:property><con:name>Agent_TagID</con:name><con:value>521</con:value></con:property><con:property><con:name>request_id</con:name><con:value>${loggedIn user rquest a quote#requestID}</con:value></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWYzNzJjZjg4MDY2MzZkYjViZWIwYjkxOGI4NzEwZTllBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA06VC0kiIiQyYSQxMCRJWDBpRG9HLm5aSWRmR1ptbFNXRC9PBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--fd12e0281994101c6da75bf56ec0a41e398f66e2; path=/; HttpOnly</con:value></con:property></con:properties><con:returnProperties><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="agent give quote to traveller" id="6f205260-466a-4d56-9810-490b0fa0b6a8"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5794d198-7055-4330-be4a-67978cc6ef03</con:targetTestCase><con:properties><con:property><con:name>user_id</con:name></con:property><con:property><con:name>auth_key</con:name></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTQxZTEwZmJkNjJlYWU5MGYzMTgzZTUzNzY2NzdiMmFmBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA02VC0kiIiQyYSQxMCRJa3hSLk02Sm9aYmhKZm9DTVZMZ0guBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--934a6d9ccbc4160c0f727acabd2cd771ad7e6d96; path=/; HttpOnly</con:value></con:property><con:property><con:name>user_email</con:name></con:property><con:property><con:name>user_password</con:name></con:property><con:property><con:name>request_id</con:name><con:value>${loggedIn user rquest a quote#requestID}</con:value></con:property><con:property><con:name>Agent_TagID</con:name><con:value>521</con:value></con:property><con:property><con:name>quoteid</con:name><con:value>4807330</con:value></con:property><con:property><con:name>quoteincl</con:name></con:property><con:property><con:name>traveldays</con:name></con:property><con:property><con:name>saveinclusions</con:name></con:property><con:property><con:name>price</con:name><con:value>32430</con:value></con:property><con:property><con:name>hotelnames</con:name><con:value>${#TestCase#name}</con:value></con:property><con:property><con:name>hotelcityname</con:name><con:value>${#TestCase#city}</con:value></con:property><con:property><con:name>hotelcityid</con:name><con:value>${#TestCase#city_id}</con:value></con:property><con:property><con:name>hoteldetail</con:name></con:property><con:property><con:name>excluded</con:name></con:property><con:property><con:name>included</con:name></con:property></con:properties><con:returnProperties><con:entry>Cookie</con:entry><con:entry>quoteid</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for get quote detail" id="e5d61e03-83f1-4fac-bb76-50cbd4acc34e"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/${loggedIn user rquest a quote#RequestID}?include_quotes=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>5xp3utqbWFmYWZOz7AE8FTGjDYk8PKFcDFJKmoKtSq4=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user view request detail" id="36df2d91-ce6d-4ecb-ae1c-816986a1da3a"><con:settings/><con:config service="GetRequestDetail" resourcePath="/api/{version}/requested_trips/{rtripId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user view request detail" id="3bb87632-a6dc-4ec6-a6d6-0d9edb486313" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for get quote detail#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1838358</con:originalUri><con:assertion type="GroovyScriptAssertion" id="bfa7c350-0a50-471d-9c61-269f35459f60" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def quotes = json_response_holder.quotes;

String quoteID = context.expand('${agent give quote to traveller#quoteid}');
String price = context.expand('${agent give quote to traveller#price}');
boolean isQuoteFound = false;
for (quote in quotes){
	if(quote.id==quoteID.toInteger() &amp;&amp; quote.price==price.toInteger()){
		isQuoteFound =  true;
		break;
	}	
}

assert isQuoteFound==true : "quoteID "+quoteID +" are not present in response quotes detaile "+ quotes
</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="d6176990-0894-4497-b407-3505c582b8e6" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="rtripId" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="include_quotes" value="true"/>
  <con:entry key="security_auth_token" value=""/>
  <con:entry key="version" value="v2"/>
</con:parameters><con:parameterOrder><con:entry>rtripId</con:entry><con:entry>version</con:entry><con:entry>include_quotes</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for comment on quote" id="cacf2f94-4179-4a4e-8385-9348e9fb55cf"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/requested_trips/${loggedIn user rquest a quote#RequestID}/quotes/${agent give quote to traveller#quoteid}/comments</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>post</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>GR486AYqjPUnYu76T+mzDogFbAgwY7Rz90tp9bQbIjs=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user comment on quote" id="c15235fa-ed2a-4d19-95d4-d39b9be3481e"><con:settings/><con:config service="PostCommentOnQuote" resourcePath="/api/v1/requested_trips/{requested_trip_id}/quotes/{quote_id}/comments" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user comment on quote" id="e28f41e2-92a4-49ae-8602-5718ecd91d33" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for comment on quote#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>[{
	"attachments_attributes": [],
	"comment": "${#TestCase#comment}",
	"commentBy": "TRAVELLER",
	"commentable_id": ${agent give quote to traveller#quoteid},
	"commentable_type": "Quote",
	"email": "${#Project#user_email}",
	"role": "traveller",
	"status": "PENDING",
	"title": "${#TestCase#commenttitle}",
	"trip_id": ${loggedIn user rquest a quote#RequestID},
	"user_id": ${loggedIn user rquest a quote#user_id}
}]</con:request><con:originalUri>http://traveler-api.ttdev.in/api/v1/requested_trips/947696/quotes/1534608/comments</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="55ba6adb-27b1-4c8d-87fd-6c9f31c7ebbf" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="e8b1f801-de30-43d9-80a3-af4188e96351" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);
def commentableID = json_response_holder.commentable_id[0];
def emailID = json_response_holder.email[0];
def title = json_response_holder.title[0];
def userID = json_response_holder.user_id[0];
def commentID = json_response_holder.id[0];
def comment = json_response_holder.comment[0];
def commentTitle = json_response_holder.title[0];


def quoteID = context.expand('${agent give quote to traveller#quoteid}').toInteger();
def uID = context.expand('${loggedIn user rquest a quote#user_id}').toInteger();
def eID = context.expand('${#Project#user_email}');
def cmnt = context.expand('${#TestCase#comment}');
def cmntTitle = context.expand('${#TestCase#commenttitle}');

assert quoteID == commentableID:"quote ID shoudl be "+ quoteID +"  but id is "+commentableID
assert userID == uID: "user ID should be "+ uID + "but it is "+ userID
assert commentID!=null:"comment ID is null"
assert emailID == eID : "email ID should be "+ eID + " but it is "+ emailID 
assert commentTitle.contains(cmntTitle)  : "comment title should be "+ cmntTitle+ " but it is "+ commentTitle;
assert comment == cmnt : "comment should be "+ cmnt+ " but it is "+ comment;
messageExchange.modelItem.testCase.setPropertyValue("commentID",String.valueOf(commentID));


</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="requested_trip_id" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="quote_id" value="${agent give quote to traveller#quoteid}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for show comment on quote" id="73609b7d-1ed9-4588-81ff-57cc3cca0972"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/${loggedIn user rquest a quote#RequestID}/quotes/${agent give quote to traveller#quoteid}/comments/show_all_comments</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>7wpYbcyikVXVV8ND2wDjn98FkQLwNvad9yRDGi5ySno=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user view all comment on quote" id="75a08229-fe40-4953-a531-5696e5c4dac8"><con:settings/><con:config service="ViewAllQuoteComments" resourcePath="/api/v2/requested_trips/{requested_trip_id}/quotes/{quote_id}/comments/show_all_comments" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user view all comment on quote" id="71d09b8d-04a9-44c3-8d86-7b04d4115d57" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for show comment on quote#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/requested_trips/947697/quotes/1534609/comments/show_all_comments</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="31f9ce0b-d5ac-41ed-9056-7c303f9448ee" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="d14f5a1f-52c6-4916-ae40-c972db330b7e" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def quoteID = context.expand('${agent give quote to traveller#quoteid}').toInteger();
def uID = context.expand('${loggedIn user rquest a quote#user_id}').toInteger();
def eID = context.expand('${#Project#user_email}');
def cmnt = context.expand('${#TestCase#comment}');
def cmntTitle = context.expand('${#TestCase#commenttitle}');
def cmntID =  context.expand('${#TestCase#commentID}').toInteger();


def comments = json_response_holder.comments;
for (def comment  in comments){
		if(comment.id==cmntID){
			assert comment.comment==cmnt: "comment should be "+ cmnt + " but it is "+comment.comment;
			assert comment.id == cmntID: "comment id should be "+ cmntID + " but it is "+comment.id;
			assert comment.title.contains( cmntTitle) : "comment title should be "+ cmntTitle +"  but it is "+ comment.title;
			assert comment.user_id == uID: "user id should be "+ uID +" but it is "+ comment.user_id;
			assert comment.email == eID: "user email ID should be "+ eID + " but it is "+ comment.email;
			assert comment.commentable_id==quoteID : "quote ID should be "+ quoteID + " but it is "+ comment.commentable_id;
		}
}</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="requested_trip_id" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="quote_id" value="${agent give quote to traveller#quoteid}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>number_of_days</con:name><con:value>4-6</con:value></con:property><con:property><con:name>per_page</con:name><con:value>50</con:value></con:property><con:property><con:name>activity</con:name><con:value>5,3</con:value></con:property><con:property><con:name>months</con:name><con:value>4-6</con:value></con:property><con:property><con:name>price_ranges</con:name><con:value>0-10000</con:value></con:property><con:property><con:name>destination_type</con:name><con:value>international</con:value></con:property><con:property><con:name>price_ranges_encoded</con:name><con:value>0-10000</con:value></con:property><con:property><con:name>activity_encoded</con:name><con:value>5%2C3</con:value></con:property><con:property><con:name>months_encoded</con:name><con:value>4-6</con:value></con:property><con:property><con:name>currency</con:name><con:value>Rupee</con:value></con:property><con:property><con:name>destination</con:name><con:value>Europe,France,Switzerland,Netherlands</con:value></con:property><con:property><con:name>agentname</con:name><con:value>TT agent demo</con:value></con:property><con:property><con:name>commentID</con:name><con:value>7429673</con:value></con:property><con:property><con:name>comment</con:name><con:value>hii</con:value></con:property><con:property><con:name>commenttitle</con:name><con:value>preferences_input_comment</con:value></con:property><con:property><con:name>address</con:name><con:value>80/167 Moo 9, Nongprue, Banglamung Pattaya - 20150
, Thailand</con:value></con:property><con:property><con:name>category</con:name><con:value>4</con:value></con:property><con:property><con:name>city</con:name><con:value>Pattaya</con:value></con:property><con:property><con:name>city_id</con:name><con:value>26357</con:value></con:property><con:property><con:name>d_id</con:name><con:value>2422243</con:value></con:property><con:property><con:name>img</con:name><con:value>w_300/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861507/original/4901399_63_b_w.jpg</con:value></con:property><con:property><con:name>name</con:name><con:value>Centara Nova Hotel &amp; Spa Pattaya</con:value></con:property><con:property><con:name>picture</con:name><con:value>w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861507/original/4901399_63_b_w.jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861508/original/4901399_87_b_w.jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861509/original/4901399_91_b_w.jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861510/original/centara-nova-hotel-spa_(1).jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861511/original/centara-nova-hotel-spa_(2).jpg</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="c0a4f28e-09db-40a0-9eb7-e950e53645d2" name="SearchAndFilter"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="e16f63cb-6779-4125-bd01-e7ca8cac56d4" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User_Search_for_a_trip" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="User navigate to Search tab" id="f11766cf-298e-4e72-9f45-0a3ec1679dae" disabled="true"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>d6e38075-ad8f-4890-9379-2f1cb755b34d</con:targetTestCase><con:properties/><con:returnProperties/><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="And gets the TT-Mobile token for  filtered search results" id="ebc7fc17-aedc-445c-ac17-673dd781d3b7"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v4/get_filtered_results?days=${#TestCase#number_of_days}&amp;trip_type=${#TestCase#trip_type}&amp;category=${#TestCase#trip_category}&amp;result_type=${#TestCase#result_type}&amp;price_ranges=${#TestCase#price_ranges}</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>9eIo2kRLrnqGhiZ2lWnYvXnSJcur9lPfo4Hlfye8oGE=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="And get the search results for specified inputs" id="3f38fc0b-a8a1-4d80-a96f-e3ebf9f9ff01"><con:settings/><con:config service="Get Filtered Results" resourcePath="/api/{api_version}/get_filtered_results" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And get the search results for specified inputs" id="7a30ee31-8127-4cf9-86b0-97240048dfba" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="${And gets the TT-Mobile token for  filtered search results#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v4/get_filtered_results</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="253118d6-9772-45f6-b4d8-599a82dd3dde" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="c91c111f-0f46-433f-826d-6986bb82142a" name="Verify Search Data"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

String result_type = json_response_holder.result_type;

assert(result_type == "destination_catalog");

def min_budget = json_response_holder.destinations.min_b;

String price_range = context.expand('${#TestCase#price_ranges}');
Long min_range = Long.parseLong(price_range.split('-')[0]);
Long max_range = Long.parseLong(price_range.split('-')[1]);

for(def min_b in min_budget){
	assert(min_b >= min_range &amp;&amp; min_b &lt;= max_range);
}


</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="result_type" value="${#TestCase#result_type}"/>
  <con:entry key="category" value="${#TestCase#trip_category}"/>
  <con:entry key="days" value="${#TestCase#number_of_days}"/>
  <con:entry key="trip_type" value="${#TestCase#trip_type}"/>
  <con:entry key="price_ranges" value="${#TestCase#price_ranges}"/>
  <con:entry key="api_version" value="v4"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>number_of_days</con:name><con:value>4-6</con:value></con:property><con:property><con:name>trip_type</con:name><con:value>2</con:value></con:property><con:property><con:name>trip_category</con:name><con:value>family</con:value></con:property><con:property><con:name>result_type</con:name><con:value>all</con:value></con:property><con:property><con:name>price_ranges</con:name><con:value>40000-60000</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase id="ddb23050-2347-4d64-b914-2dfbbacd5b90" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User_Sort_The_Destinations_ByPriceLowToHigh" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Given user get the TT-Mobile token for sort" id="212f6ca3-0bb1-46bc-9403-b48fb32bac10"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v4/get_filtered_results?per_page=50&amp;result_type=destination_catalog&amp;page_number=1&amp;sort_by=price_l-h</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>rXuLHfo7zng/k4F1Zs4k54QX08qAR71JzY9V1aEzKZM=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user can sort the destination catalog by price low to high" id="15cb900a-a274-4b98-a49c-c02e66496b37"><con:settings/><con:config service="FilterDestinationsCatalogSearchResults" resourcePath="/api/{api_version}/get_filtered_results" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user can sort the destination catalog by price low to high" id="0684b8d0-f7d7-4119-899a-d47c06780a8f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="${Given user get the TT-Mobile token for sort#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v4/get_filtered_results</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="16032cd7-c23d-400b-872a-786f0311e114" name="HTTP Status - 200"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="bffe08a5-943e-4d89-a464-2cd8de10cf1c" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

String result_type = json_response_holder.result_type;
assert(result_type == "destination_catalog");

//verify the price is sorted 
Long[] min_b = json_response_holder.destinations.min_b;

int destinations = json_response_holder.destinations.id.size();
for(int i=1;i &lt; destinations;i++){
	if(min_b[i-1]  > min_b[i]){
		assert(false) : "price for " + i + " destination is " + min_b[i-1] + " and price for " + (i+1) + " destination is " + min_b[i]; 
		break;
	}
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="months" value=""/>
  <con:entry key="days" value=""/>
  <con:entry key="sort_by" value="price_l-h"/>
  <con:entry key="price_ranges" value=""/>
  <con:entry key="destination_type" value=""/>
  <con:entry key="activity" value=""/>
  <con:entry key="security_auth_token" value=""/>
</con:parameters><con:parameterOrder><con:entry>days</con:entry><con:entry>per_page</con:entry><con:entry>result_type</con:entry><con:entry>activity</con:entry><con:entry>page_number</con:entry><con:entry>months</con:entry><con:entry>price_ranges</con:entry><con:entry>destination_type</con:entry><con:entry>sort_by</con:entry><con:entry>api_version</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase id="7ceda876-d490-45f0-b0f7-36eb91278ba4" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User_Sort_The_Destinations_ByPriceHighToLow" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Given user get the TT-Mobile token for sort" id="5125e4e9-d178-4d98-93b6-8b54805d2478"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v4/get_filtered_results?per_page=50&amp;result_type=destination_catalog&amp;page_number=1&amp;sort_by=price_h-l</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>aK/4hNOQ7cgH7eBegf6B3wyfcGOiC8UtqgdunfkbzN0=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user can sort the destination catalog by price high to low" id="c03cc7c2-807d-4a9d-b782-249f18222f36"><con:settings/><con:config service="FilterDestinationsCatalogSearchResults" resourcePath="/api/{api_version}/get_filtered_results" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user can sort the destination catalog by price high to low" id="0684b8d0-f7d7-4119-899a-d47c06780a8f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="TT-Mobile" value="${Given user get the TT-Mobile token for sort#hash_key}"/>
  &lt;con:entry key="Accept" value="application/json"/>
  &lt;con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v4/get_filtered_results</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="16032cd7-c23d-400b-872a-786f0311e114" name="HTTP Status - 200"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="bffe08a5-943e-4d89-a464-2cd8de10cf1c" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

String result_type = json_response_holder.result_type;
assert(result_type == "destination_catalog");

//verify the price is sorted 
Long[] min_b = json_response_holder.destinations.min_b;

int destinations = json_response_holder.destinations.id.size();
for(int i=1;i &lt; destinations;i++){
	if(min_b[i-1] &lt; min_b[i]){
		assert(false) : "price for " + i + " destination is " + min_b[i-1] + " and price for " + (i+1) + " destination is " + min_b[i]; 
		break;
	}
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="destination_type" value=""/>
  <con:entry key="months" value=""/>
  <con:entry key="price_ranges" value=""/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="activity" value=""/>
  <con:entry key="days" value=""/>
  <con:entry key="sort_by" value="price_h-l"/>
</con:parameters><con:parameterOrder><con:entry>days</con:entry><con:entry>per_page</con:entry><con:entry>result_type</con:entry><con:entry>activity</con:entry><con:entry>page_number</con:entry><con:entry>months</con:entry><con:entry>price_ranges</con:entry><con:entry>destination_type</con:entry><con:entry>sort_by</con:entry><con:entry>api_version</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="5862114d-ec0d-456c-9da8-8f83b55f3f5b" name="AgentInfo"><con:settings/><con:savedRecentRuns>1</con:savedRecentRuns><con:runType>SEQUENTIAL</con:runType><con:testCase id="7625acf2-ca6b-489e-b459-02191808e4e6" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="User_view_Agent_testimonials" searchProperties="true" maxResults="0"><con:settings/><con:savedRecentRuns>1</con:savedRecentRuns><con:testStep type="calltestcase" name="Given user login to application" id="b43882f2-3255-4162-a714-c2d15df0f32d"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5ab66c45-5d18-4dcb-8819-795ff4a3c798</con:targetTestCase><con:properties><con:property><con:name>user_id</con:name><con:value>953268</con:value></con:property><con:property><con:name>auth_key</con:name></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTEwMDczNmU3MGRhMmI2MWM3ZGQwOTgxZmJiZWU4M2QyBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRVVDZUSmpMeTdYOTZsVThCQ1o2MG11BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--afcd1d438bb8e28c0dcea236b11ff1883ca6d9dc; path=/; HttpOnly</con:value></con:property></con:properties><con:returnProperties><con:entry>user_id</con:entry><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="And gets TT-Mobile to get agent testimonials" id="e250f1fb-a3e3-4c66-861d-9244b03b94b6"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/agents/${#TestCase#agentID}/get_agent_testimonial</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>ezFeuPOzRxKicUq4zwJ47NA4ssZGY5yB6d8lFKv9nlA=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user view the agent testimonials" id="6dd70314-5427-44bd-af73-44b4280a034f"><con:settings/><con:config service="GetAgentTestimonials" resourcePath="/api/{apiversion}/agents/{agent_id}/get_agent_testimonial" methodName="Get_agent_testimonial" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user view the agent testimonials" id="118fc434-7f56-4d52-85ff-b8a504b4c1de" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${And gets TT-Mobile to get agent testimonials#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v1/agents/199585/get_agent_testimonial</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="23c35fed-e334-4aaa-9bc9-787451879d36" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="c143f5ac-2abd-40e0-a10a-33ca682e0d24" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

ArrayList allnodes = new ArrayList();
json_response_holder[0].each{
	allnodes.add(it.getKey());
}

assert("created_at" in allnodes);
assert("title" in allnodes);
assert("author" in allnodes);
assert("rating" in allnodes);
assert("author_pic" in allnodes);
assert("user_location" in allnodes);
assert("testimonial_body" in allnodes);
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="agent_id" value="${#TestCase#agentID}"/>
  <con:entry key="apiversion" value="v1"/>
</con:parameters><con:parameterOrder><con:entry>apiversion</con:entry><con:entry>agent_id</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>agentID</con:name><con:value>11</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>e250f1fb-a3e3-4c66-861d-9244b03b94b6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b43882f2-3255-4162-a714-c2d15df0f32d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="0c6ea146-6793-4f9a-a57c-3b76477189ce" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="User_gets_agent_details" searchProperties="true" maxResults="0"><con:settings/><con:savedRecentRuns>1</con:savedRecentRuns><con:testStep type="calltestcase" name="Given user login to application" id="71f31d3a-0cd7-4809-a1e0-1a0598faa41f"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5ab66c45-5d18-4dcb-8819-795ff4a3c798</con:targetTestCase><con:properties><con:property><con:name>user_id</con:name><con:value>953268</con:value></con:property><con:property><con:name>auth_key</con:name></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTNkZTMwNTBjNDczN2UxZGJlM2Q4M2FmMWM5MjM4M2JlBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRVVDZUSmpMeTdYOTZsVThCQ1o2MG11BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--8504097814d7d641c950039c25264b83a0ca291d; path=/; HttpOnly</con:value></con:property></con:properties><con:returnProperties><con:entry>user_id</con:entry><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="And gets the TT-Mobile to get the agent details" id="46fe3ff2-7c35-441f-a64c-8cde362605b3"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/agents/${#TestCase#agentID}/agent_company_profile.json</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>QN0vaWKGIrmtis1SBMR5azfJPez/QslXQEipP6Uk9/c=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user gets the agent company profile info" id="b57560da-c8d8-4f6b-a65c-862349521774"><con:settings/><con:config service="GetAgentCompanyProfile" resourcePath="/api/{apiversion}/agents/{agent_id}/agent_company_profile.json" methodName="Agent_company_profile.json" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user gets the agent company profile info" id="5fd249fc-8319-49af-846b-7cb946ac5e8e" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${And gets the TT-Mobile to get the agent details#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v1/agents/agent_id/agent_company_profile.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8f173467-e7ba-476b-9f7a-ed7d67d2cc0c" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="524abebc-f467-43c1-be30-992545a71583" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

ArrayList allnodes = new ArrayList();
json_response_holder.each{
	allnodes.add(it.getKey());
}

assert("company" in allnodes);
assert("thumb_image" in allnodes);
assert("medium_image" in allnodes);
assert("desc" in allnodes);
assert("get_address" in allnodes);
assert("email" in allnodes);

String company = json_response_holder.company;
String email = json_response_holder.email;
assert(company == "TT Agent Demo");
assert(email == "ttagentdemo@gmail.com");</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="agent_id" value="${#TestCase#agentID}"/>
  <con:entry key="apiversion" value="v1"/>
</con:parameters><con:parameterOrder><con:entry>apiversion</con:entry><con:entry>agent_id</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>agentID</con:name><con:value>199585</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>71f31d3a-0cd7-4809-a1e0-1a0598faa41f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:savedRecentRuns>1</con:savedRecentRuns><con:testSuite id="3dc6e9b8-11e9-4c9e-b11b-6b954eb96615" name="UserRejectQuote"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="c758851d-bdaf-4315-9fed-c03a36ba09a5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User Reject The Booked Quote" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="loggedIn user rquest a quote" id="14036a7e-0f82-408b-9add-08901c0f9645"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>2040cc92-e9d4-4517-a063-39395e85cdb8</con:targetTestCase><con:properties><con:property><con:name>number_of_days</con:name><con:value>${#TestCase#number_of_days}</con:value></con:property><con:property><con:name>per_page</con:name><con:value>${#TestCase#per_page}</con:value></con:property><con:property><con:name>activity</con:name><con:value>${#TestCase#activity}</con:value></con:property><con:property><con:name>months</con:name><con:value>${#TestCase#months}</con:value></con:property><con:property><con:name>price_ranges</con:name><con:value>${#TestCase#price_ranges}</con:value></con:property><con:property><con:name>destination_type</con:name><con:value>${#TestCase#destination_type}</con:value></con:property><con:property><con:name>activity_encoded</con:name><con:value>${#TestCase#activity_encoded}</con:value></con:property><con:property><con:name>price_ranges_encoded</con:name><con:value>${#TestCase#price_ranges_encoded}</con:value></con:property><con:property><con:name>months_encoded</con:name><con:value>${#TestCase#months_encoded}</con:value></con:property><con:property><con:name>destination_id</con:name><con:value>57</con:value></con:property><con:property><con:name>destination_name</con:name></con:property><con:property><con:name>selected_package_id</con:name></con:property><con:property><con:name>selected_package_name</con:name></con:property><con:property><con:name>selected_package_price_total</con:name></con:property><con:property><con:name>selected_package_headline</con:name></con:property><con:property><con:name>selected_package_days</con:name></con:property><con:property><con:name>selected_package_nights</con:name></con:property><con:property><con:name>selected_package_cities</con:name></con:property><con:property><con:name>destinations</con:name></con:property><con:property><con:name>destinations_encoded</con:name></con:property><con:property><con:name>destination_names</con:name></con:property><con:property><con:name>destination_names_encoded</con:name></con:property><con:property><con:name>start_date</con:name></con:property><con:property><con:name>RequestID</con:name><con:value>2612695</con:value></con:property><con:property><con:name>request_redirectUrl</con:name></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CkkiD3Nlc3Npb25faWQGOgZFVEkiJTAxZjU2NDhhOWM0YmJlMmViNDQ4NDk0NTM2NTUzY2ZkBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRVVDZUSmpMeTdYOTZsVThCQ1o2MG11BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVEkiGGFsbG93X2N1c3RvbWl6YXRpb24GOwBGaQPC3SdJIgpmbGFzaAY7AFRvOiVBY3Rpb25EaXNwYXRjaDo6Rmxhc2g6OkZsYXNoSGFzaAk6CkB1c2VkbzoIU2V0BjoKQGhhc2h9AEY6DEBjbG9zZWRGOg1AZmxhc2hlc3sGOhJydHJpcF9jcmVhdGVkVDoJQG5vdzA%3D--a4e2bc153cf5d98efc4e1475bfdb54181469cc2a; path=/; HttpOnly</con:value></con:property><con:property><con:name>user_id</con:name></con:property></con:properties><con:returnProperties><con:entry>destination_id</con:entry><con:entry>RequestID</con:entry><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for destination hotel detail" id="5f375928-d77e-49ae-9cca-93c405223a38"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/destinations/${loggedIn user rquest a quote#destination_id}/destination_hotel_images</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>Ia9dfDxP6ZJx2ivLDfModyD88YUQL1o9IZAkcpUrA+Q=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="get destination hotel list" id="93b6b133-949b-44bb-9ece-b00f55460856"><con:settings/><con:config service="DestinationHotelImages" resourcePath="/api/{api_version}/destinations/{destinationId}/destination_hotel_images" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="get destination hotel list" id="f00ef24d-81e4-44a7-b43f-423ab7721729" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for destination hotel detail#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/destinations/67/destination_hotel_images.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="69d48784-f9f6-4d46-b41f-4e97a941b7af" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="7d45352f-9592-4e9d-a41f-cafe6b72a7f2" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def hotels= json_response_holder.hotel_images;
for (def hotel in hotels){
	messageExchange.modelItem.testCase.setPropertyValue("address",hotel.address);
	messageExchange.modelItem.testCase.setPropertyValue("category",String.valueOf(hotel.category));
	messageExchange.modelItem.testCase.setPropertyValue("city",hotel.city);
	messageExchange.modelItem.testCase.setPropertyValue("city_id",String.valueOf(hotel.city_id));
	messageExchange.modelItem.testCase.setPropertyValue("d_id",String.valueOf(hotel.d_id));
	messageExchange.modelItem.testCase.setPropertyValue("img",hotel.img);
	messageExchange.modelItem.testCase.setPropertyValue("name",hotel.name);
	messageExchange.modelItem.testCase.setPropertyValue("picture",hotel.pictures);
	break;

}
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="destinationId" value="${loggedIn user rquest a quote#destination_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>destinationId</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="admin tag agent with trip" id="56981fe0-2686-431f-86d5-95bf4c395541"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>16865839-07a3-4d5d-aff3-bc09595f8bf3</con:targetTestCase><con:properties><con:property><con:name>Agent_TagID</con:name><con:value>521</con:value></con:property><con:property><con:name>request_id</con:name><con:value>${loggedIn user rquest a quote#requestID}</con:value></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTllNjQ2MTBlYmViNTE0YmYyMzQ0ZWM2NzUyNzBjOTBmBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA06VC0kiIiQyYSQxMCRJWDBpRG9HLm5aSWRmR1ptbFNXRC9PBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--03d087eeed570d2bc62c975cbeeae1bbb82c376a; path=/; HttpOnly</con:value></con:property></con:properties><con:returnProperties><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="agent give quote to traveller" id="abfb48e9-92b2-4fcf-830f-75e471811cd3"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5794d198-7055-4330-be4a-67978cc6ef03</con:targetTestCase><con:properties><con:property><con:name>user_id</con:name></con:property><con:property><con:name>auth_key</con:name></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTAwYmQwMGFmNzA1ZmNlZDY3ZDA3NGNhMWZiODU0ODE4BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA02VC0kiIiQyYSQxMCRJa3hSLk02Sm9aYmhKZm9DTVZMZ0guBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--d60d34348582520fb5a7216df73c9b786dd3f1bb; path=/; HttpOnly</con:value></con:property><con:property><con:name>user_email</con:name></con:property><con:property><con:name>user_password</con:name></con:property><con:property><con:name>request_id</con:name><con:value>${loggedIn user rquest a quote#requestID}</con:value></con:property><con:property><con:name>Agent_TagID</con:name><con:value>521</con:value></con:property><con:property><con:name>quoteid</con:name><con:value>4807331</con:value></con:property><con:property><con:name>quoteincl</con:name></con:property><con:property><con:name>traveldays</con:name></con:property><con:property><con:name>saveinclusions</con:name></con:property><con:property><con:name>price</con:name><con:value>32430</con:value></con:property><con:property><con:name>hotelnames</con:name><con:value>${#TestCase#name}</con:value></con:property><con:property><con:name>hotelcityname</con:name><con:value>${#TestCase#city}</con:value></con:property><con:property><con:name>hotelcityid</con:name><con:value>${#TestCase#city_id}</con:value></con:property><con:property><con:name>hoteldetail</con:name></con:property><con:property><con:name>excluded</con:name></con:property><con:property><con:name>included</con:name><con:value/></con:property></con:properties><con:returnProperties><con:entry>Cookie</con:entry><con:entry>quoteid</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for get quote detail" id="586aba0d-f56d-4fbe-b958-8e290f3106d7"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/${loggedIn user rquest a quote#RequestID}?include_quotes=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>stjlBpGxPbDlGft3pjSxXbjPQTEh1Gr13T7U1rmmxOg=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user view request detail" id="77a40f03-879c-4ea4-8a73-a51bdae3e52f"><con:settings/><con:config service="GetRequestDetail" resourcePath="/api/{version}/requested_trips/{rtripId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user view request detail" id="3bb87632-a6dc-4ec6-a6d6-0d9edb486313" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for get quote detail#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1838358</con:originalUri><con:assertion type="GroovyScriptAssertion" id="bfa7c350-0a50-471d-9c61-269f35459f60" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def quotes = json_response_holder.quotes;

String quoteID = context.expand('${agent give quote to traveller#quoteid}');
String price = context.expand('${agent give quote to traveller#price}');
boolean isQuoteFound = false;
for (quote in quotes){
	if(quote.id==quoteID.toInteger() &amp;&amp; quote.price==price.toInteger()){
		isQuoteFound =  true;
		break;
	}	
}

assert isQuoteFound==true : "quoteID "+quoteID +" are not present in response quotes detaile "+ quotes
</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="d6176990-0894-4497-b407-3505c582b8e6" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="rtripId" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="include_quotes" value="true"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="version" value="v2"/>
</con:parameters><con:parameterOrder><con:entry>rtripId</con:entry><con:entry>version</con:entry><con:entry>include_quotes</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for set quote status detail" id="2cf5f609-22e0-4ce2-8d53-29663660d013"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/requested_trips/${loggedIn user rquest a quote#RequestID}/quotes/${agent give quote to traveller#quoteid}/statusChange?state=2</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>P4JPDArI4oPau5kionPZ70m8gfYnWVEiC8wjxwFM1YY=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user book the quote" id="434a3f6a-5058-49e6-a058-913a4703133b"><con:settings/><con:config service="SetStatusOfQuote" resourcePath="/api/v1/requested_trips/{requested_trip_id}/quotes/{quote_id}/statusChange" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user book the quote" id="22a0bfba-34d9-4651-b664-c2b5ce6edd42" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for set quote status detail#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1840799/statusChange</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8a48e4c6-a379-4a2a-9a29-632c32ea6a2a" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="bedb9a4a-ccf0-4a32-8381-3f6809b84273" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def successmessage = json_response_holder.success;



assert (successmessage=="Quote has been chosen") : "message should be Quote has been chosen  bit it is "+successmessage
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="requested_trip_id" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="state" value="2"/>
  <con:entry key="quote_id" value="${agent give quote to traveller#quoteid}"/>
</con:parameters><con:parameterOrder><con:entry>requested_trip_id</con:entry><con:entry>quote_id</con:entry><con:entry>state</con:entry><con:entry>quote_decline_reason</con:entry><con:entry>request</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="and also get the hash for get quote detail" id="1bf979fe-bc03-4f71-8cd7-ae7379c350a3"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/${loggedIn user rquest a quote#RequestID}?include_quotes=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>stjlBpGxPbDlGft3pjSxXbjPQTEh1Gr13T7U1rmmxOg=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="and also user view request detail" id="b26c7dab-0e11-49c0-ba14-19b00acf4bd8"><con:settings/><con:config service="GetRequestDetail" resourcePath="/api/{version}/requested_trips/{rtripId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="and also user view request detail" id="3bb87632-a6dc-4ec6-a6d6-0d9edb486313" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for get quote detail#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1838358</con:originalUri><con:assertion type="GroovyScriptAssertion" id="bfa7c350-0a50-471d-9c61-269f35459f60" name="get request detail and validate quote status is booked"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def quotes = json_response_holder.quotes;

String quoteID = context.expand('${agent give quote to traveller#quoteid}');
String price = context.expand('${agent give quote to traveller#price}');
String destination = json_response_holder.to_loc;
messageExchange.modelItem.testCase.setPropertyValue("destination",destination);
boolean isQuoteFound = false;
for (quote in quotes){
	if(quote.id==quoteID.toInteger() &amp;&amp; quote.price==price.toInteger() &amp;&amp; quote.status==2){
	messageExchange.modelItem.testCase.setPropertyValue("currency",quote.currency);
	messageExchange.modelItem.testCase.setPropertyValue("agentname",quote.user.first_name +" "+quote.user.last_name);		
		isQuoteFound =  true;
		break;
	}	
}

assert isQuoteFound==true : "quoteID "+quoteID +" are not present in response quotes detaile "+ quotes
</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="d6176990-0894-4497-b407-3505c582b8e6" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="rtripId" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="include_quotes" value="true"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="version" value="v2"/>
</con:parameters><con:parameterOrder><con:entry>rtripId</con:entry><con:entry>version</con:entry><con:entry>include_quotes</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="again get the hash for set quote status detail" id="96a4881b-b284-47a2-b1ef-58471d83e759"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/requested_trips/${loggedIn user rquest a quote#RequestID}/quotes/${agent give quote to traveller#quoteid}/statusChange?state=8&amp;quote_decline_reason=2&amp;request=decline</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>XVlIUTy3qRov/26WMstV0YnXtXv4FizEwPM0nxV9yRE=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user cancel the quote" id="58ef6b01-80f2-4501-b3cf-f5853d00038a"><con:settings/><con:config service="SetStatusOfQuote" resourcePath="/api/v1/requested_trips/{requested_trip_id}/quotes/{quote_id}/statusChange" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user cancel the quote" id="22a0bfba-34d9-4651-b664-c2b5ce6edd42" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${again get the hash for set quote status detail#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1840799/statusChange</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8a48e4c6-a379-4a2a-9a29-632c32ea6a2a" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="bedb9a4a-ccf0-4a32-8381-3f6809b84273" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def successmessage = json_response_holder.success;



assert (successmessage=="Quote has been declined") : "message should be Quote has been declined  bit it is "+successmessage
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="quote_decline_reason" value="2"/>
  <con:entry key="request" value="decline"/>
  <con:entry key="requested_trip_id" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="state" value="8"/>
  <con:entry key="quote_id" value="${agent give quote to traveller#quoteid}"/>
</con:parameters><con:parameterOrder><con:entry>requested_trip_id</con:entry><con:entry>quote_id</con:entry><con:entry>state</con:entry><con:entry>quote_decline_reason</con:entry><con:entry>request</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="user again get the hash for get quote detail" id="70c315c0-c1ff-481d-9ae0-39921288d672"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/${loggedIn user rquest a quote#RequestID}?include_quotes=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>stjlBpGxPbDlGft3pjSxXbjPQTEh1Gr13T7U1rmmxOg=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="and user view request detail to check quote rejection detail" id="b91cf6d3-17d2-4ba4-aecd-ea3b8af1ac42"><con:settings/><con:config service="GetRequestDetail" resourcePath="/api/{version}/requested_trips/{rtripId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="and user view request detail to check quote rejection detail" id="3bb87632-a6dc-4ec6-a6d6-0d9edb486313" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${user again get the hash for get quote detail#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1838358</con:originalUri><con:assertion type="GroovyScriptAssertion" id="bfa7c350-0a50-471d-9c61-269f35459f60" name="get request detail and validate quote status is booked"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def quotes = json_response_holder.quotes;

String quoteID = context.expand('${agent give quote to traveller#quoteid}');
String price = context.expand('${agent give quote to traveller#price}');
String destination = json_response_holder.to_loc;
messageExchange.modelItem.testCase.setPropertyValue("destination",destination);
boolean isQuoteFound = false;
for (quote in quotes){
	if(quote.id==quoteID.toInteger() &amp;&amp; quote.price==price.toInteger() &amp;&amp; quote.status==8){
	messageExchange.modelItem.testCase.setPropertyValue("currency",quote.currency);
	messageExchange.modelItem.testCase.setPropertyValue("agentname",quote.user.username);		
		isQuoteFound =  true;
		break;
	}	
}

assert isQuoteFound==true : "quoteID "+quoteID +" are not present in response quotes detaile "+ quotes
</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="d6176990-0894-4497-b407-3505c582b8e6" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="rtripId" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="include_quotes" value="true"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="version" value="v2"/>
</con:parameters><con:parameterOrder><con:entry>rtripId</con:entry><con:entry>version</con:entry><con:entry>include_quotes</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>number_of_days</con:name><con:value>4-6</con:value></con:property><con:property><con:name>per_page</con:name><con:value>50</con:value></con:property><con:property><con:name>activity</con:name><con:value>5,3</con:value></con:property><con:property><con:name>months</con:name><con:value>4-6</con:value></con:property><con:property><con:name>price_ranges</con:name><con:value>0-10000</con:value></con:property><con:property><con:name>destination_type</con:name><con:value>international</con:value></con:property><con:property><con:name>price_ranges_encoded</con:name><con:value>0-10000</con:value></con:property><con:property><con:name>activity_encoded</con:name><con:value>5%2C3</con:value></con:property><con:property><con:name>months_encoded</con:name><con:value>4-6</con:value></con:property><con:property><con:name>currency</con:name><con:value>Rupee</con:value></con:property><con:property><con:name>destination</con:name><con:value>Thailand</con:value></con:property><con:property><con:name>agentname</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>address</con:name><con:value>80/167 Moo 9, Nongprue, Banglamung Pattaya - 20150
, Thailand</con:value></con:property><con:property><con:name>category</con:name><con:value>4</con:value></con:property><con:property><con:name>city</con:name><con:value>Pattaya</con:value></con:property><con:property><con:name>city_id</con:name><con:value>26357</con:value></con:property><con:property><con:name>d_id</con:name><con:value>2422243</con:value></con:property><con:property><con:name>img</con:name><con:value>w_300/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861507/original/4901399_63_b_w.jpg</con:value></con:property><con:property><con:name>name</con:name><con:value>Centara Nova Hotel &amp; Spa Pattaya</con:value></con:property><con:property><con:name>picture</con:name><con:value>w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861507/original/4901399_63_b_w.jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861508/original/4901399_87_b_w.jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861509/original/4901399_91_b_w.jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861510/original/centara-nova-hotel-spa_(1).jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861511/original/centara-nova-hotel-spa_(2).jpg</con:value></con:property></con:properties></con:testCase><con:testCase id="ef56f74a-c914-48ae-b942-bb8a9d1183ce" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User Reject The Quote" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="loggedIn user rquest a quote" id="e10d4a40-e405-421b-aeeb-8977cc0b9b1f"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>2040cc92-e9d4-4517-a063-39395e85cdb8</con:targetTestCase><con:properties><con:property><con:name>number_of_days</con:name><con:value>${#TestCase#number_of_days}</con:value></con:property><con:property><con:name>per_page</con:name><con:value>${#TestCase#per_page}</con:value></con:property><con:property><con:name>activity</con:name><con:value>${#TestCase#activity}</con:value></con:property><con:property><con:name>months</con:name><con:value>${#TestCase#months}</con:value></con:property><con:property><con:name>price_ranges</con:name><con:value>${#TestCase#price_ranges}</con:value></con:property><con:property><con:name>destination_type</con:name><con:value>${#TestCase#destination_type}</con:value></con:property><con:property><con:name>activity_encoded</con:name><con:value>${#TestCase#activity_encoded}</con:value></con:property><con:property><con:name>price_ranges_encoded</con:name><con:value>${#TestCase#price_ranges_encoded}</con:value></con:property><con:property><con:name>months_encoded</con:name><con:value>${#TestCase#months_encoded}</con:value></con:property><con:property><con:name>destination_id</con:name><con:value>57</con:value></con:property><con:property><con:name>destination_name</con:name></con:property><con:property><con:name>selected_package_id</con:name></con:property><con:property><con:name>selected_package_name</con:name></con:property><con:property><con:name>selected_package_price_total</con:name></con:property><con:property><con:name>selected_package_headline</con:name></con:property><con:property><con:name>selected_package_days</con:name></con:property><con:property><con:name>selected_package_nights</con:name></con:property><con:property><con:name>selected_package_cities</con:name></con:property><con:property><con:name>destinations</con:name></con:property><con:property><con:name>destinations_encoded</con:name></con:property><con:property><con:name>destination_names</con:name></con:property><con:property><con:name>destination_names_encoded</con:name></con:property><con:property><con:name>start_date</con:name></con:property><con:property><con:name>RequestID</con:name><con:value>2612696</con:value></con:property><con:property><con:name>request_redirectUrl</con:name></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CkkiD3Nlc3Npb25faWQGOgZFVEkiJTVmNDA1MjUwMzNjYzRjYmY3ZDUxZmM2NmM5NGQ1Mzk1BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRVVDZUSmpMeTdYOTZsVThCQ1o2MG11BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVEkiGGFsbG93X2N1c3RvbWl6YXRpb24GOwBGaQPC3SdJIgpmbGFzaAY7AFRvOiVBY3Rpb25EaXNwYXRjaDo6Rmxhc2g6OkZsYXNoSGFzaAk6CkB1c2VkbzoIU2V0BjoKQGhhc2h9AEY6DEBjbG9zZWRGOg1AZmxhc2hlc3sGOhJydHJpcF9jcmVhdGVkVDoJQG5vdzA%3D--406a2c1c245d21ba6e6f783eb5a2246d28cfa074; path=/; HttpOnly</con:value></con:property><con:property><con:name>user_id</con:name></con:property></con:properties><con:returnProperties><con:entry>destination_id</con:entry><con:entry>RequestID</con:entry><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for destination hotel detail" id="58b45df9-4d81-487f-812d-192c18e34fc2"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/destinations/${loggedIn user rquest a quote#destination_id}/destination_hotel_images</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>Ia9dfDxP6ZJx2ivLDfModyD88YUQL1o9IZAkcpUrA+Q=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="get destination hotel list" id="16cd635d-fec0-4c30-9bcb-79d624e45553"><con:settings/><con:config service="DestinationHotelImages" resourcePath="/api/{api_version}/destinations/{destinationId}/destination_hotel_images" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="get destination hotel list" id="f00ef24d-81e4-44a7-b43f-423ab7721729" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for destination hotel detail#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/destinations/67/destination_hotel_images.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="69d48784-f9f6-4d46-b41f-4e97a941b7af" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="7d45352f-9592-4e9d-a41f-cafe6b72a7f2" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def hotels= json_response_holder.hotel_images;
for (def hotel in hotels){
	messageExchange.modelItem.testCase.setPropertyValue("address",hotel.address);
	messageExchange.modelItem.testCase.setPropertyValue("category",String.valueOf(hotel.category));
	messageExchange.modelItem.testCase.setPropertyValue("city",hotel.city);
	messageExchange.modelItem.testCase.setPropertyValue("city_id",String.valueOf(hotel.city_id));
	messageExchange.modelItem.testCase.setPropertyValue("d_id",String.valueOf(hotel.d_id));
	messageExchange.modelItem.testCase.setPropertyValue("img",hotel.img);
	messageExchange.modelItem.testCase.setPropertyValue("name",hotel.name);
	messageExchange.modelItem.testCase.setPropertyValue("picture",hotel.pictures);
	break;

}
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="destinationId" value="${loggedIn user rquest a quote#destination_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>destinationId</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="admin tag agent with trip" id="df051b9d-ad8a-4aea-9b6c-4872c95a3908"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>16865839-07a3-4d5d-aff3-bc09595f8bf3</con:targetTestCase><con:properties><con:property><con:name>Agent_TagID</con:name><con:value>521</con:value></con:property><con:property><con:name>request_id</con:name><con:value>${loggedIn user rquest a quote#requestID}</con:value></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTUwZDk2M2M1ZWRkNTg0YmZjZDMzMWQwN2JhYTY0NzlhBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA06VC0kiIiQyYSQxMCRJWDBpRG9HLm5aSWRmR1ptbFNXRC9PBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--9d888c7504a220cb6a9a7822bf270664405b5fd8; path=/; HttpOnly</con:value></con:property></con:properties><con:returnProperties><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="agent give quote to traveller" id="9bfc1135-76f6-4e25-be45-cc620113f168"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5794d198-7055-4330-be4a-67978cc6ef03</con:targetTestCase><con:properties><con:property><con:name>user_id</con:name></con:property><con:property><con:name>auth_key</con:name></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWZiMzhmMGQ1NzBlOGU5OWY2YmE2ZGE5MGJkNzYxZTljBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA02VC0kiIiQyYSQxMCRJa3hSLk02Sm9aYmhKZm9DTVZMZ0guBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--09861f60ddd0f16f0c4c0343f60a8e0337ce7687; path=/; HttpOnly</con:value></con:property><con:property><con:name>user_email</con:name></con:property><con:property><con:name>user_password</con:name></con:property><con:property><con:name>request_id</con:name><con:value>${loggedIn user rquest a quote#requestID}</con:value></con:property><con:property><con:name>Agent_TagID</con:name><con:value>521</con:value></con:property><con:property><con:name>quoteid</con:name><con:value>4807332</con:value></con:property><con:property><con:name>quoteincl</con:name></con:property><con:property><con:name>traveldays</con:name></con:property><con:property><con:name>saveinclusions</con:name></con:property><con:property><con:name>price</con:name><con:value>32430</con:value></con:property><con:property><con:name>hotelnames</con:name><con:value>${#TestCase#name}</con:value></con:property><con:property><con:name>hotelcityname</con:name><con:value>${#TestCase#city}</con:value></con:property><con:property><con:name>hotelcityid</con:name><con:value>${#TestCase#city_id}</con:value></con:property><con:property><con:name>hoteldetail</con:name></con:property><con:property><con:name>excluded</con:name></con:property><con:property><con:name>included</con:name></con:property></con:properties><con:returnProperties><con:entry>Cookie</con:entry><con:entry>quoteid</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for get quote detail" id="4b2ed878-2b33-44ce-b069-b1a58df03524"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/${loggedIn user rquest a quote#RequestID}?include_quotes=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>HojwDR6w4VK9itjzYUbn5exx3lGIcceRV/aygrYXP3s=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user view request detail" id="dc139614-3a08-482a-9582-f41e96a49462"><con:settings/><con:config service="GetRequestDetail" resourcePath="/api/{version}/requested_trips/{rtripId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user view request detail" id="3bb87632-a6dc-4ec6-a6d6-0d9edb486313" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for get quote detail#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1838358</con:originalUri><con:assertion type="GroovyScriptAssertion" id="bfa7c350-0a50-471d-9c61-269f35459f60" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def quotes = json_response_holder.quotes;

String quoteID = context.expand('${agent give quote to traveller#quoteid}');
String price = context.expand('${agent give quote to traveller#price}');
boolean isQuoteFound = false;
for (quote in quotes){
	if(quote.id==quoteID.toInteger() &amp;&amp; quote.price==price.toInteger()){
		isQuoteFound =  true;
		break;
	}	
}

assert isQuoteFound==true : "quoteID "+quoteID +" are not present in response quotes detaile "+ quotes
</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="d6176990-0894-4497-b407-3505c582b8e6" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="rtripId" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="include_quotes" value="true"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="version" value="v2"/>
</con:parameters><con:parameterOrder><con:entry>rtripId</con:entry><con:entry>version</con:entry><con:entry>include_quotes</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="again get the hash for set quote status detail" id="ab2ce092-aa8d-453c-9315-990502d11109"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/requested_trips/${loggedIn user rquest a quote#RequestID}/quotes/${agent give quote to traveller#quoteid}/statusChange?state=8&amp;quote_decline_reason=2&amp;request=decline</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>lFdGwK8fq7E4szbkCdiLnpVdmpMTAQeUHaiL37t5IT0=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user cancel the quote" id="736d0474-9fdd-41bf-ad64-190951009a9b"><con:settings/><con:config service="SetStatusOfQuote" resourcePath="/api/v1/requested_trips/{requested_trip_id}/quotes/{quote_id}/statusChange" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user cancel the quote" id="22a0bfba-34d9-4651-b664-c2b5ce6edd42" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${again get the hash for set quote status detail#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1840799/statusChange</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8a48e4c6-a379-4a2a-9a29-632c32ea6a2a" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="bedb9a4a-ccf0-4a32-8381-3f6809b84273" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def successmessage = json_response_holder.success;



assert (successmessage=="Quote has been declined") : "message should be Quote has been declined  bit it is "+successmessage
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="quote_decline_reason" value="2"/>
  <con:entry key="request" value="decline"/>
  <con:entry key="requested_trip_id" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="state" value="8"/>
  <con:entry key="quote_id" value="${agent give quote to traveller#quoteid}"/>
</con:parameters><con:parameterOrder><con:entry>requested_trip_id</con:entry><con:entry>quote_id</con:entry><con:entry>state</con:entry><con:entry>quote_decline_reason</con:entry><con:entry>request</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="user again get the hash for get quote detail" id="5fad89b1-9fdc-4d78-8362-49ad35d25b97"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/${loggedIn user rquest a quote#RequestID}?include_quotes=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>HojwDR6w4VK9itjzYUbn5exx3lGIcceRV/aygrYXP3s=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="and user view request detail to check quote rejection detail" id="b7142ce1-17c6-47e9-b024-312a20d34b85"><con:settings/><con:config service="GetRequestDetail" resourcePath="/api/{version}/requested_trips/{rtripId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="and user view request detail to check quote rejection detail" id="3bb87632-a6dc-4ec6-a6d6-0d9edb486313" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${user again get the hash for get quote detail#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1838358</con:originalUri><con:assertion type="GroovyScriptAssertion" id="bfa7c350-0a50-471d-9c61-269f35459f60" name="get request detail and validate quote status is booked"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def quotes = json_response_holder.quotes;

String quoteID = context.expand('${agent give quote to traveller#quoteid}');
String price = context.expand('${agent give quote to traveller#price}');
String destination = json_response_holder.to_loc;
messageExchange.modelItem.testCase.setPropertyValue("destination",destination);
boolean isQuoteFound = false;
for (quote in quotes){
	if(quote.id==quoteID.toInteger() &amp;&amp; quote.price==price.toInteger() &amp;&amp; quote.status==8){
	messageExchange.modelItem.testCase.setPropertyValue("currency",quote.currency);
	messageExchange.modelItem.testCase.setPropertyValue("agentname",quote.user.username);		
		isQuoteFound =  true;
		break;
	}	
}

assert isQuoteFound==true : "quoteID "+quoteID +" are not present in response quotes detaile "+ quotes
</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="d6176990-0894-4497-b407-3505c582b8e6" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="rtripId" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="include_quotes" value="true"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="version" value="v2"/>
</con:parameters><con:parameterOrder><con:entry>rtripId</con:entry><con:entry>version</con:entry><con:entry>include_quotes</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>number_of_days</con:name><con:value>4-6</con:value></con:property><con:property><con:name>per_page</con:name><con:value>50</con:value></con:property><con:property><con:name>activity</con:name><con:value>5,3</con:value></con:property><con:property><con:name>months</con:name><con:value>4-6</con:value></con:property><con:property><con:name>price_ranges</con:name><con:value>0-10000</con:value></con:property><con:property><con:name>destination_type</con:name><con:value>international</con:value></con:property><con:property><con:name>price_ranges_encoded</con:name><con:value>0-10000</con:value></con:property><con:property><con:name>activity_encoded</con:name><con:value>5%2C3</con:value></con:property><con:property><con:name>months_encoded</con:name><con:value>4-6</con:value></con:property><con:property><con:name>currency</con:name><con:value>Rupee</con:value></con:property><con:property><con:name>destination</con:name><con:value>Thailand</con:value></con:property><con:property><con:name>agentname</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>address</con:name><con:value>80/167 Moo 9, Nongprue, Banglamung Pattaya - 20150
, Thailand</con:value></con:property><con:property><con:name>category</con:name><con:value>4</con:value></con:property><con:property><con:name>city</con:name><con:value>Pattaya</con:value></con:property><con:property><con:name>city_id</con:name><con:value>26357</con:value></con:property><con:property><con:name>d_id</con:name><con:value>2422243</con:value></con:property><con:property><con:name>img</con:name><con:value>w_300/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861507/original/4901399_63_b_w.jpg</con:value></con:property><con:property><con:name>name</con:name><con:value>Centara Nova Hotel &amp; Spa Pattaya</con:value></con:property><con:property><con:name>picture</con:name><con:value>w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861507/original/4901399_63_b_w.jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861508/original/4901399_87_b_w.jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861509/original/4901399_91_b_w.jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861510/original/centara-nova-hotel-spa_(1).jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861511/original/centara-nova-hotel-spa_(2).jpg</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="a5affa82-ccfa-49ea-a05e-7a7e69ee3ae7" name="QuoteScenarios"><con:settings/><con:savedRecentRuns>1</con:savedRecentRuns><con:runType>SEQUENTIAL</con:runType><con:testCase id="9e6946b2-0cce-4ca3-b18f-fb7bd016bb95" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="ExploreDestinationInfo" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:savedRecentRuns>1</con:savedRecentRuns><con:testStep type="calltestcase" name="Given user login to application" id="475a0a49-0667-4e75-9f3f-1c6aa51c12c9"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5ab66c45-5d18-4dcb-8819-795ff4a3c798</con:targetTestCase><con:properties><con:property><con:name>user_id</con:name><con:value>953268</con:value></con:property><con:property><con:name>auth_key</con:name><con:value>75c78998026011e7904f06304046af90</con:value></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTMyMDgzZTM2MWNiNzZmODE3NjU2NWQ5OTRlMTcyZmRhBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRVVDZUSmpMeTdYOTZsVThCQ1o2MG11BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--da5d37c69ba1da08aed06dd80912e881ae585816; path=/; HttpOnly</con:value></con:property></con:properties><con:returnProperties><con:entry>user_id</con:entry><con:entry>auth_key</con:entry><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="And get the hash token" id="2f92e4b3-1344-4216-acfd-4487cce8432b"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/destinations/hot_destination_list.json</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>vawtJyqOTLXremm/u0f6tNzY7Sz9sjzyUYnn6GxYV0I=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="And get all hot destinations to travel" id="90b2c76a-32c7-4ea5-b72a-d4e7222a53b8"><con:settings/><con:config service="GetAllHOTDestinations" resourcePath="/api/{api_version}/destinations/hot_destination_list.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And get all hot destinations to travel" id="395d5b54-e258-457a-bd30-b9a40fa6c672" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${And get the hash token#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://null///api/v1/destinations/hot_destination_list.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="698ed767-8499-454c-9d97-cc48dc2ce753" name="Success status - 200"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="4d8369f6-d14b-4bbb-af71-e5c3dc2a5b9e" name="Select the random destination"><con:configuration><scriptText>import groovy.json.JsonSlurper;
import java.util.Random;


String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def destination_ids = json_response_holder.data.id;
int total_destinations = destination_ids.size();

//Get the random destination.
Random rand = new Random();
int randomindex = rand.nextInt((total_destinations - 0) + 1) + 0;
log.info randomindex;
String selected_destination_name = json_response_holder.data.name[randomindex];

String selected_destination_id = destination_ids.get(randomindex).toString();

messageExchange.modelItem.testCase.setPropertyValue("selected_destination_name",selected_destination_name);
messageExchange.modelItem.testCase.setPropertyValue("selected_destination_id",selected_destination_id);

</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="api_version" value="v1" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="Again get the hash token" id="d9f8a2eb-3c07-47cf-89d2-b1128504f73c"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v4/get_filtered_results?result_type=package_catalog&amp;destination=${#TestCase#selected_destination_id}</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>lG7lxuv+DMnIa0sUuEOM/Btrvkvk9kJByziv1puqpvk=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Get the filtered list for the destination selected" id="f813a3f3-7640-4263-b42a-884420c75669"><con:settings/><con:config service="GetFilteredResultsForDestination" resourcePath="/api/{api_version}/get_filtered_results" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get the filtered list for the destination selected" id="a50b2aaf-57c9-4b82-8e15-0a5d72b68704" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${Again get the hash token#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v4/get_filtered_results</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="96b9f461-25ed-4d0f-8bab-429614cbbca2" name="Success status - 200"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="96c696d8-81ca-4b47-81ee-ba1b8ffabc4f" name="Get the package details"><con:configuration><scriptText>import groovy.json.JsonSlurper;
import java.util.Random;


String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);
def packages_id = json_response_holder.packages.id;
int total_packages=packages_id.size();

Random rand = new Random();
if(total_packages == 0){
	assert (json_response_holder.result_type == "package_catalog");

}else{
int randomindex = rand.nextInt((total_packages - 0) + 1) + 0;
String selected_package_id =packages_id.get(randomindex).toString();
String package_name=json_response_holder.packages.set_url[randomindex].toString();
String package_price=json_response_holder.packages.price_total[randomindex].toString();
String package_cities=json_response_holder.packages.cities[randomindex].toString();


assert (json_response_holder.result_type == "package_catalog");

messageExchange.modelItem.testCase.setPropertyValue("selected_package_id",selected_package_id);
messageExchange.modelItem.testCase.setPropertyValue("selected_package_headline",package_name);
messageExchange.modelItem.testCase.setPropertyValue("selected_package_price_total",package_price);
messageExchange.modelItem.testCase.setPropertyValue("selected_package_cities",package_cities);
}
//String sdf=json_response_holder.packages.destinations.id;
//def destination_count = json_response_holder.packages.destinations.id[0];
 //for(int i=0;i&lt;destination_count.size();i++)
 //{
 //if(destination_count[i]==selected_destination_id)
 //log.info destination_count[i];
 //}</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="destination" value="${#TestCase#selected_destination_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>result_type</con:entry><con:entry>destination</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="Get the TT-Mobile to get cities info" id="9580dd2d-dd45-48da-8dde-30c396145522"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/destinations/${#TestCase#selected_destination_id}/cities.json</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>vei/Mvw9lV13yKZk0FVVOGdsWKACHhojJciIihba/zc=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="And get the cities info for a selected destination" id="4be49a92-2877-41a4-87ce-f9b572db41cd"><con:settings/><con:config service="GetCitiesForADestination" resourcePath="/api/{apiVersion}/destinations/{destination_id}/cities.json" methodName="Cities.json" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And get the cities info for a selected destination" id="af13f92c-c918-4985-b355-8506a94a38e7" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="${Get the TT-Mobile to get cities info#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://null///api/v1/destinations/destination_id/cities.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="9abfe288-d85a-4e5a-b618-d29dfe4d944e" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="2e52fb9b-3463-4d63-979d-a3a4f756b70c" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);


int citiescount = json_response_holder.id.size();
for(int i = 0;i &lt; citiescount; i++){
	ArrayList allnodes = new ArrayList();
	json_response_holder[i].each{
		allnodes.add(it.getKey());
	}
	assert("id" in allnodes);
	assert("latitude" in allnodes);
	assert("longitude" in allnodes);
	assert("name" in allnodes);
}


</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="apiVersion" value="v1"/>
  <con:entry key="destination_id" value="${#TestCase#selected_destination_id}"/>
</con:parameters><con:parameterOrder><con:entry>apiVersion</con:entry><con:entry>destination_id</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="Again get the hash" id="6c40f108-36db-4394-adc2-ef43aef988fe"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/destinations/${#TestCase#selected_destination_id}/destination_attraction_list.json</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>4nOnd7/eEooFcvOJRmeYsV+4mIxk3r2yaGz2bb6Tzmg=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Get Attaractions for the destination" id="04a5d8d1-5bea-4d37-9b91-b1f3430a9487"><con:settings/><con:config service="AttaractionListsByDestination" resourcePath="/api/{api_version}/destinations/{destination_id}/destination_attraction_list.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get Attaractions for the destination" id="f3033d25-2f50-4916-98d3-7bce87e60748" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}}"/>
  <con:entry key="TT-Mobile" value="${Again get the hash#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://null///api/v2/destinations/67/destination_attraction_list.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5e671be3-9e63-4820-b370-7b256debeec1" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="e9b9fd54-2051-488f-85f4-10ed9c453435" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

int attarctions = json_response_holder.attractions.name.size();
for(int i = 0;i &lt; attarctions;i++){
ArrayList allnodes = new ArrayList();
json_response_holder.attractions[i].each{
	allnodes.add(it.getKey());
}

assert("city_ranking" in allnodes);
assert("city_name" in allnodes);
assert("city_id" in allnodes);
assert("name" in allnodes);
assert("l_img" in allnodes);
assert("m_img" in allnodes);
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="destination_id" value="${#TestCase#selected_destination_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>destination_id</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="Get the hash key for hotel images" id="238a0058-0ec7-420f-8d31-7270ef0e3563"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/destinations/${#TestCase#selected_destination_id}/destination_hotel_images</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>eu/fgyJmCtpitlJqEHjnHFIGoMSTU+kIbHXak10tV4E=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Get the hotel images for selected destination" id="db48df19-f607-4264-8487-64066d1b4cf2"><con:settings/><con:config service="DestinationHotelImages" resourcePath="/api/{api_version}/destinations/{destinationId}/destination_hotel_images" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get the hotel images for selected destination" id="f00ef24d-81e4-44a7-b43f-423ab7721729" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${Get the hash key for hotel images#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/destinations/67/destination_hotel_images.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4e727cb0-d2c0-49fb-90ab-e9c111651ee4" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="b045b925-2a92-4298-8ccc-72a74c1ffe34" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

int hotelimages = json_response_holder.hotel_images.d_id.size();

for(int i = 0;i &lt; hotelimages;i++){
	ArrayList allnodes = new ArrayList();
	json_response_holder.hotel_images[i].each{
		allnodes.add(it.getKey());
	}
	assert("address" in allnodes);
	assert("category" in allnodes);
	assert("city" in allnodes);
	assert("city_id" in allnodes);
	assert("d_id" in allnodes);
	assert("img" in allnodes);
	assert("name" in allnodes);
	assert("pictures" in allnodes);
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="destinationId" value="${#TestCase#selected_destination_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>destinationId</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="Get the hash key for testimonials" id="e689c921-1449-4e2a-a173-4b319b3bff82"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/destinations/${#TestCase#selected_destination_id}/destination_top_testimonials.json?page_number=1</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>KDThQjvhQJ4dXBIZtuN7HqmsluHE6tvPxgm2I15kT58=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Get the testimonials for the destination" id="481d82d7-aae1-48eb-8b80-38ae785b54c4"><con:settings/><con:config service="DestinationTopTestimonials" resourcePath="/api/{api_version}/destinations/{destinationId}/destination_top_testimonials.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get the testimonials for the destination" id="4ab32d67-b8f7-43ae-8d19-713dbbbdee36" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${Get the hash key for testimonials#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v1/destinations/67/destination_top_testimonials.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="894ec2fc-f4a7-4a04-86c8-3f45ffc0c747" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="2711d3f4-06ce-4259-bcb2-8dfbc2ed2d02" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

int testimonials = json_response_holder.author.size();

for(int i = 0; i &lt; testimonials;i++){
	ArrayList allnodes = new ArrayList();
	json_response_holder[i].each{
		allnodes.add(it.getKey());
	}
	assert("author" in allnodes);
	assert("title" in allnodes);
	assert("rating" in allnodes);
	assert("author_pic" in allnodes);assert("user_location" in allnodes);
	assert("testimonial_body" in allnodes);
	assert("created_at" in allnodes);
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="destinationId" value="${#TestCase#selected_destination_id}"/>
  <con:entry key="page_number" value="1"/>
</con:parameters><con:parameterOrder><con:entry>destinationId</con:entry><con:entry>page_number</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="Get the hash key for destination extend" id="655a4df4-9bf8-4314-973f-2b8f4e32a0ca"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/destinations/${#TestCase#selected_destination_id}/get_destinations_extend.json</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>Atph8qj4FHcaTnDo7FvYIz3ce/FUQsw9ybiS8urmy+w=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Get the destination extends" id="b0400034-ee96-407d-8b14-3420720a7c76"><con:settings/><con:config service="GetDestinationExtend" resourcePath="/api/{api_version}/destinations/{destinationId}/get_destinations_extend.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get the destination extends" id="0f32e8ff-1fc9-42c2-8ca5-ee7167455128" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${Get the hash key for destination extend#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/destinations/67/get_destinations_extend.json</con:originalUri><con:assertion type="GroovyScriptAssertion" id="0199758e-7dfc-482e-9bb5-f1b89341c265" name="Script Assertion"><con:configuration><scriptText>
import groovy.json.JsonSlurper;
import java.util.Random;


String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);
 String error_message=json_response_holder.error.toString();
  String airport_city_name=json_response_holder.airport_city.toString();
String airport_code_name=json_response_holder.airport_code.toString();
String airport_name=json_response_holder.airport_name.toString();

  if(error_message== "destinations_extend not found")
  {
  		messageExchange.modelItem.testCase.setPropertyValue("airport_city_name","");
		messageExchange.modelItem.testCase.setPropertyValue("airport_name","");
		messageExchange.modelItem.testCase.setPropertyValue("airport_code_name","");
  }else
 
  {
  	messageExchange.modelItem.testCase.setPropertyValue("airport_city_name",airport_city_name);
	messageExchange.modelItem.testCase.setPropertyValue("airport_name",airport_name);
	messageExchange.modelItem.testCase.setPropertyValue("airport_code_name",airport_code_name);
  }</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="destinationId" value="${#TestCase#selected_destination_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>destinationId</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="Get the hash key to view package details" id="a426099e-0753-4fc0-8095-88573f414e7a"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v3/tour_packages/${#TestCase#selected_package_headline}</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>f6RjZHTHlRzTNnkfEI9/t2DFkxLh6g2Pf949qhG5kLE=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Select and view the package" id="097ba6ac-d79f-4933-9afc-b5cbd7dcea69"><con:settings/><con:config service="ViewPackage" resourcePath="/api/{api_version}/tour_packages/{package_headline}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Select and view the package" id="fccd7a70-c8f4-439c-ba58-8d6378c7da35" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${Get the hash key to view package details#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v3/tour_packages/package_headline</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1a7e6895-5a68-47d4-9f80-5142ab01fd30" name="Status - 200"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="5a1eff6c-9738-454c-b98c-b2fc5c6acb27" name="Verify &amp; Get the package details"><con:configuration><scriptText>import groovy.json.JsonSlurper;
import java.util.Random;


String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

int inclusions = json_response_holder.inclusions.key.size();

assert(inclusions != 0);

String selected_package_id = context.expand('${#TestCase#selected_package_id}');
String package_id_in_response = json_response_holder.id.toString();

assert(selected_package_id == package_id_in_response);

Float selected_package_price_total = Float.parseFloat(context.expand('${#TestCase#selected_package_price_total}'));
Float package_total_price = json_response_holder.price_total;

log.info package_total_price;

assert(selected_package_price_total == package_total_price);

String selected_package_cities = context.expand('${#TestCase#selected_package_cities}').toLowerCase();
String package_cities = json_response_holder.cities.toLowerCase();

assert(selected_package_cities == package_cities);

String destinations = json_response_holder.destinations.id.toString();
String destination_names = json_response_holder.destinations.name.toString();

destinations = destinations.replace("[","");
destinations = destinations.replace("]","");
destinations = destinations.replace(" ","");

String destination_encoded = destinations.replaceAll(",","%2C");

messageExchange.modelItem.testCase.setPropertyValue("destinations",destinations);
messageExchange.modelItem.testCase.setPropertyValue("destinations_encoded",destination_encoded);

destination_names = destination_names.replace("[","");
destination_names = destination_names.replace("]","");
destination_names = destination_names.replace(" ","");

messageExchange.modelItem.testCase.setPropertyValue("destination_names",destination_names);

</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="package_headline" value="${#TestCase#selected_package_headline}"/>
</con:parameters><con:parameterOrder><con:entry>package_headline</con:entry><con:entry>api_version</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="Get the hash key to generate form 1" id="54818456-be0a-4edf-83d4-d5e9fa78d9db"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/requested_trips/new.json?destination_ids%5B%5D=${#TestCase#destinations_encoded}</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>YiMyv/wGzebK1j/dXY6eDGvNpu0fTTNMMwifD8J2NVU=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Load the form 1 with pre populated data" id="6f0afa23-9065-4ac9-b6e4-f57e083d0ac9"><con:settings/><con:config service="NewRequestForm1" resourcePath="/api/{api_version}/requested_trips/new.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Load the form 1 with pre populated data" id="196f7986-e711-407a-99fc-68aac4c6148a" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${Get the hash key to generate form 1#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v1/requested_trips/new.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="91fcc042-e18f-43aa-8094-8f2b6c518c65" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="destination_ids[]" value="${#TestCase#destinations}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>destination_ids[]</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>selected_destination_name</con:name><con:value>Ranikhet</con:value></con:property><con:property><con:name>selected_destination_id</con:name><con:value>212</con:value></con:property><con:property><con:name>selected_package_id</con:name><con:value>2340</con:value></con:property><con:property><con:name>selected_package_name</con:name><con:value>Gems Of Himachal Family Package From Chandigarh</con:value></con:property><con:property><con:name>selected_package_price_total</con:name><con:value>10060</con:value></con:property><con:property><con:name>selected_package_headline</con:name><con:value>2nights-3days-gangtok-family-vacation</con:value></con:property><con:property><con:name>selected_package_days</con:name><con:value>10</con:value></con:property><con:property><con:name>selected_package_nights</con:name><con:value>9</con:value></con:property><con:property><con:name>selected_package_cities</con:name><con:value>gangtok</con:value></con:property><con:property><con:name>destinations</con:name><con:value>171,775,177</con:value></con:property><con:property><con:name>destinations_encoded</con:name><con:value>171%2C775%2C177</con:value></con:property><con:property><con:name>destination_names</con:name><con:value>Sikkim-Gangtok-Darjeeling,Sikkim,WestBengal</con:value></con:property><con:property><con:name>request_id</con:name><con:value>953366</con:value></con:property><con:property><con:name>airport_city_name</con:name><con:value/></con:property><con:property><con:name>airport_code_name</con:name><con:value/></con:property><con:property><con:name>airport_name</con:name><con:value/></con:property><con:property><con:name>select_package_headline</con:name><con:value>Alluring Mauritius 7 Days Honeymoon</con:value></con:property><con:property><con:name>select_package_price_</con:name><con:value>Spectacular Mauritius Holiday Package With Casela Nature Park</con:value></con:property><con:property><con:name>select_package_price_total</con:name><con:value>29885</con:value></con:property><con:property><con:name>selected_package_price_cities</con:name><con:value>paro->thimphu</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>4be49a92-2877-41a4-87ce-f9b572db41cd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9580dd2d-dd45-48da-8dde-30c396145522</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="2040cc92-e9d4-4517-a063-39395e85cdb8" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="LoggedIn_User_Request_A_Quote" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:savedRecentRuns>1</con:savedRecentRuns><con:testStep type="calltestcase" name="Given user login to application" id="89dd6d50-1e78-486b-a570-86d722abdc35"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5ab66c45-5d18-4dcb-8819-795ff4a3c798</con:targetTestCase><con:properties><con:property><con:name>user_id</con:name><con:value>953268</con:value></con:property><con:property><con:name>auth_key</con:name><con:value>75c78998026011e7904f06304046af90</con:value></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWU3ZWYyYWE3NmZjYTQ5ZjA2OGExNzExYzA4NjgzMGU0BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRVVDZUSmpMeTdYOTZsVThCQ1o2MG11BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--c4d8572ddd8f611d7aa5722ceddb4c92de43d849; path=/; HttpOnly</con:value></con:property></con:properties><con:returnProperties><con:entry>user_id</con:entry><con:entry>auth_key</con:entry><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="When user get the TT-MObile token for app config" id="bf642e40-4134-4ea7-9e18-a91c806ffe5b"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/app_config.json?user_id=${Given user login to application#user_id}</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>ox011eEu0DMfX4VTMNZ5/oSGGGSsNBFbj5wdkfcIVVw=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then app config is loaded successfully for logged in user" id="9753bff5-a21d-456b-ab91-0d7088233024"><con:settings/><con:config service="AppConfig" resourcePath="/api/{api_version}/app_config.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then app config is loaded successfully for logged in user" id="8102f3b4-c7de-4700-a705-9a8e6737f51b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${When user get the TT-MObile token for app config#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/app_config.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="dafe56dc-2501-4b29-a331-3c20bb19ebf5" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="b2755ad2-c391-41a3-b86b-36a6e6a04a92" name="Verify response details"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

//verify if all nodes are present
def is_coupon_enabled = json_response_holder.is_coupon_enabled;
def is_referer_enabled = json_response_holder.is_referer_enabled;
def isFabMenuEnabled = json_response_holder.isFabMenuEnabled;
def referral_text = json_response_holder.referral_text;
def referral_share_text = json_response_holder.referral_share_text;
def helpline = json_response_holder.helpline;
def discount_text = json_response_holder.discount_text;
def show_package_discount = json_response_holder.show_package_discount;

assert(is_coupon_enabled != null);
assert(is_referer_enabled != null);
assert(isFabMenuEnabled != null);
assert(referral_text != null);
assert(referral_share_text != null);
assert(helpline != null);
assert(discount_text != null);
assert(show_package_discount != null);


</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="user_id" value="${Given user login to application#user_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>user_id</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="And when user get the TT-Mobile token for destination catalog" id="83eade8b-4ce5-4f12-9955-e9d3155ed4a7"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v3/metadata/filter?filter_type=destination_catalog</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>e5GMVxZkB8jx+9WRXNVoezudsbH8Ql45t8ppL6FjxOY=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then destination catalog is loaded successfully" id="1dd13e74-ec4c-4c19-b93e-05f53c0d8d3a"><con:settings/><con:config service="FilterType" resourcePath="/api/{api_version}/metadata/filter" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then destination catalog is loaded successfully" id="436ba333-2b44-4d4a-adc7-688847704b53" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${And when user get the TT-Mobile token for destination catalog#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v3/metadata/filter</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="89a55593-a85e-40ec-a8d8-ec9e0f0472ba" name="HTTP Status - 200"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="ceed6d1c-8a64-4112-8323-e673c7fd1db8" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

String filter_type = json_response_holder.filter_type;
assert(filter_type == "destination_catalog");

String[] filter_titles = json_response_holder.filters.title;

int filter_count = filter_titles.size();
assert(filter_count == 7);

assert("Destination type" in filter_titles);

assert("Month of travel" in filter_titles);

assert("Activities" in filter_titles);

assert("Duration(days)" in filter_titles);

assert("Budget (per person)" in filter_titles);

assert("Trip Type" in filter_titles);

assert("" in filter_titles);</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="filter_type" value="destination_catalog"/>
  <con:entry key="api_version" value="v3"/>
  <con:entry key="security_auth_token" value=""/>
</con:parameters><con:parameterOrder><con:entry>api_version</con:entry><con:entry>filter_type</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="And TT-Mobile token for filtered result is fetched" id="2a757282-ce44-43c1-9a6c-ca24be00cb04"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value><![CDATA[${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v4/get_filtered_results?days=${#TestCase#number_of_days}&per_page=${#TestCase#per_page}&result_type=destination_catalog&activity=${#TestCase#activity_encoded}&page_number=1&months=${#TestCase#months_encoded}&price_ranges=${#TestCase#price_ranges_encoded}&destination_type=${#TestCase#destination_type}]]></con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>XJqkiLRvuOWhDzBIsMtyho/bammLhs2s2I1RnuHs2kI=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="And user filter the search results to get appropriate destinations" id="3b22a528-5a70-4b66-9762-7cf1484e5c6f"><con:settings/><con:config service="FilterDestinationsCatalogSearchResults" resourcePath="/api/{api_version}/get_filtered_results" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And user filter the search results to get appropriate destinations" id="0684b8d0-f7d7-4119-899a-d47c06780a8f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${And TT-Mobile token for filtered result is fetched#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v4/get_filtered_results</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="2112e70d-164c-4a36-b6bd-73d0d1c450fd" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="d0d52a1a-6970-4cdc-a198-7ac994eeed59" name="Script Assertion"><con:configuration><scriptText><![CDATA[import groovy.json.JsonSlurper;
import java.util.Random;
// Get the json response holder.
String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

//verify the result type in response.
String result_type = json_response_holder.result_type;
assert(result_type == "destination_catalog");


//Verify if the budget in destination search result is in range specified by user. 

def min_budget = json_response_holder.destinations.min_b;
String price_ranges_given = context.expand('${#TestCase#price_ranges}');
String[] price_ranges = price_ranges_given.split(",");
int numberOfRanges = price_ranges.size();
Long min_range = Long.parseLong(price_ranges[0].split("-")[0]);
Long max_range = Long.parseLong(price_ranges[numberOfRanges-1].split("-")[1]);
for(def min_b in min_budget){
	assert(min_b >= min_range && min_b <= max_range);
}


int[] destination_ids = json_response_holder.destinations.id;
int total_destinations = destination_ids.size();

//verify if total number of destination diplayed per page is as specified(or in range)
int per_page_range = Integer.parseInt(context.expand('${#TestCase#per_page}'));
assert(total_destinations <= per_page_range && total_destinations != 0);


// Pick random destination from response to get into packages in next steps.

Random rand = new Random();
int randomindex = rand.nextInt((total_destinations - 0)) + 0;


log.info "randomindex : "+randomindex
String random_destination_id = json_response_holder.destinations.id[randomindex].toString();
String random_destinationname = json_response_holder.destinations.name[randomindex];
messageExchange.modelItem.testCase.setPropertyValue("destination_id",random_destination_id);
messageExchange.modelItem.testCase.setPropertyValue("destination_name",random_destinationname);
messageExchange.modelItem.testCase.testSuite.setPropertyValue("destination_name",random_destinationname);


 ]]></scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="months" value="${#TestCase#months}"/>
  <con:entry key="per_page" value="${#TestCase#per_page}"/>
  <con:entry key="days" value="${#TestCase#number_of_days}"/>
  <con:entry key="sort_by" value="relevance"/>
  <con:entry key="price_ranges" value="${#TestCase#price_ranges}"/>
  <con:entry key="destination_type" value="${#TestCase#destination_type}"/>
  <con:entry key="activity" value="${#TestCase#activity}"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
</con:parameters><con:parameterOrder><con:entry>days</con:entry><con:entry>per_page</con:entry><con:entry>result_type</con:entry><con:entry>activity</con:entry><con:entry>page_number</con:entry><con:entry>months</con:entry><con:entry>price_ranges</con:entry><con:entry>destination_type</con:entry><con:entry>sort_by</con:entry><con:entry>api_version</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="And when TT-Mobile token for package catalog is generated" id="9e58d09d-3d02-4e31-960a-eb9439f5a2b6"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v4/get_filtered_results?result_type=package_catalog&amp;destination=${#TestCase#destination_id}</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>Fqqa6U4nJQRr79K6ztN42z4UxmrXe58EppOMHd0IAHw=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user can select the package for a destination selected" id="44995975-00e2-4f3c-97a1-82cdaf0f0c60"><con:settings/><con:config service="PackageCatalogForADestination" resourcePath="/api/{api_version}/get_filtered_results" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user can select the package for a destination selected" id="609a0f5f-2282-4432-bf9b-fa6f91d85efd" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${And when TT-Mobile token for package catalog is generated#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v4/get_filtered_results</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c418620c-0930-46e8-8665-1637907ebc5f" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="4c4f49ff-534a-456e-9eec-4f5324c367ac" name="Verify &amp; Get package details"><con:configuration><scriptText>import groovy.json.JsonSlurper;
import java.util.Random;

// get the json response holder.
String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);


//verfiy the result type in response
String result_type = json_response_holder.result_type;
assert(result_type == "package_catalog");


String destination_name = context.expand('${#TestCase#destination_name}');
//verify total packges displayed should not be zero. 
int total_packages = json_response_holder.packages.id.size();
assert(total_packages != 0) : "No packages for destination " + destination_name;

//Verify inclusions are there in response

for(int i = 0;i &lt; total_packages; i++){
int inclusion_count = json_response_holder.packages.inclusions[i].key.size();
assert(inclusion_count != 0) : "Inclusion is not there for " + (i+1) + " package.";
}

//Pick up random package to continue further.
Random rand = new Random();
int randomindex = rand.nextInt((total_packages - 0) + 1) + 0;

String selected_package_id = json_response_holder.packages.id[randomindex].toString();
String selected_package_days = json_response_holder.packages.days[randomindex].toString();
String selected_package_nights = json_response_holder.packages.nights[randomindex].toString();
String selected_package_cities = json_response_holder.packages.cities[randomindex].toString();
String selected_package_name = json_response_holder.packages.name[randomindex].toString();
String selected_package_price_total = json_response_holder.packages.price_total[randomindex].toString();
String package_heading = json_response_holder.packages.set_url[randomindex].toString().toLowerCase();
messageExchange.modelItem.testCase.setPropertyValue("selected_package_id",selected_package_id);
messageExchange.modelItem.testCase.setPropertyValue("selected_package_name",selected_package_name);
messageExchange.modelItem.testCase.setPropertyValue("selected_package_price_total",selected_package_price_total);
messageExchange.modelItem.testCase.setPropertyValue("selected_package_headline",package_heading);
messageExchange.modelItem.testCase.setPropertyValue("selected_package_days",selected_package_days);
messageExchange.modelItem.testCase.testSuite.setPropertyValue("selected_package_days",selected_package_days);
messageExchange.modelItem.testCase.setPropertyValue("selected_package_nights",selected_package_nights);
messageExchange.modelItem.testCase.setPropertyValue("selected_package_cities",selected_package_cities);


// Also get the destinations from the package selected.

String destinations =  json_response_holder.packages.destinations[randomindex].id;
String destination_names = json_response_holder.packages.destinations[randomindex].name;
destinations = destinations.replaceAll(" ","");
destinations = destinations.replace("[","");
destinations = destinations.replaceAll("]","");
destination_names = destination_names.replaceAll(" ","");
destination_names = destination_names.replace("[","");
destination_names = destination_names.replaceAll("]","");
messageExchange.modelItem.testCase.setPropertyValue("destinations",destinations);
messageExchange.modelItem.testCase.setPropertyValue("destination_names",destination_names);

String destinations_encoded = destinations.replaceAll(",","%2C");
String destination_names_encoded = destination_names.replaceAll(",","%2C");
messageExchange.modelItem.testCase.setPropertyValue("destinations_encoded",destinations_encoded);
messageExchange.modelItem.testCase.setPropertyValue("destination_names_encoded",destination_names_encoded);








</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="api_version" value="v4"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="destination" value="${#TestCase#destination_id}"/>
</con:parameters><con:parameterOrder><con:entry>api_version</con:entry><con:entry>result_type</con:entry><con:entry>destination</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="And TT-Mobile token is fetched for package catalog filter" id="c1d8431a-d7f6-4f27-8138-d14607496ce8"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v3/metadata/filter?filter_type=package_catalog</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>5kzNPUqRIeIdjPADfWNOYdEHxCE6z1OgIZEEg1kyz3o=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="And package catalog filters get loaded in background" id="c8337410-2659-4689-95ea-7e93272df65b"><con:settings/><con:config service="FilterType" resourcePath="/api/{api_version}/metadata/filter" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And package catalog filters get loaded in background" id="436ba333-2b44-4d4a-adc7-688847704b53" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${And TT-Mobile token is fetched for package catalog filter#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v3/metadata/filter</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b1346a40-2687-413e-8080-95ef1e7d7398" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="ee5f4dee-0162-47c2-b3a5-050cfd572b62" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

String filter_type = json_response_holder.filter_type;

assert(filter_type == "package_catalog");

String[] filter_titles = json_response_holder.filters.title;

assert("Type of Destination" in filter_titles);
assert("Categories" in filter_titles);
assert("Duration(days)" in filter_titles);
assert("Budget perperson (In Rs.)" in filter_titles);
assert("Hotel Star Rating" in filter_titles);
assert("Activities" in filter_titles);
assert("" in filter_titles);


int number_of_filters = filter_titles.size();

for(int i = 0; i &lt; number_of_filters;i++){

if(filter_titles[i] == "Type of Destination"){
	String[] option_title = json_response_holder.filters.options[i].title;
	int number_of_options = option_title.size();
	assert(number_of_options == 2);
	assert("India" in option_title);
	assert("International" in option_title);
}
else if(filter_titles[i] == "Categories"){
	String[] option_title = json_response_holder.filters.options[i].title;
	int number_of_options = option_title.size();
	assert(number_of_options == 2);
	assert("Honeymoon" in option_title);
	assert("Family" in option_title);
}
else if(filter_titles[i] == "Duration(days)"){
	String[] option_title = json_response_holder.filters.options[i].title;
	int number_of_options = option_title.size();
	assert(number_of_options == 5);
	assert("1-3" in option_title);
	assert("4-6" in option_title);
	assert("7-9" in option_title);
	assert("10-12" in option_title);
	assert(">12" in option_title);
	
}
else if(filter_titles[i] == "Budget perperson (In Rs.)"){
	String[] option_title = json_response_holder.filters.options[i].title;
	int number_of_options = option_title.size();
	assert(number_of_options == 8);
	assert("Below 10,000" in option_title);
	assert("10,000 - 20,000" in option_title);
	assert("20,000 - 40,000" in option_title);
	assert("40,000 - 60,000" in option_title);
	assert("60,000 - 80,000" in option_title);
	assert("80,000 - 1 Lac" in option_title);
	assert("1 Lac - 2 Lac" in option_title);
	assert("Above 2 Lac" in option_title);
}
else if(filter_titles[i] == "Hotel Star Rating"){
	String[] option_title = json_response_holder.filters.options[i].title;
	int number_of_options = option_title.size();
	assert(number_of_options == 4);
	assert("5 Star" in option_title);
	assert("4 Star" in option_title);
	assert("3 Star" in option_title);
	assert("2 Star" in option_title);

}
else if(filter_titles[i] == "Activities"){
	String[] option_title = json_response_holder.filters.options[i].title;
	int number_of_options = option_title.size();
	assert(number_of_options == 5);
	assert("Adventure" in option_title);
	assert("Nature" in option_title);
	assert("Hill Station" in option_title);
	assert("Religious" in option_title);
	assert("Water Activities" in option_title);

}
else if(filter_titles[i] == ""){
	String[] option_title = json_response_holder.filters.options[i].title;
	String filter_name = json_response_holder.filters.param_name[i];
	assert(filter_name == "sort_by");
	
	int number_of_options = option_title.size();
	assert(number_of_options == 5);
	assert("Popularity" in option_title);
	assert("Price: Low To High" in option_title);
	assert("Price: High To Low" in option_title);
	assert("Duration: Low To High" in option_title);
	assert("Duration: High To Low" in option_title);

}

	
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="filter_type" value="package_catalog"/>
  <con:entry key="api_version" value="v3"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
</con:parameters><con:parameterOrder><con:entry>api_version</con:entry><con:entry>filter_type</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="And TT-Mobile token is fetched for get package review" id="fc74056a-f0c0-4392-9814-c25528e24b57"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v3/tour_packages/${#TestCase#selected_package_headline}/review?id=${#TestCase#selected_package_id}&amp;page_number=0</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>aCBl+R7hX3JqffaeCYC5DQSX7ITH9lJeXpu98lWEHb4=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user get package review" id="3ba3ed84-f93e-4095-a012-f3d4e31d2af0"><con:settings/><con:config service="GetPackageTestimonials" resourcePath="/api/v3/tour_packages/{package_name}/review" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user get package review" id="7d27f5dc-c828-4701-b8f3-fbdae52a56db" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="${And TT-Mobile token is fetched for get package review#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v3/tour_packages/Luxury%20Mauritius%20Honeymoon%20Package/review</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="833d1f37-ff8b-4862-a3ec-77f4d1295b61" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8d82c404-cc7e-4ffd-9abb-013febc4c4ca" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def reviwername = json_response_holder.name;
def loc = json_response_holder.loc;
def time =  json_response_holder.time;
def rating = json_response_holder.rating;
def authpic = json_response_holder.author_pic;
def review =  json_response_holder.review;


for(int i=0; i&lt; reviwername.size();i++){
	assert reviwername[i]!=null;
	assert loc[i]!=null;
	assert time[i]!=null;
	assert rating[i]!=null;
	assert review[i]!=null;
}

</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="id" value="${#TestCase#selected_package_id}"/>
  <con:entry key="package_name" value="${#TestCase#selected_package_headline}"/>
  <con:entry key="page_number" value="0"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
</con:parameters><con:parameterOrder><con:entry>package_name</con:entry><con:entry>id</con:entry><con:entry>page_number</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="And TT-Mobile token is fetched for get similiar packages" id="b76d1787-18ca-450a-af65-db17527fd7de"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v4/get_similar_packages/${#TestCase#selected_package_id}</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>hhfSXd14sblT7393//hfZdgSNzHaDcNmp1qzpQMMxaQ=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user get similiar packages" id="b2f46d9d-c2c2-44e6-890a-eadfd2db3743"><con:settings/><con:config service="GetSimiliarPackages" resourcePath="/api/v4/get_similar_packages/{package_id}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user get similiar packages" id="419772c3-0fef-411e-b835-b403c2e5c15f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${#Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${And TT-Mobile token is fetched for get similiar packages#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v4/get_similar_packages/844</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="674865c8-ac74-47ee-b5d9-77f6cf1eec3e" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="f79aeeb7-3a4f-445a-83f1-63e5a14c2c45" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def resulttype = json_response_holder.result_type;

def packages  = json_response_holder.packages;

for (int i=0; i&lt;packages.id.size(); i++){
	assert packages.id[i]!=null : "package id is not available"
}


assert resulttype.equals("similar_seo_packages") : "result type should be similar_seo_packages but it is "+resulttype</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="package_id" value="${#TestCase#selected_package_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="And TT-Mobile token is fetched for get package faq" id="f9dd7a24-62ec-4e36-ba50-d88a0a7d3c33"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v3/tour_packages/${#TestCase#selected_package_headline}/faq</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>5NPHzuZU4itSiZfBzYgiPQ3UjAhtk6j9wI0I1H9Mtd4=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user get package faq" id="122211d7-7b14-48b3-b080-d68e24fa47f4"><con:settings/><con:config service="GetPackageFAQ" resourcePath="/api/v3/tour_packages/{package_name}/faq" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user get package faq" id="e91d2953-7d47-42d4-84e7-4fb6bd662788" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="${And TT-Mobile token is fetched for get package faq#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v3/tour_packages/8nights-9days-australia-family-tour/faq</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="d9bc88de-5961-45a5-8986-33fcf38d99d9" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="06f4c3f6-a3ae-40f9-9a2f-23f6b8d84e10" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def resulttype = json_response_holder.result_type;

def quetions  = json_response_holder.que;
def answer = json_response_holder.ans;

for (que in quetions){
	assert que!=null : "quetions is not available"
}
for (ans in answer){
	assert ans!=null : "answer is not available"
}

</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="package_name" value="${#TestCase#selected_package_headline}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>package_name</con:entry><con:entry>id</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="When TT-Mobile for Request Form 1 is generated" id="57f56ed2-ce99-4c09-9f0a-e1854312e13a"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/requested_trips/new.json?destination_ids%5B%5D=${#TestCase#destinations_encoded}</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>kzSM55jC7YGrXZNKdGsNFJIQfLycNRd0+H1sNDHA32s=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user can view and validate the request form 1" id="0ba70b30-d481-4dfa-ba26-da782525ead2"><con:settings/><con:config service="NewRequestForm1" resourcePath="/api/{api_version}/requested_trips/new.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user can view and validate the request form 1" id="196f7986-e711-407a-99fc-68aac4c6148a" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${When TT-Mobile for Request Form 1 is generated#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v1/requested_trips/new.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7e151948-6891-4065-bebb-97d324cac3b8" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="d2ad5c04-da74-4b2b-a46b-77cb32c5f9f9" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);


int total_customization = json_response_holder.preferences.customization.size();

//Verfiy the customization are there in response.

assert(total_customization != 0);

def cutomization_title = json_response_holder.preferences.customization.title;
</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="09742936-73fe-4fc4-a554-320814e6b83b" name="Get the start date"><con:configuration><scriptText>import java.util.Calendar;
import java.text.SimpleDateFormat;

Calendar cal = Calendar.getInstance();
cal.add(Calendar.DATE, 7);
SimpleDateFormat format1 = new SimpleDateFormat("yyyy-MM-dd");
String formatted = format1.format(cal.getTime());
messageExchange.modelItem.testCase.setPropertyValue("start_date",formatted);
messageExchange.modelItem.testCase.testSuite.setPropertyValue("start_date",formatted);
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="destination_ids[]" value="${#TestCase#destinations}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>destination_ids[]</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="And TT-MObile for new request is generated" id="df79e829-49b1-4463-86c5-85055dd3901f"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/requested_trips</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>post</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>GR486AYqjPUnYu76T+mzDogFbAgwY7Rz90tp9bQbIjs=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user requests a trip" id="9b577be1-dfc0-4809-8c3e-5717aad087d3"><con:settings/><con:config service="NewRequestedTrips" resourcePath="/api/{api_version}/requested_trips" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user requests a trip" id="4a456b39-a76e-4c09-a86d-280850ef8cf4" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${And TT-MObile for new request is generated#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"requested_trip":{"deviceId":"05180c8a6a004cd998130c76c1ecdad4","email":"${#Project#user_email}","from_complete":"United","from_loc":"","usr_location":"United","phone_no":"+912541369874","preferences":[],"start_date":"${#TestCase#start_date}","to_loc":"${#TestCase#destination_names}","trip_days":"${#TestCase#selected_package_days}","trip_stage":"3"}}</con:request><con:originalUri>http://traveler-api.ttdev.in/api/v1/requested_trips</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f91ea6d7-db88-4c79-ac5d-f753f69fb36c" name="HTTP Status - 200"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="65601cb1-7c58-4eae-a54b-ac309abaca97" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);



//Get the request ID created.
String request_id = json_response_holder.result.id;
messageExchange.modelItem.testCase.setPropertyValue("RequestID",request_id);
messageExchange.modelItem.testCase.testSuite.setPropertyValue("RequestID",request_id)

//new_user must be false as this is logged in user.

//Get the redirect url.
String redirect_url = json_response_holder.redirect_url;
messageExchange.modelItem.testCase.setPropertyValue("request_redirectUrl",redirect_url);

//set user id at testcase level
messageExchange.modelItem.testCase.setPropertyValue("user_id",context.expand('${Given user login to application#user_id}'));
</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="551d958d-7a03-48d2-bc9f-165fa84654ef" name="Get the response Cookie"><con:configuration><scriptText>for(String cookie in messageExchange.getResponseHeaders()["Set-Cookie"]){
	if(cookie.contains("_trips3m_session")){
		messageExchange.modelItem.testCase.setPropertyValue("Cookie",cookie);
		messageExchange.modelItem.testCase.testSuite.setPropertyValue("Cookie",cookie);
	}
}</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="api_version" value="v3" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="And TT-MObile for currency convertor is fetched" id="5ec4ebf6-c997-42b2-9bf1-08f17d1310fb"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/current_currency_rate.json</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>0pqOSIwvP1l0gT1uypUUUIIObHPMXiraq7JTgcb4jcc=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="And currency convertor got loaded at the backend" id="b62818a3-749e-455c-8f85-35a197f8e32f"><con:settings/><con:config service="CurrencyConverter" resourcePath="/api/{api_version}/current_currency_rate.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And currency convertor got loaded at the backend" id="7a0e6a00-5c43-41ea-be57-14bd2ab5064e" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${And TT-MObile for currency convertor is fetched#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/current_currency_rate.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="26a34e58-b42c-453f-9609-31c10075ef69" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>number_of_days</con:name><con:value>4-6</con:value></con:property><con:property><con:name>per_page</con:name><con:value>50</con:value></con:property><con:property><con:name>activity</con:name><con:value>5,3</con:value></con:property><con:property><con:name>months</con:name><con:value>4-6</con:value></con:property><con:property><con:name>price_ranges</con:name><con:value>0-10000</con:value></con:property><con:property><con:name>destination_type</con:name><con:value>international</con:value></con:property><con:property><con:name>activity_encoded</con:name><con:value>5%2C3</con:value></con:property><con:property><con:name>price_ranges_encoded</con:name><con:value>0-10000</con:value></con:property><con:property><con:name>months_encoded</con:name><con:value>10-12</con:value></con:property><con:property><con:name>destination_id</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">57</con:value></con:property><con:property><con:name>destination_name</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Thailand</con:value></con:property><con:property><con:name>selected_package_id</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">3951</con:value></con:property><con:property><con:name>selected_package_name</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Trendy Thailand Tour Package</con:value></con:property><con:property><con:name>selected_package_price_total</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">64444</con:value></con:property><con:property><con:name>selected_package_headline</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">5nights-6days-thailand-tour</con:value></con:property><con:property><con:name>selected_package_days</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">6</con:value></con:property><con:property><con:name>selected_package_nights</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">5</con:value></con:property><con:property><con:name>selected_package_cities</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">koh samui->bangkok</con:value></con:property><con:property><con:name>destinations</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">57</con:value></con:property><con:property><con:name>destinations_encoded</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">57</con:value></con:property><con:property><con:name>destination_names</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Thailand</con:value></con:property><con:property><con:name>destination_names_encoded</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Thailand</con:value></con:property><con:property><con:name>start_date</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2018-04-16</con:value></con:property><con:property><con:name>RequestID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2612705</con:value></con:property><con:property><con:name>request_redirectUrl</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CkkiD3Nlc3Npb25faWQGOgZFVEkiJWU3ZWYyYWE3NmZjYTQ5ZjA2OGExNzExYzA4NjgzMGU0BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRVVDZUSmpMeTdYOTZsVThCQ1o2MG11BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVEkiGGFsbG93X2N1c3RvbWl6YXRpb24GOwBGaQPC3SdJIgpmbGFzaAY7AFRvOiVBY3Rpb25EaXNwYXRjaDo6Rmxhc2g6OkZsYXNoSGFzaAk6CkB1c2VkbzoIU2V0BjoKQGhhc2h9AEY6DEBjbG9zZWRGOg1AZmxhc2hlc3sGOhJydHJpcF9jcmVhdGVkVDoJQG5vdzA%3D--3c3265cae85969e1767ef5ed1b3c94e345ddbaf6; path=/; HttpOnly</con:value></con:property><con:property><con:name>user_id</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">953268</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase id="7739a2a6-f923-4f9b-8720-2f450f7287c8" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="LoggedInUser_Request_More_Quotes" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Given user request a quote" id="fb0d6bbd-aeb9-4588-8dd6-87b30a60fe0d"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>2040cc92-e9d4-4517-a063-39395e85cdb8</con:targetTestCase><con:properties><con:property><con:name>number_of_days</con:name><con:value>${#TestCase#number_of_days}</con:value></con:property><con:property><con:name>per_page</con:name><con:value>${#TestCase#per_page}</con:value></con:property><con:property><con:name>activity</con:name><con:value>${#TestCase#activity}</con:value></con:property><con:property><con:name>months</con:name><con:value>${#TestCase#months}</con:value></con:property><con:property><con:name>price_ranges</con:name><con:value>${#TestCase#price_ranges}</con:value></con:property><con:property><con:name>destination_type</con:name><con:value>${#TestCase#destination_type}</con:value></con:property><con:property><con:name>activity_encoded</con:name><con:value>${#TestCase#activity_encoded}</con:value></con:property><con:property><con:name>price_ranges_encoded</con:name><con:value>${#TestCase#price_ranges_encoded}</con:value></con:property><con:property><con:name>months_encoded</con:name><con:value>${#TestCase#months_encoded}</con:value></con:property><con:property><con:name>destination_id</con:name></con:property><con:property><con:name>destination_name</con:name></con:property><con:property><con:name>selected_package_id</con:name></con:property><con:property><con:name>selected_package_name</con:name></con:property><con:property><con:name>selected_package_price_total</con:name></con:property><con:property><con:name>selected_package_headline</con:name></con:property><con:property><con:name>selected_package_days</con:name></con:property><con:property><con:name>selected_package_nights</con:name></con:property><con:property><con:name>selected_package_cities</con:name></con:property><con:property><con:name>destinations</con:name></con:property><con:property><con:name>destinations_encoded</con:name></con:property><con:property><con:name>destination_names</con:name></con:property><con:property><con:name>destination_names_encoded</con:name></con:property><con:property><con:name>start_date</con:name></con:property><con:property><con:name>RequestID</con:name><con:value>2612698</con:value></con:property><con:property><con:name>request_redirectUrl</con:name></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CkkiD3Nlc3Npb25faWQGOgZFVEkiJTRkNzVhMzY2YzY0NDBhNGE0ZTg3MGI1YmE4MjNhNmY5BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRVVDZUSmpMeTdYOTZsVThCQ1o2MG11BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVEkiGGFsbG93X2N1c3RvbWl6YXRpb24GOwBGaQPC3SdJIgpmbGFzaAY7AFRvOiVBY3Rpb25EaXNwYXRjaDo6Rmxhc2g6OkZsYXNoSGFzaAk6CkB1c2VkbzoIU2V0BjoKQGhhc2h9AEY6DEBjbG9zZWRGOg1AZmxhc2hlc3sGOhJydHJpcF9jcmVhdGVkVDoJQG5vdzA%3D--b93d2a7e52faa1c4dd8a9159db49f977ffeec6e8; path=/; HttpOnly</con:value></con:property><con:property><con:name>user_id</con:name></con:property></con:properties><con:returnProperties><con:entry>RequestID</con:entry><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="And when TT-Mobile token is generated for request more quotes" id="29d8853f-b21a-4a8e-b32b-8d28dd41684a"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/requested_trips/${Given user request a quote#RequestID}/post_traveler_ask_new_quote.json</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>post</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>GR486AYqjPUnYu76T+mzDogFbAgwY7Rz90tp9bQbIjs=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user can request more quote with reason 'Not Satisfied with hotels'" id="59db2725-ed09-4228-88ae-f3531a7b6d9c"><con:settings/><con:config service="RequestMoreQuote" resourcePath="/requested_trips/{requestID}/post_traveler_ask_new_quote.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user can request more quote with reason 'Not Satisfied with hotels'" id="2883f348-5a00-448a-a5ee-4dc0311fba0b" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user request a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${And when TT-Mobile token is generated for request more quotes#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"feedback":1}</con:request><con:originalUri>http://traveler-api.ttdev.in/requested_trips/946156/post_traveler_ask_new_quote.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="02b826a8-9de6-48e4-9d6f-25d36e3f6990" name="HTTP Status 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4534e56d-d1a8-4094-9fa5-36283de7ed15" name="Success"><con:configuration><token>success</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="01ceb539-c62b-419d-bf53-1931f8f7384b" name="True"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="requestID" value="${Given user request a quote#RequestID}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Then user can request more quote with 'Other' reason" id="093fd707-a789-43b3-89fd-c72c82e9173c"><con:settings/><con:config service="RequestMoreQuote" resourcePath="/requested_trips/{requestID}/post_traveler_ask_new_quote.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user can request more quote with 'Other' reason" id="2883f348-5a00-448a-a5ee-4dc0311fba0b" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user request a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${And when TT-Mobile token is generated for request more quotes#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"feedback":5,"other_reason":"need more customization in right seeing."}</con:request><con:originalUri>http://traveler-api.ttdev.in/requested_trips/946156/post_traveler_ask_new_quote.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="02b826a8-9de6-48e4-9d6f-25d36e3f6990" name="HTTP Status 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4534e56d-d1a8-4094-9fa5-36283de7ed15" name="Success"><con:configuration><token>success</token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="01ceb539-c62b-419d-bf53-1931f8f7384b" name="True"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="requestID" value="${Given user request a quote#RequestID}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>number_of_days</con:name><con:value>4-6</con:value></con:property><con:property><con:name>per_page</con:name><con:value>50</con:value></con:property><con:property><con:name>activity</con:name><con:value>5,3</con:value></con:property><con:property><con:name>months</con:name><con:value>4-6</con:value></con:property><con:property><con:name>price_ranges</con:name><con:value>0-10000</con:value></con:property><con:property><con:name>destination_type</con:name><con:value>international</con:value></con:property><con:property><con:name>price_ranges_encoded</con:name><con:value>0-10000</con:value></con:property><con:property><con:name>activity_encoded</con:name><con:value>5%2C3</con:value></con:property><con:property><con:name>months_encoded</con:name><con:value>4-6</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase id="2531b376-afff-402c-85d3-c599680ae3f8" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="User_gets_mail_confirmation_link" searchProperties="true" maxResults="0"><con:settings/><con:savedRecentRuns>1</con:savedRecentRuns><con:testStep type="calltestcase" name="Given user login to application" id="a9a663c3-536d-4e65-b633-ab37f9e048ea"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5ab66c45-5d18-4dcb-8819-795ff4a3c798</con:targetTestCase><con:properties><con:property><con:name>user_id</con:name><con:value>953268</con:value></con:property><con:property><con:name>auth_key</con:name></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTg0YTYzNjhhYzE1MmM4YWU1OWIyNGZiMGIwY2I3OTUzBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRVVDZUSmpMeTdYOTZsVThCQ1o2MG11BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--3ece1c1bc52503ba66a43316a93c3e0bd0e647c4; path=/; HttpOnly</con:value></con:property></con:properties><con:returnProperties><con:entry>user_id</con:entry><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="And gets the TT-MObile for confirmation link" id="3f32eb64-ed82-4822-8ebf-6da44f1034a8"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/requested_trips/${#TestSuite#RequestID}/confirmation_link</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>Bjmo4YbQBu4zqv/Y2KXd+AIOnq644GAnVsHVzwWbUHI=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then confirmation link can be sent to user" id="ebe9f74a-153a-4986-865a-b1363d381c05"><con:settings/><con:config service="ConfirmAccountLinkForTrip" resourcePath="/api/{apiversion}/requested_trips/{trip_id}/confirmation_link" methodName="Confirmation_link" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then confirmation link can be sent to user" id="85852e26-3da7-4c68-9ee2-750407b60636" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${And gets the TT-MObile for confirmation link#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v1/requested_trips/trip_id/confirmation_link</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="9a21175f-cf28-4b4c-a356-6253d72630f2" name="HTTP STatus - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6fe16929-4246-4a02-9202-783729ae0136" name="Success - true"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="trip_id" value="${#TestSuite#RequestID}"/>
  <con:entry key="apiversion" value="v1"/>
</con:parameters><con:parameterOrder><con:entry>apiversion</con:entry><con:entry>trip_id</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>a9a663c3-536d-4e65-b633-ab37f9e048ea</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3f32eb64-ed82-4822-8ebf-6da44f1034a8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="0b3f7be7-aa21-4551-b7c2-ededd220e1b0" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="User_view_the_offers_for_a_trip" searchProperties="true" maxResults="0"><con:settings/><con:savedRecentRuns>1</con:savedRecentRuns><con:testStep type="calltestcase" name="Given user gets the TT-Mobile for offer list" id="eda53680-e77e-49f6-b38e-64830efc7098"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/offer/show?rtrip_id=${#TestSuite#RequestID}</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>G9hjBUyArtYhfs7aI4R7indm8BGxAAetr2UBfewHjHk=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user view if offer is there for already created trip" id="7eaae1b0-634b-4fd1-8ab3-8d7242ebcd4e"><con:settings/><con:config service="GetOfferListForTrip" resourcePath="/api/{apiversion}/offer/show" methodName="Show" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user view if offer is there for already created trip" id="92683e44-032e-42fd-889d-b207d5ccee3b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="TT-Mobile" value="${Given user gets the TT-Mobile for offer list#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/offer/show</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e77eea89-da51-4eed-9d4d-5781f09cce0f" name="HTTP Status - 200"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="2dd58900-699b-48e1-91f7-95d535a5cabd" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

ArrayList allnodes = new ArrayList();
json_response_holder.each{
	allnodes.add(it.getKey());
}
assert("valid" in allnodes);
assert("msg" in allnodes);
assert("rtrip_id" in allnodes);
assert("offer_type" in allnodes);
assert("offer_code" in allnodes);
assert("tnc" in allnodes);
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="apiversion" value="v2"/>
  <con:entry key="rtrip_id" value="${#TestSuite#RequestID}"/>
</con:parameters><con:parameterOrder><con:entry>apiversion</con:entry><con:entry>rtrip_id</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>eda53680-e77e-49f6-b38e-64830efc7098</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="28c8c296-8ba6-4958-8612-b77fccd5718b" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="User_Edit_Requested_Trip" searchProperties="true" maxResults="0"><con:settings/><con:savedRecentRuns>1</con:savedRecentRuns><con:testStep type="calltestcase" name="Given user gets the TT-Mobile token for edit request" id="c028eaa0-d812-4906-806b-18e99980bde3"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/requested_trips/${#TestSuite#RequestID}</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>put</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>uG1NajqyLf34UgcknM9HdKdzcpBIRJM+HXmugMwsuio=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="groovy" name="And user prepare data to edit the trip request" id="8e9a9345-64c6-4298-96c4-723204fc67f7"><con:settings/><con:config><script>import java.util.Calendar;
import java.text.SimpleDateFormat;


//Increment the trip days by 1.
int trip_days = Integer.parseInt(context.expand('${#TestSuite#selected_package_days}'));

int days = trip_days+1;

testRunner.testCase.setPropertyValue("days", days.toString());

//Incremnent the trip start date by 5days.
Calendar cal = Calendar.getInstance();
cal.add(Calendar.DATE, 12);
SimpleDateFormat format1 = new SimpleDateFormat("yyyy-MM-dd");
String formatted = format1.format(cal.getTime());
testRunner.testCase.setPropertyValue("start_date",formatted);
</script></con:config></con:testStep><con:testStep type="restrequest" name="Then user edit already requested trip" id="708a06e5-73fa-4b3d-8a78-10d667750500"><con:settings/><con:config service="CreateRequest" resourcePath="/api/{api_version}/requested_trips/{request_id}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user edit already requested trip" id="77caa3a5-a5fa-4223-9f05-ae63ca901e91" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${#TestSuite#Cookie}"/>
  <con:entry key="TT-Mobile" value="${Given user gets the TT-Mobile token for edit request#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"requested_trip":{"deviceId":"05180c8a6a004cd998130c76c1ecdad4","adult":"4","child":"0","email":"${#Project#user_email}","from_complete":"United","from_loc":"","usr_location":"United","preferences":[{"customization_id":2,"options":[{"name":"4 Star","id":7,"tags":"","val":[]}]},{"customization_id":43,"options":[{"name":"in this week","id":203,"tags":"","val":[]}]},{"customization_id":33,"options":[{"name":"Evening","id":134,"tags":"","val":[]}]}],"start_date":"${#TestCase#start_date}","to_loc":"${#TestSuite#destination_name}","trip_days":"${#TestCase#days}"}}</con:request><con:originalUri>http://traveler-api.ttdev.in/api/v1/requested_trips/946633</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c52af3eb-bcbe-42d1-9da7-b80fffe27f6f" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f0b54d30-1458-44e6-945a-46779cddf8b3" name="Success"><con:configuration><token>success</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="37384bd3-5fd8-459f-8c4d-54b5cd55684f" name="true"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="request_id" value="${#TestSuite#RequestID}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>request_id</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="And user get the TT-MObile to view request" id="c8751289-5cd0-499f-9796-b0cb56961e3a"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/${#TestSuite#RequestID}.json?include_quotes=false&amp;currency=Dollar</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>L03zPs03XPPWzQVTLrVPB37kw04/oODtaLPa49aRHNs=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then trip request is updated" id="885b52a4-5237-4a87-b92e-879e60af75c8"><con:settings/><con:config service="GetSingleRequestedTrip" resourcePath="/api/{api_version}/requested_trips/{requested_trip_id}.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then trip request is updated" id="afa80f63-d378-4a35-80d1-234322ba1e8e" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${#TestSuite#Cookie}"/>
  <con:entry key="TT-Mobile" value="${And user get the TT-MObile to view request#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/requested_trips/946627.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="9af9a2bd-ffbd-4873-a93e-430660e67a90" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="0a71e859-7dd2-44fa-8bee-5bb4a30c66c5" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);


int adults = json_response_holder.adult;
String email = json_response_holder.email;
String user_email = context.expand('${#Project#user_email}');
String start_date = context.expand('${#TestCase#start_date}');
String start_date_selected = json_response_holder.start_date;
String to_loc_selected = json_response_holder.to_loc;
String to_loc = context.expand('${#TestSuite#destination_name}')
int trip_days_selected = Integer.parseInt(context.expand('${#TestCase#days}'));
int trip_days = json_response_holder.trip_days;
assert(adults == 4);
assert(email == user_email);
assert(start_date_selected == start_date);
assert(to_loc_selected == to_loc);
assert(trip_days_selected == trip_days);






</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="requested_trip_id" value="${#TestSuite#RequestID}"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
</con:parameters><con:parameterOrder><con:entry>requested_trip_id</con:entry><con:entry>include_quotes</con:entry><con:entry>currency</con:entry><con:entry>api_version</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>days</con:name><con:value>7</con:value></con:property><con:property><con:name>start_date</con:name><con:value>2018-04-21</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>8e9a9345-64c6-4298-96c4-723204fc67f7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c028eaa0-d812-4906-806b-18e99980bde3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>708a06e5-73fa-4b3d-8a78-10d667750500</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="01b26ad7-a7c9-4d48-8d30-2b23f753c2b8" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="User_Cancel_The_Requested_Trip" searchProperties="true" maxResults="0"><con:settings/><con:savedRecentRuns>1</con:savedRecentRuns><con:testStep type="calltestcase" name="Given user get the TT-Mobile token for cancel request" id="e3ed711a-23fb-4879-948f-196d14256d94"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/requested_trips/${#TestSuite#RequestID}/cancelRequest</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>post</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>GR486AYqjPUnYu76T+mzDogFbAgwY7Rz90tp9bQbIjs=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user cancel already requested trip" id="fb843665-0f27-429c-b848-7d825b24d2f1"><con:settings/><con:config service="CancelRequest" resourcePath="/api/{apiVersion}/requested_trips/{tripID}/cancelRequest" methodName="CancelRequest" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user cancel already requested trip" id="8966fe98-1554-439a-a86d-e0ad1cf9bd81" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${#TestSuite#Cookie}"/>
  <con:entry key="TT-Mobile" value="${Given user get the TT-Mobile token for cancel request#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"cancel_reason":"","changed_destination_name":"","commit":"Cancel Request","id":${#TestSuite#RequestID},"otherReason":"","quote_customization":"","reason":"Canceled"}</con:request><con:originalUri>http://traveler-api.ttdev.in/api/v1/requested_trips/456360/cancelRequest</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="2341f660-9281-4f00-88ba-0eb2dbbee6dc" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cecc600b-8156-4afc-8d48-3e85c4313f42" name="Success"><con:configuration><token>success</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e3095f1b-e2a5-4057-b544-137dd79cff2e" name="true"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="apiVersion" value="v1"/>
  <con:entry key="tripID" value="${#TestSuite#RequestID}"/>
</con:parameters><con:parameterOrder><con:entry>apiVersion</con:entry><con:entry>tripID</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>e3ed711a-23fb-4879-948f-196d14256d94</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="9ebac769-8f29-4aaf-8165-c80e46b42f43" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="LoggedIn_User_Request_A_Quote_For_Given_Destination" searchProperties="true"><con:settings/><con:savedRecentRuns>1</con:savedRecentRuns><con:testStep type="calltestcase" name="Given user login to application" id="5d97544d-1838-4cf6-82be-178f4aca0413"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5ab66c45-5d18-4dcb-8819-795ff4a3c798</con:targetTestCase><con:properties><con:property><con:name>user_id</con:name><con:value>953268</con:value></con:property><con:property><con:name>auth_key</con:name><con:value>75c78998026011e7904f06304046af90</con:value></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTFlNTQwZmM2ZjYyNjM0N2I3NjJhMGI2ODIxMTdkZDE3BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRVVDZUSmpMeTdYOTZsVThCQ1o2MG11BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--a060ba3b1e7e2d1eda2662af3aa80ebde38494de; path=/; HttpOnly</con:value></con:property></con:properties><con:returnProperties><con:entry>user_id</con:entry><con:entry>auth_key</con:entry><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="When user get the TT-MObile token for app config" id="843ee014-5eab-4b6b-99ff-35dd0e2fc367"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/app_config.json?user_id=${Given user login to application#user_id}</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>ox011eEu0DMfX4VTMNZ5/oSGGGSsNBFbj5wdkfcIVVw=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then app config is loaded successfully for logged in user" id="31a58cde-726d-4e85-9555-ad5cc7462598"><con:settings/><con:config service="AppConfig" resourcePath="/api/{api_version}/app_config.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then app config is loaded successfully for logged in user" id="8102f3b4-c7de-4700-a705-9a8e6737f51b" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${When user get the TT-MObile token for app config#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/app_config.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="dafe56dc-2501-4b29-a331-3c20bb19ebf5" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="b2755ad2-c391-41a3-b86b-36a6e6a04a92" name="Verify response details"><con:configuration><scriptText>import groovy.json.JsonSlurper;
String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

//verify if all nodes are present
def is_coupon_enabled = json_response_holder.is_coupon_enabled;
def is_referer_enabled = json_response_holder.is_referer_enabled;
def isFabMenuEnabled = json_response_holder.isFabMenuEnabled;
def referral_text = json_response_holder.referral_text;
def referral_share_text = json_response_holder.referral_share_text;
def helpline = json_response_holder.helpline;
def discount_text = json_response_holder.discount_text;
def show_package_discount = json_response_holder.show_package_discount;

assert(is_coupon_enabled != null);
assert(is_referer_enabled != null);
assert(isFabMenuEnabled != null);
assert(referral_text != null);
assert(referral_share_text != null);
assert(helpline != null);
assert(discount_text != null);
assert(show_package_discount != null);


</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="user_id" value="${Given user login to application#user_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>user_id</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="And when TT-Mobile token for package catalog is generated" id="a22c053b-8a60-4585-9035-59f78ffc2a27"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v4/get_filtered_results?result_type=package_catalog&amp;destination=${#TestCase#destination_id}</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>MFvB5Q1JeQcaeGzma5r2uPZN/UweuKH3IgsW5bUpDvc=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user can select the package for a destination selected" id="641dfa58-93ea-4762-b769-c0cbb4b6ccc8"><con:settings/><con:config service="PackageCatalogForADestination" resourcePath="/api/{api_version}/get_filtered_results" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user can select the package for a destination selected" id="609a0f5f-2282-4432-bf9b-fa6f91d85efd" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${And when TT-Mobile token for package catalog is generated#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v4/get_filtered_results</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c418620c-0930-46e8-8665-1637907ebc5f" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="4c4f49ff-534a-456e-9eec-4f5324c367ac" name="Verify &amp; Get package details"><con:configuration><scriptText>import groovy.json.JsonSlurper;
import java.util.Random;

// get the json response holder.
String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);


//verfiy the result type in response
String result_type = json_response_holder.result_type;
assert(result_type == "package_catalog");


String destination_name = context.expand('${#TestCase#destination_name}');
//verify total packges displayed should not be zero. 
int total_packages = json_response_holder.packages.id.size();
assert(total_packages != 0) : "No packages for destination " + destination_name;

//Verify inclusions are there in response

for(int i = 0;i &lt; total_packages; i++){
int inclusion_count = json_response_holder.packages.inclusions[i].key.size();
assert(inclusion_count != 0) : "Inclusion is not there for " + (i+1) + " package.";
}

//Pick up random package to continue further.
Random rand = new Random();
int randomindex = rand.nextInt((total_packages - 0) + 1) + 0;

String selected_package_id = json_response_holder.packages.id[randomindex].toString();
String selected_package_days = json_response_holder.packages.days[randomindex].toString();
String selected_package_nights = json_response_holder.packages.nights[randomindex].toString();
String selected_package_cities = json_response_holder.packages.cities[randomindex].toString();
String selected_package_name = json_response_holder.packages.name[randomindex].toString();
String selected_package_price_total = json_response_holder.packages.price_total[randomindex].toString();
String package_heading = json_response_holder.packages.set_url[randomindex].toString().toLowerCase();
messageExchange.modelItem.testCase.setPropertyValue("selected_package_id",selected_package_id);
messageExchange.modelItem.testCase.setPropertyValue("selected_package_name",selected_package_name);
messageExchange.modelItem.testCase.setPropertyValue("selected_package_price_total",selected_package_price_total);
messageExchange.modelItem.testCase.setPropertyValue("selected_package_headline",package_heading);
messageExchange.modelItem.testCase.setPropertyValue("selected_package_days",selected_package_days);
messageExchange.modelItem.testCase.testSuite.setPropertyValue("selected_package_days",selected_package_days);
messageExchange.modelItem.testCase.setPropertyValue("selected_package_nights",selected_package_nights);
messageExchange.modelItem.testCase.setPropertyValue("selected_package_cities",selected_package_cities);


// Also get the destinations from the package selected.

String destinations =  json_response_holder.packages.destinations[randomindex].id;
String destination_names = json_response_holder.packages.destinations[randomindex].name;
destinations = destinations.replaceAll(" ","");
destinations = destinations.replace("[","");
destinations = destinations.replaceAll("]","");
destination_names = destination_names.replaceAll(" ","");
destination_names = destination_names.replace("[","");
destination_names = destination_names.replaceAll("]","");
messageExchange.modelItem.testCase.setPropertyValue("destinations",destinations);
messageExchange.modelItem.testCase.setPropertyValue("destination_names",destination_names);

String destinations_encoded = destinations.replaceAll(",","%2C");
String destination_names_encoded = destination_names.replaceAll(",","%2C");
messageExchange.modelItem.testCase.setPropertyValue("destinations_encoded",destinations_encoded);
messageExchange.modelItem.testCase.setPropertyValue("destination_names_encoded",destination_names_encoded);








</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="api_version" value="v4"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="destination" value="${#TestCase#destination_id}"/>
</con:parameters><con:parameterOrder><con:entry>api_version</con:entry><con:entry>result_type</con:entry><con:entry>destination</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="And TT-Mobile token is fetched for package catalog filter" id="55b725e9-27dd-4bc8-86b5-25cd1b4fcddb"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v3/metadata/filter?filter_type=package_catalog</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>5kzNPUqRIeIdjPADfWNOYdEHxCE6z1OgIZEEg1kyz3o=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="And package catalog filters get loaded in background" id="47e9f7d2-f3fa-49a9-8b50-1fbc2e8fcf68"><con:settings/><con:config service="FilterType" resourcePath="/api/{api_version}/metadata/filter" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And package catalog filters get loaded in background" id="436ba333-2b44-4d4a-adc7-688847704b53" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${And TT-Mobile token is fetched for package catalog filter#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v3/metadata/filter</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b1346a40-2687-413e-8080-95ef1e7d7398" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="ee5f4dee-0162-47c2-b3a5-050cfd572b62" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

String filter_type = json_response_holder.filter_type;

assert(filter_type == "package_catalog");

String[] filter_titles = json_response_holder.filters.title;

assert("Type of Destination" in filter_titles);
assert("Categories" in filter_titles);
assert("Duration(days)" in filter_titles);
assert("Budget perperson (In Rs.)" in filter_titles);
assert("Hotel Star Rating" in filter_titles);
assert("Activities" in filter_titles);
assert("" in filter_titles);


int number_of_filters = filter_titles.size();

for(int i = 0; i &lt; number_of_filters;i++){

if(filter_titles[i] == "Type of Destination"){
	String[] option_title = json_response_holder.filters.options[i].title;
	int number_of_options = option_title.size();
	assert(number_of_options == 2);
	assert("India" in option_title);
	assert("International" in option_title);
}
else if(filter_titles[i] == "Categories"){
	String[] option_title = json_response_holder.filters.options[i].title;
	int number_of_options = option_title.size();
	assert(number_of_options == 2);
	assert("Honeymoon" in option_title);
	assert("Family" in option_title);
}
else if(filter_titles[i] == "Duration(days)"){
	String[] option_title = json_response_holder.filters.options[i].title;
	int number_of_options = option_title.size();
	assert(number_of_options == 5);
	assert("1-3" in option_title);
	assert("4-6" in option_title);
	assert("7-9" in option_title);
	assert("10-12" in option_title);
	assert(">12" in option_title);
	
}
else if(filter_titles[i] == "Budget perperson (In Rs.)"){
	String[] option_title = json_response_holder.filters.options[i].title;
	int number_of_options = option_title.size();
	assert(number_of_options == 8);
	assert("Below 10,000" in option_title);
	assert("10,000 - 20,000" in option_title);
	assert("20,000 - 40,000" in option_title);
	assert("40,000 - 60,000" in option_title);
	assert("60,000 - 80,000" in option_title);
	assert("80,000 - 1 Lac" in option_title);
	assert("1 Lac - 2 Lac" in option_title);
	assert("Above 2 Lac" in option_title);
}
else if(filter_titles[i] == "Hotel Star Rating"){
	String[] option_title = json_response_holder.filters.options[i].title;
	int number_of_options = option_title.size();
	assert(number_of_options == 4);
	assert("5 Star" in option_title);
	assert("4 Star" in option_title);
	assert("3 Star" in option_title);
	assert("2 Star" in option_title);

}
else if(filter_titles[i] == "Activities"){
	String[] option_title = json_response_holder.filters.options[i].title;
	int number_of_options = option_title.size();
	assert(number_of_options == 5);
	assert("Adventure" in option_title);
	assert("Nature" in option_title);
	assert("Hill Station" in option_title);
	assert("Religious" in option_title);
	assert("Water Activities" in option_title);

}
else if(filter_titles[i] == ""){
	String[] option_title = json_response_holder.filters.options[i].title;
	String filter_name = json_response_holder.filters.param_name[i];
	assert(filter_name == "sort_by");
	
	int number_of_options = option_title.size();
	assert(number_of_options == 5);
	assert("Popularity" in option_title);
	assert("Price: Low To High" in option_title);
	assert("Price: High To Low" in option_title);
	assert("Duration: Low To High" in option_title);
	assert("Duration: High To Low" in option_title);

}

	
}
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="filter_type" value="package_catalog"/>
  <con:entry key="api_version" value="v3"/>
  <con:entry key="security_auth_token" value=""/>
</con:parameters><con:parameterOrder><con:entry>api_version</con:entry><con:entry>filter_type</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="When TT-Mobile for Request Form 1 is generated" id="ea540e4b-4267-4972-832c-0e3b335acf77"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/requested_trips/new.json?destination_ids%5B%5D=${#TestCase#destinations_encoded}</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>j+y1DvjLdBrmG/KKDSgJa1aOcudrlYQZcLY1JL6HeOU=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user can view and validate the request form 1" id="b8b1ecd0-3d34-43b3-8570-f518bbcb20b7"><con:settings/><con:config service="NewRequestForm1" resourcePath="/api/{api_version}/requested_trips/new.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user can view and validate the request form 1" id="196f7986-e711-407a-99fc-68aac4c6148a" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${When TT-Mobile for Request Form 1 is generated#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v1/requested_trips/new.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7e151948-6891-4065-bebb-97d324cac3b8" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="d2ad5c04-da74-4b2b-a46b-77cb32c5f9f9" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);


int total_customization = json_response_holder.preferences.customization.size();

//Verfiy the customization are there in response.

assert(total_customization != 0);

def cutomization_title = json_response_holder.preferences.customization.title;
</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="09742936-73fe-4fc4-a554-320814e6b83b" name="Get the start date"><con:configuration><scriptText>import java.util.Calendar;
import java.text.SimpleDateFormat;

Calendar cal = Calendar.getInstance();
cal.add(Calendar.DATE, 7);
SimpleDateFormat format1 = new SimpleDateFormat("yyyy-MM-dd");
String formatted = format1.format(cal.getTime());
messageExchange.modelItem.testCase.setPropertyValue("start_date",formatted);
messageExchange.modelItem.testCase.testSuite.setPropertyValue("start_date",formatted);
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="destination_ids[]" value="${#TestCase#destinations}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>destination_ids[]</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="And TT-MObile for new request is generated" id="2580a471-fff7-42c3-bd57-d42bc702c0b3"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/requested_trips</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>post</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>GR486AYqjPUnYu76T+mzDogFbAgwY7Rz90tp9bQbIjs=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Then user requests a trip" id="43073df3-d166-436c-bcc1-269041fd13c9"><con:settings/><con:config service="NewRequestedTrips" resourcePath="/api/{api_version}/requested_trips" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Then user requests a trip" id="4a456b39-a76e-4c09-a86d-280850ef8cf4" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${And TT-MObile for new request is generated#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"requested_trip":{"deviceId":"05180c8a6a004cd998130c76c1ecdad4","email":"${#Project#user_email}","from_complete":"United","from_loc":"","usr_location":"United","phone_no":"+912541369874","preferences":[],"start_date":"${#TestCase#start_date}","to_loc":"${#TestCase#destination_names}","trip_days":"${#TestCase#selected_package_days}","trip_stage":"3"}}</con:request><con:originalUri>http://traveler-api.ttdev.in/api/v1/requested_trips</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f91ea6d7-db88-4c79-ac5d-f753f69fb36c" name="HTTP Status - 200"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="65601cb1-7c58-4eae-a54b-ac309abaca97" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);



//Get the request ID created.
String request_id = json_response_holder.result.id;
messageExchange.modelItem.testCase.setPropertyValue("RequestID",request_id);
messageExchange.modelItem.testCase.testSuite.setPropertyValue("RequestID",request_id)

//new_user must be false as this is logged in user.

//Get the redirect url.
String redirect_url = json_response_holder.redirect_url;
messageExchange.modelItem.testCase.setPropertyValue("request_redirectUrl",redirect_url);

//set user id at testcase level
messageExchange.modelItem.testCase.setPropertyValue("user_id",context.expand('${Given user login to application#user_id}'));
</scriptText></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="551d958d-7a03-48d2-bc9f-165fa84654ef" name="Get the response Cookie"><con:configuration><scriptText>for(String cookie in messageExchange.getResponseHeaders()["Set-Cookie"]){
	if(cookie.contains("_trips3m_session")){
		messageExchange.modelItem.testCase.setPropertyValue("Cookie",cookie);
		messageExchange.modelItem.testCase.testSuite.setPropertyValue("Cookie",cookie);
	}
}</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="api_version" value="v3" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="And TT-MObile for currency convertor is fetched" id="86cdc2da-0509-481a-b37a-050acba1f84c"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/current_currency_rate.json</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>0pqOSIwvP1l0gT1uypUUUIIObHPMXiraq7JTgcb4jcc=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="And currency convertor got loaded at the backend" id="df1b142b-8414-4ab9-9b46-6d5357d676dd"><con:settings/><con:config service="CurrencyConverter" resourcePath="/api/{api_version}/current_currency_rate.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="And currency convertor got loaded at the backend" id="7a0e6a00-5c43-41ea-be57-14bd2ab5064e" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Given user login to application#Cookie}"/>
  <con:entry key="TT-Mobile" value="${And TT-MObile for currency convertor is fetched#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/current_currency_rate.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="26a34e58-b42c-453f-9609-31c10075ef69" name="HTTP Status - 200!"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>number_of_days</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>per_page</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>activity</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>months</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>price_ranges</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>destination_type</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>activity_encoded</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>price_ranges_encoded</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>months_encoded</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>destination_id</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">56</con:value></con:property><con:property><con:name>destination_name</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>selected_package_id</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2287</con:value></con:property><con:property><con:name>selected_package_name</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> Hills &amp; Houseboat: Munnar and Alleppey Honeymoon Package </con:value></con:property><con:property><con:name>selected_package_price_total</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">16665</con:value></con:property><con:property><con:name>selected_package_headline</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">5n-6d-munnar-thekkady-alleppey-honeymoon</con:value></con:property><con:property><con:name>selected_package_days</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">6</con:value></con:property><con:property><con:name>selected_package_nights</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">5</con:value></con:property><con:property><con:name>selected_package_cities</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">munnar->thekkady->alleppey->cochin->kochi</con:value></con:property><con:property><con:name>destinations</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">56</con:value></con:property><con:property><con:name>destinations_encoded</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">56</con:value></con:property><con:property><con:name>destination_names</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Kerala</con:value></con:property><con:property><con:name>destination_names_encoded</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">Kerala</con:value></con:property><con:property><con:name>start_date</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2018-04-16</con:value></con:property><con:property><con:name>RequestID</con:name><con:value>2612706</con:value></con:property><con:property><con:name>request_redirectUrl</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CkkiD3Nlc3Npb25faWQGOgZFVEkiJTFlNTQwZmM2ZjYyNjM0N2I3NjJhMGI2ODIxMTdkZDE3BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRVVDZUSmpMeTdYOTZsVThCQ1o2MG11BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVEkiGGFsbG93X2N1c3RvbWl6YXRpb24GOwBGaQPB3SdJIgpmbGFzaAY7AFRvOiVBY3Rpb25EaXNwYXRjaDo6Rmxhc2g6OkZsYXNoSGFzaAk6CkB1c2VkbzoIU2V0BjoKQGhhc2h9AEY6DEBjbG9zZWRGOg1AZmxhc2hlc3sGOhJydHJpcF9jcmVhdGVkVDoJQG5vdzA%3D--6cd94684f74c58cb5e91ced256ce179074b06930; path=/; HttpOnly</con:value></con:property><con:property><con:name>user_id</con:name><con:value>953268</con:value></con:property></con:properties><con:reportParameters/></con:testCase><con:properties><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CkkiD3Nlc3Npb25faWQGOgZFVEkiJTFlNTQwZmM2ZjYyNjM0N2I3NjJhMGI2ODIxMTdkZDE3BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRVVDZUSmpMeTdYOTZsVThCQ1o2MG11BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVEkiGGFsbG93X2N1c3RvbWl6YXRpb24GOwBGaQPB3SdJIgpmbGFzaAY7AFRvOiVBY3Rpb25EaXNwYXRjaDo6Rmxhc2g6OkZsYXNoSGFzaAk6CkB1c2VkbzoIU2V0BjoKQGhhc2h9AEY6DEBjbG9zZWRGOg1AZmxhc2hlc3sGOhJydHJpcF9jcmVhdGVkVDoJQG5vdzA%3D--6cd94684f74c58cb5e91ced256ce179074b06930; path=/; HttpOnly</con:value></con:property><con:property><con:name>RequestID</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">2612706</con:value></con:property><con:property><con:name>destination_name</con:name><con:value>Thailand</con:value></con:property><con:property><con:name>selected_package_days</con:name><con:value>6</con:value></con:property><con:property><con:name>start_date</con:name><con:value>2018-04-16</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite id="f579f66c-5920-4988-a9cf-cb6a7854e1d9" name="Agent" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="5794d198-7055-4330-be4a-67978cc6ef03" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Agent_Create_Quote_For_Active_Trip" searchProperties="true"><con:settings/><con:savedRecentRuns>1</con:savedRecentRuns><con:testStep type="calltestcase" name="Agent Login To Appliation" id="286620f3-5236-455c-82da-dadc382f2d87"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>9032b71d-9389-4f09-8381-f9dec26b07f1</con:targetTestCase><con:properties><con:property><con:name>user_id</con:name><con:value>759117</con:value></con:property><con:property><con:name>auth_key</con:name><con:value>c5209aa8aa7b11e68ada0e2443afcf25</con:value></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTJjYTA3MDEwZTBjMzY5MWM0ZmMwOGUyZDc4ODY4N2Y3BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA02VC0kiIiQyYSQxMCRJa3hSLk02Sm9aYmhKZm9DTVZMZ0guBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--b5646d4b64bede7aaabf34de1ea223ae3a4ab72a; path=/; HttpOnly</con:value></con:property></con:properties><con:returnProperties><con:entry>user_id</con:entry><con:entry>auth_key</con:entry><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="agent get the hash key" id="ceb89233-8a70-424c-9ad7-ade9fd9669dd"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>http://${#Project#traveler_apiendpoint}/api/v4/requested_trips/${#TestCase#request_id}/quotes/new</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#agent_user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>Fr9SNPtce3yKmM9YR5RUKDcom312C6XJSPzk+9cBpWM=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="User get request new quote default detail" id="defe744c-47af-493c-a55e-296caa3081d6"><con:settings/><con:config service="REQUESTNEWQUOTEDETAIL" resourcePath="/api/v4/requested_trips/{requestID}/quotes/new" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="User get request new quote default detail" id="7dcecddc-c035-4ed9-a869-45324dc9b574" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="Cookie" value="${Agent Login To Appliation#Cookie}"/>
  &lt;con:entry key="TT-Mobile" value="${agent get the hash key#hash_key}"/>
  &lt;con:entry key="Accept" value="application/json"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v4/requested_trips/889699/quotes/new</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="cc7eb389-b1e2-4742-943d-63db37226b92" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="0cf8574d-2ae0-4e23-b096-e43710400f80" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def quoteinclexcl = json_response_holder.quote_incl_excl_info_form_enabled;
def hotelformenabled = json_response_holder.hotel_form_enabled;
def days = json_response_holder.trip_days.day_of_itinerary;
log.info quoteinclexcl
log.info "days " + days
String quoteincl ="";
String saveinclusions = false;
if(quoteinclexcl == true){
	saveinclusions = "true";
	def inclid = json_response_holder.quote_inclusions.id;
	int i=0;
	for (value in inclid){
	quoteincl = (quoteincl == "") ? quoteincl + "\""+i+"\":{\"id\":\"\",\"inclusion_id\":\""+value+"\",\"comments_added\":\"\",\"is_included\":\"0\"}" : quoteincl + "," + "\""+i+"\":{\"id\":\"\",\"inclusion_id\":\""+value+"\",\"comments_added\":\"\",\"is_included\":\"1\"}";
	i++;
	}
	log.info quoteincl
}else{
	messageExchange.modelItem.testCase.setPropertyValue("excluded","kdfhsdkjsdhfl");
	messageExchange.modelItem.testCase.setPropertyValue("included","kdfhsdkjhhvjsdhfl");
}

String travel_days="";
for( int i=0; i&lt;days.size();i++){
	travel_days = (travel_days == "") ? travel_days + "\""+i+"\":{\"title\":\"fdhghdg\", \"description\":\"gfdhgf\", \"_destroy\":\"false\"}" : travel_days + "," +"\""+i+"\":{\"title\":\"fdhghdg\", \"description\":\"gfdhgf\", \"_destroy\":\"false\"}"; 
}
log.info travel_days

String hoteldetail = ""; 
if(hotelformenabled){
	String nights="1";
	for (int i=2; i&lt;days.size();i++){
		nights =  nights+","+i
	}

String hotelName = context.expand('${#TestCase#hotelnames}');
String cityName = context.expand('${#TestCase#hotelcityname}');
String cityId = context.expand('${#TestCase#hotelcityid}');

String hoteinfo  = "\"hotels_info_1\":[{\"alternate_hotel\":\"0\",\"hotel_id\":\"\",\"ta_url\":\"\",\"hotel_name\":\"\",\"hotel_city_id\":\"\",\"hotel_city\":\"\",\"hotel_category\":\"\",\"room_type\":\"\",\"comments\":\"\"}],";
hoteldetail = hoteinfo + "\"hotels_info\":[{\"nights\":\""+nights+"\",\"hotel_name\":\""+hotelName+"\",\"hotel_id\":\"\",\"hotel_ta_url\":\"\",\"alternate_hotel\":\"0\",\"room_type\":\"Standard\",\"hotel_city_id\":\""+cityId+"\",\"hotel_city_name\":\""+cityName+"\",\"hotel_category\":\"\",\"comments\":\"gfdgsgds\"}],";
log.info  "hoteldetail "+hoteldetail
}else{
	messageExchange.modelItem.testCase.setPropertyValue("hotelnames","kdfhsdkjsdhfl");
}
log.info  "hoteldetail "+hoteldetail
messageExchange.modelItem.testCase.setPropertyValue("hoteldetail",hoteldetail);
messageExchange.modelItem.testCase.setPropertyValue("quoteincl",quoteincl);
messageExchange.modelItem.testCase.setPropertyValue("traveldays",travel_days);
messageExchange.modelItem.testCase.setPropertyValue("saveinclusions",saveinclusions);</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="requestID" value="${#TestCase#request_id}"/>
</con:parameters><con:parameterOrder><con:entry>requestID</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="Again agent get the hash key" id="7abdadfd-0d2f-4707-bb28-79add4961d8b"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>http://${#Project#traveler_apiendpoint}/api/v4/requested_trips/${#TestCase#request_id}/quotes</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#agent_user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>post</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>moebPtN2nZl9eM39PpWrKKv70v5s0VEQ/wk0h1VNY48=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Agent give quote to traveler" id="10b6d4e0-20cf-4f95-b281-75bf6723f826"><con:settings/><con:config service="CreateQuote" resourcePath="/api/v4/requested_trips/{request_id}/quotes" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Agent give quote to traveler" id="07a0e598-f3b8-4df7-8cfa-e914de4d51d2" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment xmlns:con="http://eviware.com/soapui/config">
  &lt;con:entry key="Cookie" value="${Agent Login To Appliation#Cookie}"/>
  &lt;con:entry key="TT-Mobile" value="${Again agent get the hash key#hash_key}"/>
  &lt;con:entry key="Accept" value="application/json"/>
&lt;/xml-fragment></con:setting></con:settings><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"utf8":"✓", "version":"", "should_warnings_override":"false", "commit":"SAVE &amp; SEND", "quote_match_param":"last", "quote":  {"type_of_trip":"",   "days":"8",   "nights":"7",   "perperson":"per person",   "currency":"Rupee",   "flight_cost":"0",   "included":"${#TestCase#included}",   "excluded":"${#TestCase#excluded}",   "visa_cost":"0",   "price":"${#TestCase#price}",   "hotels":"${#TestCase#hotelnames}",   "flights":"",   "cabs":"fjhfjhfjhgfj",   "terms_conditions":"gghhg",   "quote_inclusions_attributes":{ 	${#TestCase#quoteincl}       },    "trip_days_attributes":{    	${#TestCase#traveldays}     },   "description":"hfhg"}, "quote_land_package_cost":"0", ${#TestCase#hoteldetail} "flights_not_included":"true", "save_inclusions":"${#TestCase#saveinclusions}", "action":"create", "controller":"quotes", "requested_trip_id":"${#TestCase#request_id}"}</con:request><con:originalUri>http://traveler-api.ttdev.in/api/v4/requested_trips/946765/quotes/</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7dfb941c-19d8-4646-8ed0-86cf91a99255" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="42d213a9-2946-4128-87e1-c4e0648496d1" name="verify and get  generated quote id"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def is_activate = json_response_holder.is_activate;
def quote_id = json_response_holder.quote_id;
def message = json_response_holder.message;
assert(quote_id != null):"Quote not generated"

log.info quote_id + " " + message
messageExchange.modelItem.testCase.setPropertyValue("quoteid",String.valueOf(quote_id));
messageExchange.modelItem.testCase.setPropertyValue("Cookie",context.expand('${Agent Login To Appliation#Cookie}'));
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="request_id" value="${#TestCase#request_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>request_id</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>user_id</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>auth_key</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Cookie</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTJjYTA3MDEwZTBjMzY5MWM0ZmMwOGUyZDc4ODY4N2Y3BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA02VC0kiIiQyYSQxMCRJa3hSLk02Sm9aYmhKZm9DTVZMZ0guBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--b5646d4b64bede7aaabf34de1ea223ae3a4ab72a; path=/; HttpOnly</con:value></con:property><con:property><con:name>user_email</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>user_password</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>request_id</con:name><con:value>2612706</con:value></con:property><con:property><con:name>Agent_TagID</con:name><con:value>521</con:value></con:property><con:property><con:name>quoteid</con:name><con:value>4807337</con:value></con:property><con:property><con:name>quoteincl</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">"0":{"id":"","inclusion_id":"21","comments_added":"","is_included":"0"},"1":{"id":"","inclusion_id":"22","comments_added":"","is_included":"1"},"2":{"id":"","inclusion_id":"23","comments_added":"","is_included":"1"},"3":{"id":"","inclusion_id":"24","comments_added":"","is_included":"1"},"4":{"id":"","inclusion_id":"25","comments_added":"","is_included":"1"},"5":{"id":"","inclusion_id":"26","comments_added":"","is_included":"1"},"6":{"id":"","inclusion_id":"27","comments_added":"","is_included":"1"},"7":{"id":"","inclusion_id":"28","comments_added":"","is_included":"1"},"8":{"id":"","inclusion_id":"29","comments_added":"","is_included":"1"},"9":{"id":"","inclusion_id":"30","comments_added":"","is_included":"1"},"10":{"id":"","inclusion_id":"45","comments_added":"","is_included":"1"},"11":{"id":"","inclusion_id":"46","comments_added":"","is_included":"1"},"12":{"id":"","inclusion_id":"47","comments_added":"","is_included":"1"},"13":{"id":"","inclusion_id":"48","comments_added":"","is_included":"1"},"14":{"id":"","inclusion_id":"49","comments_added":"","is_included":"1"},"15":{"id":"","inclusion_id":"50","comments_added":"","is_included":"1"},"16":{"id":"","inclusion_id":"51","comments_added":"","is_included":"1"},"17":{"id":"","inclusion_id":"52","comments_added":"","is_included":"1"},"18":{"id":"","inclusion_id":"488","comments_added":"","is_included":"1"},"19":{"id":"","inclusion_id":"489","comments_added":"","is_included":"1"}</con:value></con:property><con:property><con:name>traveldays</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">"0":{"title":"fdhghdg", "description":"gfdhgf", "_destroy":"false"},"1":{"title":"fdhghdg", "description":"gfdhgf", "_destroy":"false"},"2":{"title":"fdhghdg", "description":"gfdhgf", "_destroy":"false"},"3":{"title":"fdhghdg", "description":"gfdhgf", "_destroy":"false"},"4":{"title":"fdhghdg", "description":"gfdhgf", "_destroy":"false"},"5":{"title":"fdhghdg", "description":"gfdhgf", "_destroy":"false"}</con:value></con:property><con:property><con:name>saveinclusions</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">true</con:value></con:property><con:property><con:name>price</con:name><con:value>32430</con:value></con:property><con:property><con:name>hotelnames</con:name><con:value>Tall Trees</con:value></con:property><con:property><con:name>hotelcityname</con:name><con:value>Munnar</con:value></con:property><con:property><con:name>hotelcityid</con:name><con:value>26320</con:value></con:property><con:property><con:name>hoteldetail</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">"hotels_info_1":[{"alternate_hotel":"0","hotel_id":"","ta_url":"","hotel_name":"","hotel_city_id":"","hotel_city":"","hotel_category":"","room_type":"","comments":""}],"hotels_info":[{"nights":"1,2,3,4,5","hotel_name":"Tall Trees","hotel_id":"","hotel_ta_url":"","alternate_hotel":"0","room_type":"Standard","hotel_city_id":"26320","hotel_city_name":"Munnar","hotel_category":"","comments":"gfdgsgds"}],</con:value></con:property><con:property><con:name>excluded</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>included</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/></con:testCase><con:testCase id="10705ef9-92e8-4869-9ce3-56a3dd0370d2" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Agent_Create_Invoice_For_Traveller" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Agent Login To Appliation" id="e524c5c5-44fe-4551-9571-e2dac3d61084"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>9032b71d-9389-4f09-8381-f9dec26b07f1</con:targetTestCase><con:properties><con:property><con:name>user_id</con:name><con:value>759117</con:value></con:property><con:property><con:name>auth_key</con:name><con:value>c5209aa8aa7b11e68ada0e2443afcf25</con:value></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWIwOTI1Njc4Y2U2ZDFlOWE4Y2UwNmZmMWY2ZGFhMGQxBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA02VC0kiIiQyYSQxMCRJa3hSLk02Sm9aYmhKZm9DTVZMZ0guBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--3f53599b634ab97418f4ec9af0ef40c4f8053c67; path=/; HttpOnly</con:value></con:property></con:properties><con:returnProperties><con:entry>user_id</con:entry><con:entry>auth_key</con:entry><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="agent get the hash key for prefilled invoice data" id="120dbddf-d61a-4234-a695-181e55bd1a0c"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>http://${#Project#traveler_apiendpoint}/api/v4/invoices/prefill_invoice_data.json?quote_id=${#TestCase#quoteId}</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#agent_user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>y40txKTvFEsq/XFct6wrqBUAoaB+c4qX4ecz8WYGlM8=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Agent get prefilled invoice data" id="647e76b6-6a64-4fd5-b902-4ee511a106de"><con:settings/><con:config service="GetPrefilledInvoiceData" resourcePath="/api/v4/invoices/prefill_invoice_data.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Agent get prefilled invoice data" id="b352093f-30b4-4595-8fc0-2612e0b51b77" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Agent Login To Appliation#Cookie}"/>
  <con:entry key="TT-Mobile" value="${agent get the hash key for prefilled invoice data#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.agentnotifier"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v4/invoices/prefill_invoice_data.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="aeb41f42-2bf2-43e5-a5ea-1921e521e8a8" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="45a76e78-2e94-4e13-8608-ea70284ccacd" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def deliverablesAgent =  json_response_holder.deliverables_agent.deliverable_id;
def agentCommision =  json_response_holder.agent_commision;
def selectPayment =  json_response_holder.selectPayment;
def quoteID = json_response_holder.invoice.quote_id;
def agentID = json_response_holder.invoice.agent_id;
def invoiceID = json_response_holder.invoice.invoice_id;
def invoiceTravellerFullName = json_response_holder.invoice.traveller_fullname;
def invoiceTravellerPhnNo = json_response_holder.invoice.traveller_phone_no;
def invoiceAgentEarning = json_response_holder.invoice.agent_earning;
def requestedTripID = json_response_holder.invoice.requested_trip_id;
def invoiceDiscount = json_response_holder.invoice.discount;
if(invoiceDiscount==null){
	invoiceDiscount = 0.0;
}
def invoiceDiscountTraveller = json_response_holder.invoice.discount_traveller;
def invoiceFlightAmount = json_response_holder.invoice.flight_amount;
def invoiceVisaCost = json_response_holder.invoice.visa_cost;
def invoiceTTComission = json_response_holder.invoice.ttcommission;
def invoiceVoucherDays = json_response_holder.invoice.voucher_days;
def invoiceTOC = json_response_holder.invoice.toc;
def invoiceTripDetails = json_response_holder.invoice.trip_details;
def invoiceEmail = json_response_holder.invoice.email;
def invoicePhoneNumber = json_response_holder.invoice.phone_no;
def invoiceAddress = json_response_holder.invoice.address;

messageExchange.modelItem.testCase.setPropertyValue("deliverablesAgent",deliverablesAgent[0].toString());
messageExchange.modelItem.testCase.setPropertyValue("selectPayment",selectPayment.toString());
messageExchange.modelItem.testCase.setPropertyValue("quoteID",quoteID.toString());
messageExchange.modelItem.testCase.setPropertyValue("agentID",agentID.toString());
messageExchange.modelItem.testCase.setPropertyValue("invoiceID",invoiceID.toString());
messageExchange.modelItem.testCase.setPropertyValue("invoiceTravellerFullName",invoiceTravellerFullName.toString());
messageExchange.modelItem.testCase.setPropertyValue("invoiceTravellerPhnNo",invoiceTravellerPhnNo.toString());
messageExchange.modelItem.testCase.setPropertyValue("invoiceAgentEarning",invoiceAgentEarning.toString());
messageExchange.modelItem.testCase.setPropertyValue("requestedTripID",requestedTripID.toString());
messageExchange.modelItem.testCase.setPropertyValue("invoiceDiscount",invoiceDiscount.toString());
messageExchange.modelItem.testCase.setPropertyValue("invoiceDiscountTraveller",invoiceDiscountTraveller.toString());
messageExchange.modelItem.testCase.setPropertyValue("invoiceFlightAmount",invoiceFlightAmount.toString());
messageExchange.modelItem.testCase.setPropertyValue("invoiceVisaCost",invoiceVisaCost.toString());
messageExchange.modelItem.testCase.setPropertyValue("invoiceTTComission",invoiceTTComission.toString());
messageExchange.modelItem.testCase.setPropertyValue("invoiceVoucherDays",invoiceVoucherDays.toString());
messageExchange.modelItem.testCase.setPropertyValue("invoiceTOC",invoiceTOC.toString());
messageExchange.modelItem.testCase.setPropertyValue("invoiceTripDetails",invoiceTripDetails.toString());
messageExchange.modelItem.testCase.setPropertyValue("invoiceEmail",invoiceEmail.toString());
messageExchange.modelItem.testCase.setPropertyValue("invoicePhoneNumber",invoicePhoneNumber.toString());
messageExchange.modelItem.testCase.setPropertyValue("invoiceAddress",invoiceAddress.toString());
messageExchange.modelItem.testCase.setPropertyValue("agentCommision",agentCommision.toString());


def paymentsAttributesID = json_response_holder.invoice.payments_attributes.id[0];
def paymentsAttributesFromTraveler = json_response_holder.invoice.payments_attributes.from_traveler[0];
def paymentsAttributesInvoiceTravelerCurrency = json_response_holder.invoice.payments_attributes.traveler_currency[0];
def paymentsAttributesInvoiceScheduleDate = json_response_holder.invoice.payments_attributes.scheduled_date[0];
def paymentsAttributesInvoiceDestroy = json_response_holder.invoice.payments_attributes.__destroy[0];
def paymentsAttributesInvoiceStatus = json_response_holder.invoice.payments_attributes.status[0];
def paymentsAttributesInvoiceUserID = json_response_holder.invoice.payments_attributes.user_id[0];
def paymentsAttributesInvoiceMethod = json_response_holder.invoice.payments_attributes.method[0];
def paymentsAttributesInvoiceTDR = json_response_holder.invoice.payments_attributes.tdr[0];
def paymentsAttributesInvoicePG = json_response_holder.invoice.payments_attributes.pg[0];
def paymentsAttributesInvoiceMode = json_response_holder.invoice.payments_attributes.mode[0];
def paymentsAttributesFromTravelerActual = json_response_holder.invoice.payments_attributes.from_traveler_actual[0];
def paymentsAttributesInvoiceDescription = json_response_holder.invoice.payments_attributes.description[0];
def paymentsAttributesInvoiceIsEditable = json_response_holder.invoice.payments_attributes.is_editable[0];

messageExchange.modelItem.testCase.setPropertyValue("paymentsAttributesID",paymentsAttributesID.toString());
messageExchange.modelItem.testCase.setPropertyValue("paymentsAttributesFromTraveler",paymentsAttributesFromTraveler.toString());
messageExchange.modelItem.testCase.setPropertyValue("paymentsAttributesInvoiceTravelerCurrency",paymentsAttributesInvoiceTravelerCurrency.toString());
messageExchange.modelItem.testCase.setPropertyValue("paymentsAttributesInvoiceScheduleDate",paymentsAttributesInvoiceScheduleDate.toString());
messageExchange.modelItem.testCase.setPropertyValue("paymentsAttributesInvoiceDestroy",paymentsAttributesInvoiceDestroy.toString());
messageExchange.modelItem.testCase.setPropertyValue("paymentsAttributesInvoiceStatus",paymentsAttributesInvoiceStatus.toString());
messageExchange.modelItem.testCase.setPropertyValue("paymentsAttributesInvoiceUserID",paymentsAttributesInvoiceUserID.toString());
messageExchange.modelItem.testCase.setPropertyValue("paymentsAttributesInvoiceMethod",paymentsAttributesInvoiceMethod.toString());
messageExchange.modelItem.testCase.setPropertyValue("paymentsAttributesInvoiceTDR",paymentsAttributesInvoiceTDR.toString());
messageExchange.modelItem.testCase.setPropertyValue("paymentsAttributesInvoicePG",paymentsAttributesInvoicePG.toString());
messageExchange.modelItem.testCase.setPropertyValue("paymentsAttributesInvoiceMode",paymentsAttributesInvoiceMode.toString());
messageExchange.modelItem.testCase.setPropertyValue("paymentsAttributesFromTravelerActual",paymentsAttributesFromTravelerActual.toString());
messageExchange.modelItem.testCase.setPropertyValue("paymentsAttributesInvoiceDescription",paymentsAttributesInvoiceDescription.toString());
messageExchange.modelItem.testCase.setPropertyValue("paymentsAttributesInvoiceIsEditable",paymentsAttributesInvoiceIsEditable.toString());

String today = new Date().format('yyyy-MM-dd');
messageExchange.modelItem.testCase.setPropertyValue("todayDate",today);


</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="quote_id" value="${#TestCase#quoteId}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="agent get the hash key for sync invoice comission payment" id="3e9892a3-a881-4da0-ad78-843f06c32b53"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>http://${#Project#traveler_apiendpoint}/api/v4/invoices/sync_invoice_commission_payments.json</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#agent_user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>post</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>moebPtN2nZl9eM39PpWrKKv70v5s0VEQ/wk0h1VNY48=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user sync invoice comission payment" id="3e31a9a7-149b-4ceb-b7a9-aa64a04a936d"><con:settings/><con:config service="SyncInvoiceComissionPayment" resourcePath="/api/v4/invoices/sync_invoice_commission_payments.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user sync invoice comission payment" id="6c77f7f1-8c5f-49d4-a022-94b5a9930451" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Agent Login To Appliation#Cookie}"/>
  <con:entry key="TT-Mobile" value="${agent get the hash key for sync invoice comission payment#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.agentnotifier"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{
  "agent_commission_charged": ${#TestCase#agentCommision},
  "discount": ${#TestCase#invoiceDiscount},
  "discount_traveller": ${#TestCase#invoiceDiscountTraveller},
  "flight_amount": ${#TestCase#invoiceFlightAmount},
  "payments_attributes": [
    {
      "_destroy": ${#TestCase#paymentsAttributesInvoiceDestroy},
      "from_traveler": ${#TestCase#paymentsAttributesFromTraveler},
      "is_editable": ${#TestCase#paymentsAttributesInvoiceIsEditable},
      "scheduled_date": "${#TestCase#todayDate}",
      "status": "${#TestCase#paymentsAttributesInvoiceStatus}",
      "traveler_currency": "${#TestCase#paymentsAttributesInvoiceTravelerCurrency}",
      "user_id": ${#TestCase#paymentsAttributesInvoiceUserID}
    }
  ],
  "quote_id": "${#TestCase#quoteId}",
  "visa_cost": ${#TestCase#invoiceVisaCost}
}</con:request><con:originalUri>http://traveler-api.ttdev.in/api/v4/invoices/sync_invoice_commission_payments.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="a661edfa-0286-4d36-b36a-9d2c31698e45" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="00378e4a-df06-45c2-8868-0f6d4f9caa52" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def netAmount = json_response_holder.net_amount;
def landPackagecCost = json_response_holder.land_package_cost;
def commisionAmount = json_response_holder.commision_amount;
def amountPayToYou = json_response_holder.amount_payable_to_you;
def agentCommissionCharged = json_response_holder.agent_commission_charged;</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="agent get the hash key for create invoice" id="430c37bc-9fbb-48f0-8029-b85e75cb83b4"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>http://${#Project#traveler_apiendpoint}/api/v4/invoices/create_invoice.json</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#agent_user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>post</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>moebPtN2nZl9eM39PpWrKKv70v5s0VEQ/wk0h1VNY48=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="agent create invoice" id="8a17e918-4e19-40b9-8d38-8b0f0ea63331"><con:settings/><con:config service="CreateInvoice" resourcePath="/api/v4/invoices/create_invoice.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="agent create invoice" id="e3a9e075-4d6c-4525-92dc-93a23212a8ff" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Agent Login To Appliation#Cookie}"/>
  <con:entry key="TT-Mobile" value="${agent get the hash key for create invoice#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.agentnotifier"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{
  "agent_commision": ${#TestCase#agentCommision},
  "invoice": {
    "address": "",
    "agent_earning": ${#TestCase#invoiceAgentEarning},
    "agent_id": ${#TestCase#agentID},
    "discount": ${#TestCase#invoiceDiscount},
    "discount_traveller": ${#TestCase#invoiceDiscountTraveller},
    "email": "${#TestCase#invoiceEmail}",
    "flight_amount": 0.0,
    "payments_attributes": [
      {
        "from_traveler": ${#TestCase#paymentsAttributesFromTraveler},
        "is_editable": ${#TestCase#paymentsAttributesInvoiceIsEditable},
        "scheduled_date": "${#TestCase#todayDate}",
        "status": "${#TestCase#paymentsAttributesInvoiceStatus}",
        "traveler_currency": "${#TestCase#paymentsAttributesInvoiceTravelerCurrency}",
        "user_id": ${#TestCase#paymentsAttributesInvoiceUserID}
      }
    ],
    "phone_no": "${#TestCase#invoicePhoneNumber}",
    "quote_id": "${#TestCase#quoteId}",
    "requested_trip_id": ${#TestCase#requestedTripID},
    "invoices_deliverables_attributes": [
      {
        "deliverable_id": ${#TestCase#deliverablesAgent},
        "_destroy": false
      }
    ],
    "toc": "snnsnssnsnsnccbvdjvb",
    "traveller_fullname": "${#TestCase#invoiceTravellerFullName}",
    "traveller_phone_no": "${#TestCase#invoiceTravellerPhnNo}",
    "trip_details": "abcd",
    "ttcommission": ${#TestCase#invoiceTTComission},
    "visa_cost": ${#TestCase#invoiceVisaCost},
    "voucher_days": ${#TestCase#invoiceVoucherDays}
  },
  "selectPayment": ${#TestCase#selectPayment}
}</con:request><con:originalUri>http://traveler-api.ttdev.in/api/v4/invoices/create_invoice.json</con:originalUri><con:assertion type="GroovyScriptAssertion" id="011ab8fc-2955-46b2-a2d7-64337921b61f" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def success = json_response_holder.success;

assert success == true:" success is not true"

def invoiceID = json_response_holder.invoice_id;

messageExchange.modelItem.testCase.setPropertyValue("invoiceID",invoiceID.toString());</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="1da10344-87d8-4224-b2b9-0668c77e2919" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="agent get the hash key for send invoice" id="17d8cedc-5b97-45d8-b796-6a40112922af"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>http://${#Project#traveler_apiendpoint}/api/v4/invoices/send_invoice.json?id=${#TestCase#invoiceID}</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>vWv7DOnKbdl2x969H1ZbYVLZzCwZoAFG0uxdDcj4aKw=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="agent send invoice to user" id="ebc5bcf4-f775-4688-b1d6-cb45aca0dd97"><con:settings/><con:config service="SendInvoice" resourcePath="/api/v4/invoices/send_invoice.json" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="agent send invoice to user" id="f2b52a37-569e-4411-99e9-5faa33461d92" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Agent Login To Appliation#Cookie}"/>
  <con:entry key="TT-Mobile" value="${agent get the hash key for send invoice#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.agentnotifier"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v4/invoices/send_invoice.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="d65b21f3-edc3-43ce-b930-32df7d77baca" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="b118c711-8340-42b0-9355-d6e23ab49b6f" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def success = json_response_holder.success;
def message = json_response_holder.message;


assert success==true:"Success is not true"
assert message == "Mail Triggered" : "Message should be Mail Triggered but it is "+message</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="${#TestCase#invoiceID}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>quoteId</con:name><con:value>4807334</con:value></con:property><con:property><con:name>agentID</con:name><con:value>759117</con:value></con:property><con:property><con:name>invoiceID</con:name><con:value>4807334-2612701</con:value></con:property><con:property><con:name>invoiceTravellerFullName</con:name><con:value>Lorem Tt Test Ipsum G</con:value></con:property><con:property><con:name>invoiceTravellerPhnNo</con:name><con:value>+912541369874</con:value></con:property><con:property><con:name>invoiceAgentEarning</con:name><con:value>30516.63</con:value></con:property><con:property><con:name>requestedTripID</con:name><con:value>2612701</con:value></con:property><con:property><con:name>invoiceDiscount</con:name><con:value>0.0</con:value></con:property><con:property><con:name>invoiceDiscountTraveller</con:name><con:value>0</con:value></con:property><con:property><con:name>invoiceFlightAmount</con:name><con:value>0</con:value></con:property><con:property><con:name>invoiceVisaCost</con:name><con:value>0</con:value></con:property><con:property><con:name>invoiceTTComission</con:name><con:value>1913.37</con:value></con:property><con:property><con:name>invoiceVoucherDays</con:name><con:value>3</con:value></con:property><con:property><con:name>invoiceTOC</con:name><con:value>null</con:value></con:property><con:property><con:name>invoiceTripDetails</con:name><con:value>Name: Lorem Tt Test Ipsum G
Adult(s): 0
Child: 0
Destination: Thailand
</con:value></con:property><con:property><con:name>invoiceEmail</con:name><con:value>ttprodagent@gmail.com</con:value></con:property><con:property><con:name>invoicePhoneNumber</con:name><con:value>8977636376</con:value></con:property><con:property><con:name>invoiceAddress</con:name><con:value>abc, delhi, new delhi, India - 110069</con:value></con:property><con:property><con:name>paymentsAttributesID</con:name><con:value>null</con:value></con:property><con:property><con:name>paymentsAttributesFromTraveler</con:name><con:value>32430</con:value></con:property><con:property><con:name>paymentsAttributesInvoiceTravelerCurrency</con:name><con:value>Rupee</con:value></con:property><con:property><con:name>paymentsAttributesInvoiceScheduleDate</con:name><con:value>null</con:value></con:property><con:property><con:name>paymentsAttributesInvoiceDestroy</con:name><con:value>false</con:value></con:property><con:property><con:name>paymentsAttributesInvoiceStatus</con:name><con:value>Scheduled</con:value></con:property><con:property><con:name>paymentsAttributesInvoiceUserID</con:name><con:value>759117</con:value></con:property><con:property><con:name>paymentsAttributesInvoiceMethod</con:name><con:value>null</con:value></con:property><con:property><con:name>paymentsAttributesInvoiceTDR</con:name><con:value>null</con:value></con:property><con:property><con:name>paymentsAttributesInvoicePG</con:name><con:value>null</con:value></con:property><con:property><con:name>paymentsAttributesInvoiceMode</con:name><con:value>null</con:value></con:property><con:property><con:name>paymentsAttributesFromTravelerActual</con:name><con:value>null</con:value></con:property><con:property><con:name>paymentsAttributesInvoiceDescription</con:name><con:value>null</con:value></con:property><con:property><con:name>paymentsAttributesInvoiceIsEditable</con:name><con:value>true</con:value></con:property><con:property><con:name>agentCommision</con:name><con:value>5.9</con:value></con:property><con:property><con:name>todayDate</con:name><con:value>2018-04-09</con:value></con:property><con:property><con:name>selectPayment</con:name><con:value>1</con:value></con:property><con:property><con:name>deliverablesAgent</con:name><con:value>1</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="e8e982b3-f367-4425-95a9-c15a669bc0bb" name="BookingScenarios"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="33c4dd5b-ba5b-40da-9d79-156762fd453a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User_Book_Trip_With_Quote" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="loggedIn user rquest a quote" id="f496efe6-d370-405b-9683-011abc404b57"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>2040cc92-e9d4-4517-a063-39395e85cdb8</con:targetTestCase><con:properties><con:property><con:name>number_of_days</con:name><con:value>${#TestCase#number_of_days}</con:value></con:property><con:property><con:name>per_page</con:name><con:value>${#TestCase#per_page}</con:value></con:property><con:property><con:name>activity</con:name><con:value>${#TestCase#activity}</con:value></con:property><con:property><con:name>months</con:name><con:value>${#TestCase#months}</con:value></con:property><con:property><con:name>price_ranges</con:name><con:value>${#TestCase#price_ranges}</con:value></con:property><con:property><con:name>destination_type</con:name><con:value>${#TestCase#destination_type}</con:value></con:property><con:property><con:name>activity_encoded</con:name><con:value>${#TestCase#activity_encoded}</con:value></con:property><con:property><con:name>price_ranges_encoded</con:name><con:value>${#TestCase#price_ranges_encoded}</con:value></con:property><con:property><con:name>months_encoded</con:name><con:value>${#TestCase#months_encoded}</con:value></con:property><con:property><con:name>destination_id</con:name><con:value>57</con:value></con:property><con:property><con:name>destination_name</con:name></con:property><con:property><con:name>selected_package_id</con:name></con:property><con:property><con:name>selected_package_name</con:name></con:property><con:property><con:name>selected_package_price_total</con:name></con:property><con:property><con:name>selected_package_headline</con:name></con:property><con:property><con:name>selected_package_days</con:name></con:property><con:property><con:name>selected_package_nights</con:name></con:property><con:property><con:name>selected_package_cities</con:name></con:property><con:property><con:name>destinations</con:name></con:property><con:property><con:name>destinations_encoded</con:name></con:property><con:property><con:name>destination_names</con:name></con:property><con:property><con:name>destination_names_encoded</con:name></con:property><con:property><con:name>start_date</con:name></con:property><con:property><con:name>RequestID</con:name><con:value>2612700</con:value></con:property><con:property><con:name>request_redirectUrl</con:name></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CkkiD3Nlc3Npb25faWQGOgZFVEkiJWVjYjUzNDY2YzNlYjNjZDQwNTY4M2I1OGFiMzVlMDdiBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRVVDZUSmpMeTdYOTZsVThCQ1o2MG11BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVEkiGGFsbG93X2N1c3RvbWl6YXRpb24GOwBGaQPC3SdJIgpmbGFzaAY7AFRvOiVBY3Rpb25EaXNwYXRjaDo6Rmxhc2g6OkZsYXNoSGFzaAk6CkB1c2VkbzoIU2V0BjoKQGhhc2h9AEY6DEBjbG9zZWRGOg1AZmxhc2hlc3sGOhJydHJpcF9jcmVhdGVkVDoJQG5vdzA%3D--5a9dc55db8de226d23f337964187f99b783c0336; path=/; HttpOnly</con:value></con:property><con:property><con:name>user_id</con:name></con:property></con:properties><con:returnProperties><con:entry>destination_id</con:entry><con:entry>RequestID</con:entry><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="admin tag agent with trip" id="459be2b3-e3e1-4781-81e7-f0a633281ee8"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>16865839-07a3-4d5d-aff3-bc09595f8bf3</con:targetTestCase><con:properties><con:property><con:name>Agent_TagID</con:name><con:value>521</con:value></con:property><con:property><con:name>request_id</con:name><con:value>${loggedIn user rquest a quote#requestID}</con:value></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTU4OTcyYTQxZGRjOTYzMjZkNGI0MTkyMDM3MTRmNTIyBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA06VC0kiIiQyYSQxMCRJWDBpRG9HLm5aSWRmR1ptbFNXRC9PBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--457d55494989f3df4d7d18e9f38077ef5f1a62c6; path=/; HttpOnly</con:value></con:property></con:properties><con:returnProperties><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for destination hotel detail" id="055ad068-a10b-4c9d-9f76-2ffcc6baf922"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/destinations/${loggedIn user rquest a quote#destination_id}/destination_hotel_images</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>Ia9dfDxP6ZJx2ivLDfModyD88YUQL1o9IZAkcpUrA+Q=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="get destination hotel list" id="8f0e9688-adc5-4365-9492-11753b99ef28"><con:settings/><con:config service="DestinationHotelImages" resourcePath="/api/{api_version}/destinations/{destinationId}/destination_hotel_images" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="get destination hotel list" id="f00ef24d-81e4-44a7-b43f-423ab7721729" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for destination hotel detail#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/destinations/67/destination_hotel_images.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="69d48784-f9f6-4d46-b41f-4e97a941b7af" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="7d45352f-9592-4e9d-a41f-cafe6b72a7f2" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def hotels= json_response_holder.hotel_images;
for (def hotel in hotels){
	messageExchange.modelItem.testCase.setPropertyValue("address",hotel.address);
	messageExchange.modelItem.testCase.setPropertyValue("category",String.valueOf(hotel.category));
	messageExchange.modelItem.testCase.setPropertyValue("city",hotel.city);
	messageExchange.modelItem.testCase.setPropertyValue("city_id",String.valueOf(hotel.city_id));
	messageExchange.modelItem.testCase.setPropertyValue("d_id",String.valueOf(hotel.d_id));
	messageExchange.modelItem.testCase.setPropertyValue("img",hotel.img);
	messageExchange.modelItem.testCase.setPropertyValue("name",hotel.name);
	messageExchange.modelItem.testCase.setPropertyValue("picture",hotel.pictures);
	break;

}
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="destinationId" value="${loggedIn user rquest a quote#destination_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>destinationId</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="agent give quote to traveller" id="44ab973a-7631-4cc0-9b8d-b9e173561b75"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5794d198-7055-4330-be4a-67978cc6ef03</con:targetTestCase><con:properties><con:property><con:name>user_id</con:name></con:property><con:property><con:name>auth_key</con:name></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWVlYmJiOWE5OGMzZjZhMjc2NjZkZTJhOWIwMzAzODAzBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA02VC0kiIiQyYSQxMCRJa3hSLk02Sm9aYmhKZm9DTVZMZ0guBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--5e4435032621d355dc980f5eaba3295f29d5f4ae; path=/; HttpOnly</con:value></con:property><con:property><con:name>user_email</con:name></con:property><con:property><con:name>user_password</con:name></con:property><con:property><con:name>request_id</con:name><con:value>${loggedIn user rquest a quote#requestID}</con:value></con:property><con:property><con:name>Agent_TagID</con:name><con:value>521</con:value></con:property><con:property><con:name>quoteid</con:name><con:value>4807333</con:value></con:property><con:property><con:name>quoteincl</con:name></con:property><con:property><con:name>traveldays</con:name></con:property><con:property><con:name>saveinclusions</con:name></con:property><con:property><con:name>price</con:name><con:value>32430</con:value></con:property><con:property><con:name>hotelnames</con:name><con:value>${#TestCase#name}</con:value></con:property><con:property><con:name>hotelcityname</con:name><con:value>${#TestCase#city}</con:value></con:property><con:property><con:name>hotelcityid</con:name><con:value>${#TestCase#city_id}</con:value></con:property><con:property><con:name>hoteldetail</con:name></con:property><con:property><con:name>excluded</con:name></con:property><con:property><con:name>included</con:name></con:property></con:properties><con:returnProperties><con:entry>Cookie</con:entry><con:entry>quoteid</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for get quote detail" id="8201a104-f13a-4f4c-9da1-37e3664432d0"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/${loggedIn user rquest a quote#RequestID}?include_quotes=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>HR2vkkIAkj4AZocl115N4Bb3VksLfnd8tOP66GlCa6w=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user view request detail" id="fee55bc9-56ef-4b33-997e-c084c681a1a0"><con:settings/><con:config service="GetRequestDetail" resourcePath="/api/{version}/requested_trips/{rtripId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user view request detail" id="3bb87632-a6dc-4ec6-a6d6-0d9edb486313" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for get quote detail#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1838358</con:originalUri><con:assertion type="GroovyScriptAssertion" id="bfa7c350-0a50-471d-9c61-269f35459f60" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def quotes = json_response_holder.quotes;
def tripdays = json_response_holder.trip_days;
String quoteID = context.expand('${agent give quote to traveller#quoteid}');
String price = context.expand('${agent give quote to traveller#price}');
boolean isQuoteFound = false;
for (quote in quotes){
	if(quote.id==quoteID.toInteger() &amp;&amp; quote.price==price.toInteger()){
		isQuoteFound =  true;
		break;
	}	
}

assert isQuoteFound==true : "quoteID "+quoteID +" are not present in response quotes detaile "+ quotes
messageExchange.modelItem.testCase.setPropertyValue("tripdays",tripdays.toString());
</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="d6176990-0894-4497-b407-3505c582b8e6" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="rtripId" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="include_quotes" value="true"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="version" value="v2"/>
</con:parameters><con:parameterOrder><con:entry>rtripId</con:entry><con:entry>version</con:entry><con:entry>include_quotes</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for set quote status detail" id="ec6b557d-b08b-4360-87dc-b4e07c7874d2"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/requested_trips/${loggedIn user rquest a quote#RequestID}/quotes/${agent give quote to traveller#quoteid}/statusChange?state=2</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>Bd8/URrRlwWO4RIS1a6J2hMEQWudJdlvvE9H13cxHko=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user book the quote" id="3ecee475-5fc4-44f9-9266-8ff172ed5a3e"><con:settings/><con:config service="SetStatusOfQuote" resourcePath="/api/v1/requested_trips/{requested_trip_id}/quotes/{quote_id}/statusChange" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user book the quote" id="22a0bfba-34d9-4651-b664-c2b5ce6edd42" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for set quote status detail#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1840799/statusChange</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8a48e4c6-a379-4a2a-9a29-632c32ea6a2a" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="bedb9a4a-ccf0-4a32-8381-3f6809b84273" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def successmessage = json_response_holder.success;



assert (successmessage=="Quote has been chosen") : "message should be Quote has been chosen  bit it is "+successmessage
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="state" value="2"/>
  <con:entry key="requested_trip_id" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="quote_id" value="${agent give quote to traveller#quoteid}"/>
</con:parameters><con:parameterOrder><con:entry>requested_trip_id</con:entry><con:entry>quote_id</con:entry><con:entry>state</con:entry><con:entry>quote_decline_reason</con:entry><con:entry>request</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="and also get the hash for get quote detail" id="362422a5-888e-45f3-8872-234f7e2aac2d"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/${loggedIn user rquest a quote#RequestID}?include_quotes=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>HR2vkkIAkj4AZocl115N4Bb3VksLfnd8tOP66GlCa6w=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="and also user view request detail" id="ad8be60f-badb-4b5b-bf00-f851796119f2"><con:settings/><con:config service="GetRequestDetail" resourcePath="/api/{version}/requested_trips/{rtripId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="and also user view request detail" id="3bb87632-a6dc-4ec6-a6d6-0d9edb486313" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for get quote detail#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1838358</con:originalUri><con:assertion type="GroovyScriptAssertion" id="bfa7c350-0a50-471d-9c61-269f35459f60" name="get request detail and validate quote status is booked"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def quotes = json_response_holder.quotes;

String quoteID = context.expand('${agent give quote to traveller#quoteid}');
String price = context.expand('${agent give quote to traveller#price}');
String destination = json_response_holder.to_loc;
messageExchange.modelItem.testCase.setPropertyValue("destination",destination);
boolean isQuoteFound = false;
for (quote in quotes){
	if(quote.id==quoteID.toInteger() &amp;&amp; quote.price==price.toInteger() &amp;&amp; quote.status==2){
	messageExchange.modelItem.testCase.setPropertyValue("currency",quote.currency);
	messageExchange.modelItem.testCase.setPropertyValue("agentname",quote.user.first_name +" "+quote.user.last_name);	
		isQuoteFound =  true;
		break;
	}	
}


assert isQuoteFound==true : "quoteID "+quoteID +" are not present in response quotes detaile "+ quotes
</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="d6176990-0894-4497-b407-3505c582b8e6" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="rtripId" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="include_quotes" value="true"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="version" value="v2"/>
</con:parameters><con:parameterOrder><con:entry>rtripId</con:entry><con:entry>version</con:entry><con:entry>include_quotes</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for get offer" id="cc1e102a-62df-4697-8757-3f73b98c653c"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/offer/show?rtrip_id=${loggedIn user rquest a quote#RequestID}</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>otz2tm5syqe1w68GIA/QMP2RizmJ5dBhtP8AHYYbC8E=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user get offer on trip" id="2b25ad6a-031d-4d4a-a290-3395ef7119e6"><con:settings/><con:config service="GetOffer" resourcePath="/api/v2/offer/show" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user get offer on trip" id="9fcda0c2-b78a-443d-9fd2-adb31082e3b5" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for get offer#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/offer/show</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="61825835-f102-46b7-a025-ef81f05aa60b" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="270d8ace-ce94-4412-b563-f60540a02363" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def valid = json_response_holder.valid;
def msg = json_response_holder.msg;
def rtripID = json_response_holder.rtrip_id;
def OfferType = json_response_holder.offer_type;
def offerCode = json_response_holder.offer_code;
def tnc = json_response_holder.tnc;

assert valid!=null; " is not present"
assert msg!=null; "msg is not present"
assert rtripID!=null; "rtripID is not present"
assert OfferType!=null; "OfferType is not present"
assert offerCode!=null; "offerCode is not present"
assert tnc!=null; "tnc is not present"
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="rtrip_id" value="${loggedIn user rquest a quote#RequestID}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash to init transaction" id="d6f3e29d-d8af-4143-9cae-3832eb2b98d2"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/transactions/initialize_transaction?requested_trip_id=${loggedIn user rquest a quote#RequestID}&amp;quote_id=${agent give quote to traveller#quoteid}&amp;amount=${agent give quote to traveller#price}&amp;currency=${#TestCase#currency}&amp;api_request=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>zELUDIMt9YwhG12XoJPLbgTIYHsHYij+lLjKNWtn/ik=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user initiate transaction" id="3b7bf40b-aa64-49cb-adc7-6ab3c2a19097"><con:settings/><con:config service="InitPaymentTransaction" resourcePath="/api/v1/transactions/initialize_transaction" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user initiate transaction" id="f04f33ec-7585-41eb-81d8-fd9f01e6d740" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash to init transaction#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/transactions/initialize_transaction</con:originalUri><con:assertion type="GroovyScriptAssertion" id="fda4b753-77dc-41d7-94f3-65a85234e2ed" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def emailID = json_response_holder.email;
def actualAmount = json_response_holder.amount_actual;
def txnid =  json_response_holder.txnid;
def method =  json_response_holder.method;
def currency = json_response_holder.currency;
def pg_charges = json_response_holder.pg_charges;
def destination = json_response_holder.destination;
def agent_name = json_response_holder.agent_name;
def cfee ;
def total_price;

String price = context.expand('${agent give quote to traveller#price}');

try{
	cfee = json_response_holder.dest_charge.CFEE.charge_value;
	
}
catch (Exception e){
	cfee = 0;
}

agent_name = agent_name.toLowerCase();
def agentname=context.expand('${#TestCase#agentname}').toLowerCase();


total_price=price.toInteger()+cfee.toInteger();
//log.info total_price;
assert emailID==context.expand('${#Project#user_email}'): "Miss-mating in user email id" 
assert actualAmount == total_price.toInteger():"price are miss-match" 
assert txnid!=null : "txnid is not present"
assert method == "PAYU" : "payment method is not payu"
assert currency == context.expand('${#TestCase#currency}');
assert pg_charges!=null : "pg_charges is not present"
assert destination == context.expand('${#TestCase#destination}');
//assert agent_name == agentname ;
log.info total_price.toInteger();


</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="7118cf3e-a43a-47cd-adec-c2277ece13b9" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="requested_trip_id" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="amount" value="${agent give quote to traveller#price}"/>
  <con:entry key="api_request" value="true"/>
  <con:entry key="quote_id" value="${agent give quote to traveller#quoteid}"/>
  <con:entry key="currency" value="${#TestCase#currency}"/>
</con:parameters><con:parameterOrder><con:entry>payment_id</con:entry><con:entry>requested_trip_id</con:entry><con:entry>quote_id</con:entry><con:entry>amount</con:entry><con:entry>currency</con:entry><con:entry>api_request</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="and also get the hash for trip day detail" id="7a68cef2-62fa-4ea6-bd80-d88354914dca"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/quotes/${agent give quote to traveller#quoteid}/get_tripday_detail</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>knt5dyxZ9DkdyF3NOqw7gjqGE5xac09c2vfedKJThIY=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user get trip days detail" id="23d4718a-abce-42ea-a816-2da210564b4b"><con:settings/><con:config service="GetTripDayDetail" resourcePath="/api/v1/quotes/{quote_id}/get_tripday_detail" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user get trip days detail" id="c28ecd1f-323b-4419-b65b-6dc4b84e0989" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${and also get the hash for trip day detail#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v1/quotes/1534649/get_tripday_detail</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="6b4f0ffa-3240-4ff8-b88e-eb8b257cf433" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="b3e928d2-62e4-4836-9a9e-d0755b1e9a7a" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def tripdays = context.expand('${#TestCase#tripdays}')

def id = json_response_holder.id;

def tripdyasitenerary =  json_response_holder.trip_days.day_of_itinerary;

assert tripdyasitenerary.size() ==  tripdays.toInteger(): "Days are miss-match"
assert id!=null : "trip days id is not present"

</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="quote_id" value="${agent give quote to traveller#quoteid}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>number_of_days</con:name><con:value>4-6</con:value></con:property><con:property><con:name>per_page</con:name><con:value>50</con:value></con:property><con:property><con:name>activity</con:name><con:value>5,3</con:value></con:property><con:property><con:name>months</con:name><con:value>4-6</con:value></con:property><con:property><con:name>price_ranges</con:name><con:value>0-10000</con:value></con:property><con:property><con:name>destination_type</con:name><con:value>international</con:value></con:property><con:property><con:name>price_ranges_encoded</con:name><con:value>0-10000</con:value></con:property><con:property><con:name>activity_encoded</con:name><con:value>5%2C3</con:value></con:property><con:property><con:name>months_encoded</con:name><con:value>4-6</con:value></con:property><con:property><con:name>quoteIDs</con:name><con:value>[[cabs:fjhfjhfjhgfj, perperson:per person, terms_conditions:gghhg, status:1, is_full_payment:null, places:null, raw_text:true, currency:Rupee, hotels:gjfjhg, id:1840799, hotel_new_format:true, updated_at:2016-10-22T01:16:57+05:30, flights:, price:32430, days:9, excluded:● Meal plan : Breakfast
, description:hfhg, included:● Meal plan : Lunch
● Meal plan : Dinner
● Airport Transfer : Arrival
● Airport Transfer : Departure
● International Airfare
● Internal Airfare
● Government Taxes/VAT/ Service Charges
● Siteseeing 
● Cab type : SIC
● Cab type : Private
● VISA
● Travel Insurance
, share_quote_url:http://traveltriangle.com/quotes/31383430373939/share_quote, user:[chat_channel:notification_199585, id:199585, first_name:TT Agent Demo, username:TT agent demo, last_visited:2016-05-24T14:44:17+05:30, tr_a_profile:[thumb_image:/avatars/thumb/missing.png, company:TT Agent Demo, medium_image:/avatars/medium/missing.png], email:ttagentdemo@gmail.com, last_name:, converted_trips:16, agent_reviews_converted_quotes:0, rating_extra_info:[pos_rating_percentage:0.0], current_phone_no:+918826683631]], [cabs:fjhfjhfjhgfj, perperson:per person, terms_conditions:gghhg, status:1, is_full_payment:null, places:null, raw_text:true, currency:Rupee, hotels:gjfjhg, id:1838358, hotel_new_format:true, updated_at:2016-10-21T14:03:20+05:30, flights:, price:32430, days:9, excluded:● Meal plan : Breakfast
, description:hfhg, included:● Meal plan : Lunch
● Meal plan : Dinner
● Airport Transfer : Arrival
● Airport Transfer : Departure
● International Airfare
● Internal Airfare
● Government Taxes/VAT/ Service Charges
● Siteseeing 
● Cab type : SIC
● Cab type : Private
● VISA
● Travel Insurance
, share_quote_url:http://traveltriangle.com/quotes/31383338333538/share_quote, user:[chat_channel:notification_199585, id:199585, first_name:TT Agent Demo, username:TT agent demo, last_visited:2016-05-24T14:44:17+05:30, tr_a_profile:[thumb_image:/avatars/thumb/missing.png, company:TT Agent Demo, medium_image:/avatars/medium/missing.png], email:ttagentdemo@gmail.com, last_name:, converted_trips:16, agent_reviews_converted_quotes:0, rating_extra_info:[pos_rating_percentage:0.0], current_phone_no:+918826683631]]]</con:value></con:property><con:property><con:name>currency</con:name><con:value>Rupee</con:value></con:property><con:property><con:name>agentname</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">test agent </con:value></con:property><con:property><con:name>destination</con:name><con:value>Thailand</con:value></con:property><con:property><con:name>address</con:name><con:value>80/167 Moo 9, Nongprue, Banglamung Pattaya - 20150
, Thailand</con:value></con:property><con:property><con:name>category</con:name><con:value>4</con:value></con:property><con:property><con:name>city</con:name><con:value>Pattaya</con:value></con:property><con:property><con:name>city_id</con:name><con:value>26357</con:value></con:property><con:property><con:name>d_id</con:name><con:value>2422243</con:value></con:property><con:property><con:name>img</con:name><con:value>w_300/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861507/original/4901399_63_b_w.jpg</con:value></con:property><con:property><con:name>name</con:name><con:value>Centara Nova Hotel &amp; Spa Pattaya</con:value></con:property><con:property><con:name>picture</con:name><con:value>w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861507/original/4901399_63_b_w.jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861508/original/4901399_87_b_w.jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861509/original/4901399_91_b_w.jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861510/original/centara-nova-hotel-spa_(1).jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861511/original/centara-nova-hotel-spa_(2).jpg</con:value></con:property><con:property><con:name>tripdays</con:name><con:value>4</con:value></con:property><con:property><con:name>paymentID</con:name><con:value>115271</con:value></con:property></con:properties></con:testCase><con:testCase id="48adab56-a6bc-407a-99e8-7e562a8e7baf" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User_Book_Trip_With_Invoice" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="loggedIn user rquest a quote" id="b03c59ce-e88f-4cb9-902b-14ecf6e4d885"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>2040cc92-e9d4-4517-a063-39395e85cdb8</con:targetTestCase><con:properties><con:property><con:name>number_of_days</con:name><con:value>${#TestCase#number_of_days}</con:value></con:property><con:property><con:name>per_page</con:name><con:value>${#TestCase#per_page}</con:value></con:property><con:property><con:name>activity</con:name><con:value>${#TestCase#activity}</con:value></con:property><con:property><con:name>months</con:name><con:value>${#TestCase#months}</con:value></con:property><con:property><con:name>price_ranges</con:name><con:value>${#TestCase#price_ranges}</con:value></con:property><con:property><con:name>destination_type</con:name><con:value>${#TestCase#destination_type}</con:value></con:property><con:property><con:name>activity_encoded</con:name><con:value>${#TestCase#activity_encoded}</con:value></con:property><con:property><con:name>price_ranges_encoded</con:name><con:value>${#TestCase#price_ranges_encoded}</con:value></con:property><con:property><con:name>months_encoded</con:name><con:value>${#TestCase#months_encoded}</con:value></con:property><con:property><con:name>destination_id</con:name><con:value>57</con:value></con:property><con:property><con:name>destination_name</con:name></con:property><con:property><con:name>selected_package_id</con:name></con:property><con:property><con:name>selected_package_name</con:name></con:property><con:property><con:name>selected_package_price_total</con:name></con:property><con:property><con:name>selected_package_headline</con:name></con:property><con:property><con:name>selected_package_days</con:name></con:property><con:property><con:name>selected_package_nights</con:name></con:property><con:property><con:name>selected_package_cities</con:name></con:property><con:property><con:name>destinations</con:name></con:property><con:property><con:name>destinations_encoded</con:name></con:property><con:property><con:name>destination_names</con:name></con:property><con:property><con:name>destination_names_encoded</con:name></con:property><con:property><con:name>start_date</con:name></con:property><con:property><con:name>RequestID</con:name><con:value>2612701</con:value></con:property><con:property><con:name>request_redirectUrl</con:name></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CkkiD3Nlc3Npb25faWQGOgZFVEkiJThkZTE0Y2NkYzE3ZmE1YjdmNzMyNzNhMjgxMjYxZDI2BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRVVDZUSmpMeTdYOTZsVThCQ1o2MG11BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVEkiGGFsbG93X2N1c3RvbWl6YXRpb24GOwBGaQPC3SdJIgpmbGFzaAY7AFRvOiVBY3Rpb25EaXNwYXRjaDo6Rmxhc2g6OkZsYXNoSGFzaAk6CkB1c2VkbzoIU2V0BjoKQGhhc2h9AEY6DEBjbG9zZWRGOg1AZmxhc2hlc3sGOhJydHJpcF9jcmVhdGVkVDoJQG5vdzA%3D--d430e07ca3bd26161dfe7f3f4a914091e9375e48; path=/; HttpOnly</con:value></con:property><con:property><con:name>user_id</con:name></con:property></con:properties><con:returnProperties><con:entry>destination_id</con:entry><con:entry>RequestID</con:entry><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="admin tag agent with trip" id="bedcd8a5-cd1c-4617-aed9-0377d3b6334b"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>16865839-07a3-4d5d-aff3-bc09595f8bf3</con:targetTestCase><con:properties><con:property><con:name>Agent_TagID</con:name><con:value>521</con:value></con:property><con:property><con:name>request_id</con:name><con:value>${loggedIn user rquest a quote#requestID}</con:value></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTZkMGIzYzAzZDU0ZWJlZThhYTgzNzQ3NDdkMjhhMzhkBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA06VC0kiIiQyYSQxMCRJWDBpRG9HLm5aSWRmR1ptbFNXRC9PBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--4dfbaf376c6bf6216be1fae72a259a391eceaf8a; path=/; HttpOnly</con:value></con:property></con:properties><con:returnProperties><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for destination hotel detail" id="ace332a0-cc5e-4549-851e-fe32533d279b"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/destinations/${loggedIn user rquest a quote#destination_id}/destination_hotel_images</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>Ia9dfDxP6ZJx2ivLDfModyD88YUQL1o9IZAkcpUrA+Q=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="get destination hotel list" id="9287f4d2-aa9c-45f5-a796-a6e6d6181b0e"><con:settings/><con:config service="DestinationHotelImages" resourcePath="/api/{api_version}/destinations/{destinationId}/destination_hotel_images" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="get destination hotel list" id="f00ef24d-81e4-44a7-b43f-423ab7721729" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for destination hotel detail#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/destinations/67/destination_hotel_images.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="69d48784-f9f6-4d46-b41f-4e97a941b7af" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="7d45352f-9592-4e9d-a41f-cafe6b72a7f2" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def hotels= json_response_holder.hotel_images;
for (def hotel in hotels){
	messageExchange.modelItem.testCase.setPropertyValue("address",hotel.address);
	messageExchange.modelItem.testCase.setPropertyValue("category",String.valueOf(hotel.category));
	messageExchange.modelItem.testCase.setPropertyValue("city",hotel.city);
	messageExchange.modelItem.testCase.setPropertyValue("city_id",String.valueOf(hotel.city_id));
	messageExchange.modelItem.testCase.setPropertyValue("d_id",String.valueOf(hotel.d_id));
	messageExchange.modelItem.testCase.setPropertyValue("img",hotel.img);
	messageExchange.modelItem.testCase.setPropertyValue("name",hotel.name);
	messageExchange.modelItem.testCase.setPropertyValue("picture",hotel.pictures);
	break;

}
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="destinationId" value="${loggedIn user rquest a quote#destination_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>destinationId</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="agent give quote to traveller" id="0560c035-2597-486b-bab8-31ffefbc7cc2"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5794d198-7055-4330-be4a-67978cc6ef03</con:targetTestCase><con:properties><con:property><con:name>user_id</con:name></con:property><con:property><con:name>auth_key</con:name></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWVmNmNiNzg5YjkwMzA1ZDAwZDUzMjAwYjlmNzVkMjQzBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA02VC0kiIiQyYSQxMCRJa3hSLk02Sm9aYmhKZm9DTVZMZ0guBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--11db24d68751654ce7c7fb6c61947be147c12f3f; path=/; HttpOnly</con:value></con:property><con:property><con:name>user_email</con:name></con:property><con:property><con:name>user_password</con:name></con:property><con:property><con:name>request_id</con:name><con:value>${loggedIn user rquest a quote#requestID}</con:value></con:property><con:property><con:name>Agent_TagID</con:name><con:value>521</con:value></con:property><con:property><con:name>quoteid</con:name><con:value>4807334</con:value></con:property><con:property><con:name>quoteincl</con:name></con:property><con:property><con:name>traveldays</con:name></con:property><con:property><con:name>saveinclusions</con:name></con:property><con:property><con:name>price</con:name><con:value>32430</con:value></con:property><con:property><con:name>hotelnames</con:name><con:value>${#TestCase#name}</con:value></con:property><con:property><con:name>hotelcityname</con:name><con:value>${#TestCase#city}</con:value></con:property><con:property><con:name>hotelcityid</con:name><con:value>${#TestCase#city_id}</con:value></con:property><con:property><con:name>hoteldetail</con:name></con:property><con:property><con:name>excluded</con:name></con:property><con:property><con:name>included</con:name></con:property></con:properties><con:returnProperties><con:entry>Cookie</con:entry><con:entry>quoteid</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for get quote detail" id="e0fcac4d-3c0f-44fd-9187-0d70de35d890"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/${loggedIn user rquest a quote#RequestID}?include_quotes=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>SZ/rHC1YvzpPGhHqJrkCu5JRb/YV9bFy1yUO9JE4aeI=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user view request detail" id="55730de5-1cf4-4923-baca-0a71b3e3571b"><con:settings/><con:config service="GetRequestDetail" resourcePath="/api/{version}/requested_trips/{rtripId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user view request detail" id="3bb87632-a6dc-4ec6-a6d6-0d9edb486313" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for get quote detail#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1838358</con:originalUri><con:assertion type="GroovyScriptAssertion" id="bfa7c350-0a50-471d-9c61-269f35459f60" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def quotes = json_response_holder.quotes;
def tripdays = json_response_holder.trip_days;
String quoteID = context.expand('${agent give quote to traveller#quoteid}');
String price = context.expand('${agent give quote to traveller#price}');
boolean isQuoteFound = false;
for (quote in quotes){
	if(quote.id==quoteID.toInteger() &amp;&amp; quote.price==price.toInteger()){
		isQuoteFound =  true;
		break;
	}	
}

assert isQuoteFound==true : "quoteID "+quoteID +" are not present in response quotes detaile "+ quotes
messageExchange.modelItem.testCase.setPropertyValue("tripdays",tripdays.toString());
</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="d6176990-0894-4497-b407-3505c582b8e6" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="rtripId" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="include_quotes" value="true"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="version" value="v2"/>
</con:parameters><con:parameterOrder><con:entry>rtripId</con:entry><con:entry>version</con:entry><con:entry>include_quotes</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for set quote status detail" id="bb9c38db-f6b2-418d-af06-52f1c5e3143f"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/requested_trips/${loggedIn user rquest a quote#RequestID}/quotes/${agent give quote to traveller#quoteid}/statusChange?state=2</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>zP3CiZZ53P3QoRjrRwfnz9xFKxeE4eur7XrTDt/YuS0=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user book the quote" id="505b2f2f-a6ca-468e-a44e-a6a277ab8f41"><con:settings/><con:config service="SetStatusOfQuote" resourcePath="/api/v1/requested_trips/{requested_trip_id}/quotes/{quote_id}/statusChange" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user book the quote" id="22a0bfba-34d9-4651-b664-c2b5ce6edd42" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for set quote status detail#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1840799/statusChange</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8a48e4c6-a379-4a2a-9a29-632c32ea6a2a" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="bedb9a4a-ccf0-4a32-8381-3f6809b84273" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def successmessage = json_response_holder.success;



assert (successmessage=="Quote has been chosen") : "message should be Quote has been chosen  bit it is "+successmessage
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="state" value="2"/>
  <con:entry key="requested_trip_id" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="quote_id" value="${agent give quote to traveller#quoteid}"/>
</con:parameters><con:parameterOrder><con:entry>requested_trip_id</con:entry><con:entry>quote_id</con:entry><con:entry>state</con:entry><con:entry>quote_decline_reason</con:entry><con:entry>request</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="and also get the hash for get quote detail" id="706e5b96-4fc1-46ff-adb0-761716693e5f"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/${loggedIn user rquest a quote#RequestID}?include_quotes=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>SZ/rHC1YvzpPGhHqJrkCu5JRb/YV9bFy1yUO9JE4aeI=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="and also user view request detail" id="2e466e4c-34e7-407c-87f3-6e8d8ef917b5"><con:settings/><con:config service="GetRequestDetail" resourcePath="/api/{version}/requested_trips/{rtripId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="and also user view request detail" id="3bb87632-a6dc-4ec6-a6d6-0d9edb486313" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for get quote detail#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1838358</con:originalUri><con:assertion type="GroovyScriptAssertion" id="bfa7c350-0a50-471d-9c61-269f35459f60" name="get request detail and validate quote status is booked"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def quotes = json_response_holder.quotes;

String quoteID = context.expand('${agent give quote to traveller#quoteid}');
String price = context.expand('${agent give quote to traveller#price}');
String destination = json_response_holder.to_loc;
messageExchange.modelItem.testCase.setPropertyValue("destination",destination);
boolean isQuoteFound = false;
for (quote in quotes){
	if(quote.id==quoteID.toInteger() &amp;&amp; quote.price==price.toInteger() &amp;&amp; quote.status==2){
	messageExchange.modelItem.testCase.setPropertyValue("currency",quote.currency);
	messageExchange.modelItem.testCase.setPropertyValue("agentname",quote.user.first_name +" "+quote.user.last_name);		
		isQuoteFound =  true;
		break;
	}	
}

assert isQuoteFound==true : "quoteID "+quoteID +" are not present in response quotes detaile "+ quotes
</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="d6176990-0894-4497-b407-3505c582b8e6" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="rtripId" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="include_quotes" value="true"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="version" value="v2"/>
</con:parameters><con:parameterOrder><con:entry>rtripId</con:entry><con:entry>version</con:entry><con:entry>include_quotes</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="agent create and send invoice" id="f6f3c2c9-7a04-40c9-80ea-3a9c5767e9ee"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>10705ef9-92e8-4869-9ce3-56a3dd0370d2</con:targetTestCase><con:properties><con:property><con:name>quoteId</con:name><con:value>${agent give quote to traveller#quoteid}</con:value></con:property><con:property><con:name>agentID</con:name></con:property><con:property><con:name>invoiceID</con:name><con:value>4807334-2612701</con:value></con:property><con:property><con:name>invoiceTravellerFullName</con:name></con:property><con:property><con:name>invoiceTravellerPhnNo</con:name></con:property><con:property><con:name>invoiceAgentEarning</con:name></con:property><con:property><con:name>requestedTripID</con:name></con:property><con:property><con:name>invoiceDiscount</con:name></con:property><con:property><con:name>invoiceDiscountTraveller</con:name></con:property><con:property><con:name>invoiceFlightAmount</con:name></con:property><con:property><con:name>invoiceVisaCost</con:name></con:property><con:property><con:name>invoiceTTComission</con:name></con:property><con:property><con:name>invoiceVoucherDays</con:name></con:property><con:property><con:name>invoiceTOC</con:name></con:property><con:property><con:name>invoiceTripDetails</con:name></con:property><con:property><con:name>invoiceEmail</con:name></con:property><con:property><con:name>invoicePhoneNumber</con:name></con:property><con:property><con:name>invoiceAddress</con:name></con:property><con:property><con:name>paymentsAttributesID</con:name></con:property><con:property><con:name>paymentsAttributesFromTraveler</con:name></con:property><con:property><con:name>paymentsAttributesInvoiceTravelerCurrency</con:name></con:property><con:property><con:name>paymentsAttributesInvoiceScheduleDate</con:name></con:property><con:property><con:name>paymentsAttributesInvoiceDestroy</con:name></con:property><con:property><con:name>paymentsAttributesInvoiceStatus</con:name></con:property><con:property><con:name>paymentsAttributesInvoiceUserID</con:name></con:property><con:property><con:name>paymentsAttributesInvoiceMethod</con:name></con:property><con:property><con:name>paymentsAttributesInvoiceTDR</con:name></con:property><con:property><con:name>paymentsAttributesInvoicePG</con:name></con:property><con:property><con:name>paymentsAttributesInvoiceMode</con:name></con:property><con:property><con:name>paymentsAttributesFromTravelerActual</con:name></con:property><con:property><con:name>paymentsAttributesInvoiceDescription</con:name></con:property><con:property><con:name>paymentsAttributesInvoiceIsEditable</con:name></con:property><con:property><con:name>agentCommision</con:name></con:property><con:property><con:name>todayDate</con:name></con:property><con:property><con:name>selectPayment</con:name></con:property><con:property><con:name>deliverablesAgent</con:name></con:property></con:properties><con:returnProperties><con:entry>invoiceID</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="and also get the hash to download the invoice" id="d10defea-0748-475b-92f7-d912e9a5e7a0"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/invoice/download/${agent create and send invoice#invoiceID}</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>eRuPcw6BVkM2Z3JA8vR6fDG2diSYJn5hZN43Dv4XdNk=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for get offer" id="44b6c17a-dd96-4137-8109-a7f1791f99e3"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/offer/show?rtrip_id=${loggedIn user rquest a quote#RequestID}</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>1tcgmDYOhl6WECvPCk6rOJWvrTdLOaE9myJbo9X1bU0=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user get offer on trip" id="2fd7d974-d6b0-444c-9501-5b484241b47b"><con:settings/><con:config service="GetOffer" resourcePath="/api/v2/offer/show" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user get offer on trip" id="9fcda0c2-b78a-443d-9fd2-adb31082e3b5" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for get offer#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/offer/show</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="61825835-f102-46b7-a025-ef81f05aa60b" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="270d8ace-ce94-4412-b563-f60540a02363" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def valid = json_response_holder.valid;
def msg = json_response_holder.msg;
def rtripID = json_response_holder.rtrip_id;
def OfferType = json_response_holder.offer_type;
def offerCode = json_response_holder.offer_code;
def tnc = json_response_holder.tnc;

assert valid!=null; " is not present"
assert msg!=null; "msg is not present"
assert rtripID!=null; "rtripID is not present"
assert OfferType!=null; "OfferType is not present"
assert offerCode!=null; "offerCode is not present"
assert tnc!=null; "tnc is not present"
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="rtrip_id" value="${loggedIn user rquest a quote#RequestID}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="user download invoice" id="3e431fb0-7294-4f4e-8f7d-7ca292c84b87"><con:settings/><con:config service="DownloadInvoice" resourcePath="/api/v1/invoice/download/{invoiceID}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user download invoice" id="8d735de3-8993-4118-bc09-685b8a7619ba" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${and also get the hash to download the invoice#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v1/invoice/download/38098</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="64264fad-c635-4d3d-a37d-59b78c52cbab" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="6ecab69f-fbdc-4812-beaa-528f610017d0" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def invoiceID = json_response_holder.invoice.id;
def paymentID = json_response_holder.payment_next.id;

String invoiceid = context.expand('${agent create and send invoice#invoiceID}');

assert invoiceID == invoiceid.toInteger(): "invoice id should be "+ invoiceid +" but it is "+invoiceID
messageExchange.modelItem.testCase.setPropertyValue("paymentID",paymentID.toString());
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="invoiceID" value="${agent create and send invoice#invoiceID}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash to init transaction with invoice" id="03d6915e-648c-4f27-84f3-1fd1ea3ecf0f"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/transactions/initialize_transaction?payment_id=${#TestCase#paymentID}&amp;requested_trip_id=${loggedIn user rquest a quote#RequestID}&amp;quote_id=${agent give quote to traveller#quoteid}&amp;amount=${agent give quote to traveller#price}&amp;currency=${#TestCase#currency}&amp;api_request=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>3j3sOB8TA1c0q98RXwIZJEZP4n1C04+c7s/tKXHsgxc=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user initiate transaction with invoice" id="77b56be5-dfcc-4f3a-971c-2d6611ed6ed8"><con:settings/><con:config service="InitPaymentTransaction" resourcePath="/api/v1/transactions/initialize_transaction" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user initiate transaction with invoice" id="f04f33ec-7585-41eb-81d8-fd9f01e6d740" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash to init transaction with invoice#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/transactions/initialize_transaction</con:originalUri><con:assertion type="GroovyScriptAssertion" id="fda4b753-77dc-41d7-94f3-65a85234e2ed" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def emailID = json_response_holder.email;
def actualAmount = json_response_holder.amount_actual;
def txnid =  json_response_holder.txnid;
def method =  json_response_holder.method;
def currency = json_response_holder.currency;
def pg_charges = json_response_holder.pg_charges;
def destination = json_response_holder.destination;
def agent_name = json_response_holder.agent_name;

String price = context.expand('${agent give quote to traveller#price}');
log.info actualAmount
log.info price
assert emailID==context.expand('${#Project#user_email}'): "Miss-mating in user email id" 
//assert actualAmount == price.toInteger():"price are miss-match" 
assert txnid!=null : "txnid is not present"
assert method == "PAYU" : "payment method is not payu"
assert currency == context.expand('${#TestCase#currency}');
assert pg_charges!=null : "pg_charges is not present"
assert destination == context.expand('${#TestCase#destination}');
//assert agent_name.toLowerCase() == context.expand('${#TestCase#agentname}').toLowerCase();



</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="7118cf3e-a43a-47cd-adec-c2277ece13b9" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="amount" value="${agent give quote to traveller#price}"/>
  <con:entry key="requested_trip_id" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="quote_id" value="${agent give quote to traveller#quoteid}"/>
  <con:entry key="payment_id" value="${#TestCase#paymentID}"/>
  <con:entry key="api_request" value="true"/>
  <con:entry key="currency" value="${#TestCase#currency}"/>
</con:parameters><con:parameterOrder><con:entry>payment_id</con:entry><con:entry>requested_trip_id</con:entry><con:entry>quote_id</con:entry><con:entry>amount</con:entry><con:entry>currency</con:entry><con:entry>api_request</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>number_of_days</con:name><con:value>4-6</con:value></con:property><con:property><con:name>per_page</con:name><con:value>50</con:value></con:property><con:property><con:name>activity</con:name><con:value>5,3</con:value></con:property><con:property><con:name>months</con:name><con:value>4-6</con:value></con:property><con:property><con:name>price_ranges</con:name><con:value>0-10000</con:value></con:property><con:property><con:name>destination_type</con:name><con:value>international</con:value></con:property><con:property><con:name>price_ranges_encoded</con:name><con:value>0-10000</con:value></con:property><con:property><con:name>activity_encoded</con:name><con:value>5%2C3</con:value></con:property><con:property><con:name>months_encoded</con:name><con:value>4-6</con:value></con:property><con:property><con:name>quoteIDs</con:name><con:value>[[cabs:fjhfjhfjhgfj, perperson:per person, terms_conditions:gghhg, status:1, is_full_payment:null, places:null, raw_text:true, currency:Rupee, hotels:gjfjhg, id:1840799, hotel_new_format:true, updated_at:2016-10-22T01:16:57+05:30, flights:, price:32430, days:9, excluded:● Meal plan : Breakfast
, description:hfhg, included:● Meal plan : Lunch
● Meal plan : Dinner
● Airport Transfer : Arrival
● Airport Transfer : Departure
● International Airfare
● Internal Airfare
● Government Taxes/VAT/ Service Charges
● Siteseeing 
● Cab type : SIC
● Cab type : Private
● VISA
● Travel Insurance
, share_quote_url:http://traveltriangle.com/quotes/31383430373939/share_quote, user:[chat_channel:notification_199585, id:199585, first_name:TT Agent Demo, username:TT agent demo, last_visited:2016-05-24T14:44:17+05:30, tr_a_profile:[thumb_image:/avatars/thumb/missing.png, company:TT Agent Demo, medium_image:/avatars/medium/missing.png], email:ttagentdemo@gmail.com, last_name:, converted_trips:16, agent_reviews_converted_quotes:0, rating_extra_info:[pos_rating_percentage:0.0], current_phone_no:+918826683631]], [cabs:fjhfjhfjhgfj, perperson:per person, terms_conditions:gghhg, status:1, is_full_payment:null, places:null, raw_text:true, currency:Rupee, hotels:gjfjhg, id:1838358, hotel_new_format:true, updated_at:2016-10-21T14:03:20+05:30, flights:, price:32430, days:9, excluded:● Meal plan : Breakfast
, description:hfhg, included:● Meal plan : Lunch
● Meal plan : Dinner
● Airport Transfer : Arrival
● Airport Transfer : Departure
● International Airfare
● Internal Airfare
● Government Taxes/VAT/ Service Charges
● Siteseeing 
● Cab type : SIC
● Cab type : Private
● VISA
● Travel Insurance
, share_quote_url:http://traveltriangle.com/quotes/31383338333538/share_quote, user:[chat_channel:notification_199585, id:199585, first_name:TT Agent Demo, username:TT agent demo, last_visited:2016-05-24T14:44:17+05:30, tr_a_profile:[thumb_image:/avatars/thumb/missing.png, company:TT Agent Demo, medium_image:/avatars/medium/missing.png], email:ttagentdemo@gmail.com, last_name:, converted_trips:16, agent_reviews_converted_quotes:0, rating_extra_info:[pos_rating_percentage:0.0], current_phone_no:+918826683631]]]</con:value></con:property><con:property><con:name>currency</con:name><con:value>Rupee</con:value></con:property><con:property><con:name>agentname</con:name><con:value>test agent </con:value></con:property><con:property><con:name>destination</con:name><con:value>Thailand</con:value></con:property><con:property><con:name>address</con:name><con:value>80/167 Moo 9, Nongprue, Banglamung Pattaya - 20150
, Thailand</con:value></con:property><con:property><con:name>category</con:name><con:value>4</con:value></con:property><con:property><con:name>city</con:name><con:value>Pattaya</con:value></con:property><con:property><con:name>city_id</con:name><con:value>26357</con:value></con:property><con:property><con:name>d_id</con:name><con:value>2422243</con:value></con:property><con:property><con:name>img</con:name><con:value>w_300/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861507/original/4901399_63_b_w.jpg</con:value></con:property><con:property><con:name>name</con:name><con:value>Centara Nova Hotel &amp; Spa Pattaya</con:value></con:property><con:property><con:name>picture</con:name><con:value>w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861507/original/4901399_63_b_w.jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861508/original/4901399_87_b_w.jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861509/original/4901399_91_b_w.jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861510/original/centara-nova-hotel-spa_(1).jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861511/original/centara-nova-hotel-spa_(2).jpg</con:value></con:property><con:property><con:name>tripdays</con:name><con:value>8</con:value></con:property><con:property><con:name>paymentID</con:name><con:value>488711</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="2478bccf-1063-43cd-8193-926ae1379a1d" name="UserReactiveQuote"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="81597520-6914-4a5e-9433-e033e73d0f4f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User Reactive The Booked Quote" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="loggedIn user rquest a quote" id="d5ef6fe8-cbe9-4398-ac55-b11a1488bf21"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>2040cc92-e9d4-4517-a063-39395e85cdb8</con:targetTestCase><con:properties><con:property><con:name>number_of_days</con:name><con:value>${#TestCase#number_of_days}</con:value></con:property><con:property><con:name>per_page</con:name><con:value>${#TestCase#per_page}</con:value></con:property><con:property><con:name>activity</con:name><con:value>${#TestCase#activity}</con:value></con:property><con:property><con:name>months</con:name><con:value>${#TestCase#months}</con:value></con:property><con:property><con:name>price_ranges</con:name><con:value>${#TestCase#price_ranges}</con:value></con:property><con:property><con:name>destination_type</con:name><con:value>${#TestCase#destination_type}</con:value></con:property><con:property><con:name>activity_encoded</con:name><con:value>${#TestCase#activity_encoded}</con:value></con:property><con:property><con:name>price_ranges_encoded</con:name><con:value>${#TestCase#price_ranges_encoded}</con:value></con:property><con:property><con:name>months_encoded</con:name><con:value>${#TestCase#months_encoded}</con:value></con:property><con:property><con:name>destination_id</con:name><con:value>57</con:value></con:property><con:property><con:name>destination_name</con:name></con:property><con:property><con:name>selected_package_id</con:name></con:property><con:property><con:name>selected_package_name</con:name></con:property><con:property><con:name>selected_package_price_total</con:name></con:property><con:property><con:name>selected_package_headline</con:name></con:property><con:property><con:name>selected_package_days</con:name></con:property><con:property><con:name>selected_package_nights</con:name></con:property><con:property><con:name>selected_package_cities</con:name></con:property><con:property><con:name>destinations</con:name></con:property><con:property><con:name>destinations_encoded</con:name></con:property><con:property><con:name>destination_names</con:name></con:property><con:property><con:name>destination_names_encoded</con:name></con:property><con:property><con:name>start_date</con:name></con:property><con:property><con:name>RequestID</con:name><con:value>2612702</con:value></con:property><con:property><con:name>request_redirectUrl</con:name></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CkkiD3Nlc3Npb25faWQGOgZFVEkiJWJhZjllYTk0MjZlMDA5OTliODJkMzNhOTFhZjk0NDg5BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRVVDZUSmpMeTdYOTZsVThCQ1o2MG11BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVEkiGGFsbG93X2N1c3RvbWl6YXRpb24GOwBGaQPC3SdJIgpmbGFzaAY7AFRvOiVBY3Rpb25EaXNwYXRjaDo6Rmxhc2g6OkZsYXNoSGFzaAk6CkB1c2VkbzoIU2V0BjoKQGhhc2h9AEY6DEBjbG9zZWRGOg1AZmxhc2hlc3sGOhJydHJpcF9jcmVhdGVkVDoJQG5vdzA%3D--00940c6b5b9e96184900aec7c5a1aa11faeef0b3; path=/; HttpOnly</con:value></con:property><con:property><con:name>user_id</con:name></con:property></con:properties><con:returnProperties><con:entry>destination_id</con:entry><con:entry>RequestID</con:entry><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for destination hotel detail" id="a142eb94-447e-4f03-8e25-3f1e9e23de44"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/destinations/${loggedIn user rquest a quote#destination_id}/destination_hotel_images</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>Ia9dfDxP6ZJx2ivLDfModyD88YUQL1o9IZAkcpUrA+Q=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="get destination hotel list" id="c5bb5f13-d240-46de-b203-162dd15f5e5f"><con:settings/><con:config service="DestinationHotelImages" resourcePath="/api/{api_version}/destinations/{destinationId}/destination_hotel_images" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="get destination hotel list" id="f00ef24d-81e4-44a7-b43f-423ab7721729" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for destination hotel detail#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/destinations/67/destination_hotel_images.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="69d48784-f9f6-4d46-b41f-4e97a941b7af" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="7d45352f-9592-4e9d-a41f-cafe6b72a7f2" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def hotels= json_response_holder.hotel_images;
for (def hotel in hotels){
	messageExchange.modelItem.testCase.setPropertyValue("address",hotel.address);
	messageExchange.modelItem.testCase.setPropertyValue("category",String.valueOf(hotel.category));
	messageExchange.modelItem.testCase.setPropertyValue("city",hotel.city);
	messageExchange.modelItem.testCase.setPropertyValue("city_id",String.valueOf(hotel.city_id));
	messageExchange.modelItem.testCase.setPropertyValue("d_id",String.valueOf(hotel.d_id));
	messageExchange.modelItem.testCase.setPropertyValue("img",hotel.img);
	messageExchange.modelItem.testCase.setPropertyValue("name",hotel.name);
	messageExchange.modelItem.testCase.setPropertyValue("picture",hotel.pictures);
	break;

}
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="destinationId" value="${loggedIn user rquest a quote#destination_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>destinationId</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="admin tag agent with trip" id="1187f750-a046-4cbc-82e7-e8a7f3daef5e"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>16865839-07a3-4d5d-aff3-bc09595f8bf3</con:targetTestCase><con:properties><con:property><con:name>Agent_TagID</con:name><con:value>521</con:value></con:property><con:property><con:name>request_id</con:name><con:value>${loggedIn user rquest a quote#requestID}</con:value></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTdiMWI5NjY3YjNiYmVlOGNjNzJmYTVkNDllNzlkNGZkBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA06VC0kiIiQyYSQxMCRJWDBpRG9HLm5aSWRmR1ptbFNXRC9PBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--ce1909258312ab950cb0e864ff191ba6096d2315; path=/; HttpOnly</con:value></con:property></con:properties><con:returnProperties><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="agent give quote to traveller" id="f8340c66-dc2e-4f2f-9b13-7729ae825d1d"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5794d198-7055-4330-be4a-67978cc6ef03</con:targetTestCase><con:properties><con:property><con:name>user_id</con:name></con:property><con:property><con:name>auth_key</con:name></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWQwNjVlZDgyNGUxNjBmM2IwNmE0YmE3OTNiODcxYTljBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA02VC0kiIiQyYSQxMCRJa3hSLk02Sm9aYmhKZm9DTVZMZ0guBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--baa010c0cd2d11b239d1ee44d9862322ed986a34; path=/; HttpOnly</con:value></con:property><con:property><con:name>user_email</con:name></con:property><con:property><con:name>user_password</con:name></con:property><con:property><con:name>request_id</con:name><con:value>${loggedIn user rquest a quote#requestID}</con:value></con:property><con:property><con:name>Agent_TagID</con:name><con:value>521</con:value></con:property><con:property><con:name>quoteid</con:name><con:value>4807335</con:value></con:property><con:property><con:name>quoteincl</con:name></con:property><con:property><con:name>traveldays</con:name></con:property><con:property><con:name>saveinclusions</con:name></con:property><con:property><con:name>price</con:name><con:value>32430</con:value></con:property><con:property><con:name>hotelnames</con:name><con:value>${#TestCase#name}</con:value></con:property><con:property><con:name>hotelcityname</con:name><con:value>${#TestCase#city}</con:value></con:property><con:property><con:name>hotelcityid</con:name><con:value>${#TestCase#city_id}</con:value></con:property><con:property><con:name>hoteldetail</con:name></con:property><con:property><con:name>excluded</con:name></con:property><con:property><con:name>included</con:name></con:property></con:properties><con:returnProperties><con:entry>Cookie</con:entry><con:entry>quoteid</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for get quote detail" id="4e207c1d-c742-4963-8b5e-3b4bc1cf8dfd"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/${loggedIn user rquest a quote#RequestID}?include_quotes=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>TuP5bH7pUiCuq3D/DSnykURvwTdunIVNyTGVYU2TlgY=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user view request detail" id="112deddf-87d9-493c-84d7-ce2e7c63c7b5"><con:settings/><con:config service="GetRequestDetail" resourcePath="/api/{version}/requested_trips/{rtripId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user view request detail" id="3bb87632-a6dc-4ec6-a6d6-0d9edb486313" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for get quote detail#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1838358</con:originalUri><con:assertion type="GroovyScriptAssertion" id="bfa7c350-0a50-471d-9c61-269f35459f60" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def quotes = json_response_holder.quotes;

String quoteID = context.expand('${agent give quote to traveller#quoteid}');
String price = context.expand('${agent give quote to traveller#price}');
boolean isQuoteFound = false;
for (quote in quotes){
	if(quote.id==quoteID.toInteger() &amp;&amp; quote.price==price.toInteger()){
		isQuoteFound =  true;
		break;
	}	
}

assert isQuoteFound==true : "quoteID "+quoteID +" are not present in response quotes detaile "+ quotes
</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="d6176990-0894-4497-b407-3505c582b8e6" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="rtripId" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="include_quotes" value="true"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="version" value="v2"/>
</con:parameters><con:parameterOrder><con:entry>rtripId</con:entry><con:entry>version</con:entry><con:entry>include_quotes</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for set quote status detail" id="5edecf60-6769-4578-93bf-0dc1a0852a66"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/requested_trips/${loggedIn user rquest a quote#RequestID}/quotes/${agent give quote to traveller#quoteid}/statusChange?state=2</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>UpDvC+M2Dt1MBSxAntjHtBAjNUQ7YWZrmGk3A7T435A=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user book the quote" id="f847537e-ad8c-490c-baf5-52a303a87941"><con:settings/><con:config service="SetStatusOfQuote" resourcePath="/api/v1/requested_trips/{requested_trip_id}/quotes/{quote_id}/statusChange" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user book the quote" id="22a0bfba-34d9-4651-b664-c2b5ce6edd42" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for set quote status detail#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1840799/statusChange</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8a48e4c6-a379-4a2a-9a29-632c32ea6a2a" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="bedb9a4a-ccf0-4a32-8381-3f6809b84273" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def successmessage = json_response_holder.success;



assert (successmessage=="Quote has been chosen") : "message should be Quote has been chosen  bit it is "+successmessage
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="state" value="2"/>
  <con:entry key="requested_trip_id" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="quote_id" value="${agent give quote to traveller#quoteid}"/>
</con:parameters><con:parameterOrder><con:entry>requested_trip_id</con:entry><con:entry>quote_id</con:entry><con:entry>state</con:entry><con:entry>quote_decline_reason</con:entry><con:entry>request</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="and also get the hash for get quote detail" id="bd6defc4-9628-462c-a045-3091ef15baf0"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/${loggedIn user rquest a quote#RequestID}?include_quotes=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>TuP5bH7pUiCuq3D/DSnykURvwTdunIVNyTGVYU2TlgY=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="and also user view request detail" id="78dce8d4-2c66-4552-8365-dbf8be09fd92"><con:settings/><con:config service="GetRequestDetail" resourcePath="/api/{version}/requested_trips/{rtripId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="and also user view request detail" id="3bb87632-a6dc-4ec6-a6d6-0d9edb486313" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for get quote detail#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1838358</con:originalUri><con:assertion type="GroovyScriptAssertion" id="bfa7c350-0a50-471d-9c61-269f35459f60" name="get request detail and validate quote status is booked"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def quotes = json_response_holder.quotes;

String quoteID = context.expand('${agent give quote to traveller#quoteid}');
String price = context.expand('${agent give quote to traveller#price}');
String destination = json_response_holder.to_loc;
messageExchange.modelItem.testCase.setPropertyValue("destination",destination);
boolean isQuoteFound = false;
for (quote in quotes){
	if(quote.id==quoteID.toInteger() &amp;&amp; quote.price==price.toInteger() &amp;&amp; quote.status==2){
	messageExchange.modelItem.testCase.setPropertyValue("currency",quote.currency);
	messageExchange.modelItem.testCase.setPropertyValue("agentname",quote.user.first_name +" "+quote.user.last_name);		
		isQuoteFound =  true;
		break;
	}	
}

assert isQuoteFound==true : "quoteID "+quoteID +" are not present in response quotes detaile "+ quotes
</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="d6176990-0894-4497-b407-3505c582b8e6" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="rtripId" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="include_quotes" value="true"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="version" value="v2"/>
</con:parameters><con:parameterOrder><con:entry>rtripId</con:entry><con:entry>version</con:entry><con:entry>include_quotes</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="again get the hash for set quote status detail" id="f32ddc77-0ed8-417d-8854-5e011ff26617"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/requested_trips/${loggedIn user rquest a quote#RequestID}/quotes/${agent give quote to traveller#quoteid}/statusChange?state=8&amp;quote_decline_reason=2&amp;request=decline</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>SxinR3w4ngj/ddRzfm3MxTnKjUOSvlXSJXCLlCjjIrI=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user cancel the quote" id="0a05560b-47c5-47c1-b573-84493fcb7d72"><con:settings/><con:config service="SetStatusOfQuote" resourcePath="/api/v1/requested_trips/{requested_trip_id}/quotes/{quote_id}/statusChange" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user cancel the quote" id="22a0bfba-34d9-4651-b664-c2b5ce6edd42" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${again get the hash for set quote status detail#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1840799/statusChange</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8a48e4c6-a379-4a2a-9a29-632c32ea6a2a" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="bedb9a4a-ccf0-4a32-8381-3f6809b84273" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def successmessage = json_response_holder.success;



assert (successmessage=="Quote has been declined") : "message should be Quote has been declined  bit it is "+successmessage
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="quote_decline_reason" value="2"/>
  <con:entry key="request" value="decline"/>
  <con:entry key="state" value="8"/>
  <con:entry key="requested_trip_id" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="quote_id" value="${agent give quote to traveller#quoteid}"/>
</con:parameters><con:parameterOrder><con:entry>requested_trip_id</con:entry><con:entry>quote_id</con:entry><con:entry>state</con:entry><con:entry>quote_decline_reason</con:entry><con:entry>request</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="user again get the hash for get quote detail" id="0714b444-720a-4435-81b8-b31362402ceb"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/${loggedIn user rquest a quote#RequestID}?include_quotes=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>TuP5bH7pUiCuq3D/DSnykURvwTdunIVNyTGVYU2TlgY=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="and user view request detail to check quote rejection detail" id="3af00551-c2c4-499f-83b5-65f3d547c2c7"><con:settings/><con:config service="GetRequestDetail" resourcePath="/api/{version}/requested_trips/{rtripId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="and user view request detail to check quote rejection detail" id="3bb87632-a6dc-4ec6-a6d6-0d9edb486313" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${user again get the hash for get quote detail#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1838358</con:originalUri><con:assertion type="GroovyScriptAssertion" id="bfa7c350-0a50-471d-9c61-269f35459f60" name="get request detail and validate quote status is booked"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def quotes = json_response_holder.quotes;

String quoteID = context.expand('${agent give quote to traveller#quoteid}');
String price = context.expand('${agent give quote to traveller#price}');
String destination = json_response_holder.to_loc;
messageExchange.modelItem.testCase.setPropertyValue("destination",destination);
boolean isQuoteFound = false;
for (quote in quotes){
	if(quote.id==quoteID.toInteger() &amp;&amp; quote.price==price.toInteger() &amp;&amp; quote.status==8){
	messageExchange.modelItem.testCase.setPropertyValue("currency",quote.currency);
	messageExchange.modelItem.testCase.setPropertyValue("agentname",quote.user.username);		
		isQuoteFound =  true;
		break;
	}	
}

assert isQuoteFound==true : "quoteID "+quoteID +" are not present in response quotes detaile "+ quotes
</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="d6176990-0894-4497-b407-3505c582b8e6" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="rtripId" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="include_quotes" value="true"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="version" value="v2"/>
</con:parameters><con:parameterOrder><con:entry>rtripId</con:entry><con:entry>version</con:entry><con:entry>include_quotes</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="user get the hash for reactive quote" id="587f883b-274c-4fb2-b517-397a50039597"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/requested_trips/${loggedIn user rquest a quote#RequestID}/quotes/${agent give quote to traveller#quoteid}/statusChange?state=8&amp;request=reactivate</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>3QOL2BnOVlHMcai5X+es5fhWn3cXrsXeWo/gAE62tEM=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user reactive the quote" id="409c053b-78f0-4de3-9942-9797465d3bd2"><con:settings/><con:config service="SetStatusOfQuote" resourcePath="/api/v1/requested_trips/{requested_trip_id}/quotes/{quote_id}/statusChange" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user reactive the quote" id="22a0bfba-34d9-4651-b664-c2b5ce6edd42" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${user get the hash for reactive quote#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1840799/statusChange</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8a48e4c6-a379-4a2a-9a29-632c32ea6a2a" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="bedb9a4a-ccf0-4a32-8381-3f6809b84273" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def successmessage = json_response_holder.success;



assert (successmessage=="Quote has been declined") : "message should be Quote has been declined  bit it is "+successmessage
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="request" value="reactivate"/>
  <con:entry key="requested_trip_id" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="state" value="8"/>
  <con:entry key="quote_id" value="${agent give quote to traveller#quoteid}"/>
</con:parameters><con:parameterOrder><con:entry>requested_trip_id</con:entry><con:entry>quote_id</con:entry><con:entry>state</con:entry><con:entry>quote_decline_reason</con:entry><con:entry>request</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="user again get the hash for view the reactivate quote detail" id="931fea1b-f234-48cc-a3f5-bb7b42fb0494"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/${loggedIn user rquest a quote#RequestID}?include_quotes=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>TuP5bH7pUiCuq3D/DSnykURvwTdunIVNyTGVYU2TlgY=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user view request detail to check quote activate detail" id="7e6f1155-7fa3-4b0f-a9de-98857e22076f"><con:settings/><con:config service="GetRequestDetail" resourcePath="/api/{version}/requested_trips/{rtripId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user view request detail to check quote activate detail" id="3bb87632-a6dc-4ec6-a6d6-0d9edb486313" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${user again get the hash for get quote detail#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1838358</con:originalUri><con:assertion type="GroovyScriptAssertion" id="bfa7c350-0a50-471d-9c61-269f35459f60" name="get request detail and validate quote status is booked"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def quotes = json_response_holder.quotes;

String quoteID = context.expand('${agent give quote to traveller#quoteid}');
String price = context.expand('${agent give quote to traveller#price}');
String destination = json_response_holder.to_loc;
messageExchange.modelItem.testCase.setPropertyValue("destination",destination);
boolean isQuoteFound = false;
for (quote in quotes){
	if(quote.id==quoteID.toInteger() &amp;&amp; quote.price==price.toInteger() &amp;&amp; quote.status==1){
	messageExchange.modelItem.testCase.setPropertyValue("currency",quote.currency);
	messageExchange.modelItem.testCase.setPropertyValue("agentname",quote.user.username);		
		isQuoteFound =  true;
		break;
	}	
}

assert isQuoteFound==true : "quoteID "+quoteID +" are not present in response quotes detaile "+ quotes
</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="d6176990-0894-4497-b407-3505c582b8e6" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="rtripId" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="include_quotes" value="true"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="version" value="v2"/>
</con:parameters><con:parameterOrder><con:entry>rtripId</con:entry><con:entry>version</con:entry><con:entry>include_quotes</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>number_of_days</con:name><con:value>4-6</con:value></con:property><con:property><con:name>per_page</con:name><con:value>50</con:value></con:property><con:property><con:name>activity</con:name><con:value>5,3</con:value></con:property><con:property><con:name>months</con:name><con:value>4-6</con:value></con:property><con:property><con:name>price_ranges</con:name><con:value>0-10000</con:value></con:property><con:property><con:name>destination_type</con:name><con:value>international</con:value></con:property><con:property><con:name>price_ranges_encoded</con:name><con:value>0-10000</con:value></con:property><con:property><con:name>activity_encoded</con:name><con:value>5%2C3</con:value></con:property><con:property><con:name>months_encoded</con:name><con:value>4-6</con:value></con:property><con:property><con:name>currency</con:name><con:value>Rupee</con:value></con:property><con:property><con:name>destination</con:name><con:value>Thailand</con:value></con:property><con:property><con:name>agentname</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>address</con:name><con:value>80/167 Moo 9, Nongprue, Banglamung Pattaya - 20150
, Thailand</con:value></con:property><con:property><con:name>category</con:name><con:value>4</con:value></con:property><con:property><con:name>city</con:name><con:value>Pattaya</con:value></con:property><con:property><con:name>city_id</con:name><con:value>26357</con:value></con:property><con:property><con:name>d_id</con:name><con:value>2422243</con:value></con:property><con:property><con:name>img</con:name><con:value>w_300/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861507/original/4901399_63_b_w.jpg</con:value></con:property><con:property><con:name>name</con:name><con:value>Centara Nova Hotel &amp; Spa Pattaya</con:value></con:property><con:property><con:name>picture</con:name><con:value>w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861507/original/4901399_63_b_w.jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861508/original/4901399_87_b_w.jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861509/original/4901399_91_b_w.jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861510/original/centara-nova-hotel-spa_(1).jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861511/original/centara-nova-hotel-spa_(2).jpg</con:value></con:property></con:properties></con:testCase><con:testCase id="2ffed9d2-660b-4c2d-99a9-3c22cf667956" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User Reactive The Quote" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="loggedIn user rquest a quote" id="ac823851-cd72-4ece-ac4a-de15865528e1"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>2040cc92-e9d4-4517-a063-39395e85cdb8</con:targetTestCase><con:properties><con:property><con:name>number_of_days</con:name><con:value>${#TestCase#number_of_days}</con:value></con:property><con:property><con:name>per_page</con:name><con:value>${#TestCase#per_page}</con:value></con:property><con:property><con:name>activity</con:name><con:value>${#TestCase#activity}</con:value></con:property><con:property><con:name>months</con:name><con:value>${#TestCase#months}</con:value></con:property><con:property><con:name>price_ranges</con:name><con:value>${#TestCase#price_ranges}</con:value></con:property><con:property><con:name>destination_type</con:name><con:value>${#TestCase#destination_type}</con:value></con:property><con:property><con:name>activity_encoded</con:name><con:value>${#TestCase#activity_encoded}</con:value></con:property><con:property><con:name>price_ranges_encoded</con:name><con:value>${#TestCase#price_ranges_encoded}</con:value></con:property><con:property><con:name>months_encoded</con:name><con:value>${#TestCase#months_encoded}</con:value></con:property><con:property><con:name>destination_id</con:name><con:value>57</con:value></con:property><con:property><con:name>destination_name</con:name></con:property><con:property><con:name>selected_package_id</con:name></con:property><con:property><con:name>selected_package_name</con:name></con:property><con:property><con:name>selected_package_price_total</con:name></con:property><con:property><con:name>selected_package_headline</con:name></con:property><con:property><con:name>selected_package_days</con:name></con:property><con:property><con:name>selected_package_nights</con:name></con:property><con:property><con:name>selected_package_cities</con:name></con:property><con:property><con:name>destinations</con:name></con:property><con:property><con:name>destinations_encoded</con:name></con:property><con:property><con:name>destination_names</con:name></con:property><con:property><con:name>destination_names_encoded</con:name></con:property><con:property><con:name>start_date</con:name></con:property><con:property><con:name>RequestID</con:name><con:value>2612703</con:value></con:property><con:property><con:name>request_redirectUrl</con:name></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CkkiD3Nlc3Npb25faWQGOgZFVEkiJWQ2ZmU5NmJhYWRjM2NjNDExMTZiZTRlNDJiOWViYTQ2BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRVVDZUSmpMeTdYOTZsVThCQ1o2MG11BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVEkiGGFsbG93X2N1c3RvbWl6YXRpb24GOwBGaQPC3SdJIgpmbGFzaAY7AFRvOiVBY3Rpb25EaXNwYXRjaDo6Rmxhc2g6OkZsYXNoSGFzaAk6CkB1c2VkbzoIU2V0BjoKQGhhc2h9AEY6DEBjbG9zZWRGOg1AZmxhc2hlc3sGOhJydHJpcF9jcmVhdGVkVDoJQG5vdzA%3D--7e2c8e9983e8dc4788dd9626fba9b3d5a067b0f6; path=/; HttpOnly</con:value></con:property><con:property><con:name>user_id</con:name></con:property></con:properties><con:returnProperties><con:entry>destination_id</con:entry><con:entry>RequestID</con:entry><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for destination hotel detail" id="5e7d12a2-0f27-4a89-8496-25f8866b5a28"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/destinations/${loggedIn user rquest a quote#destination_id}/destination_hotel_images</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>Ia9dfDxP6ZJx2ivLDfModyD88YUQL1o9IZAkcpUrA+Q=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="get destination hotel list" id="011e5ef6-b364-4d83-b99e-8d0928cd5ee1"><con:settings/><con:config service="DestinationHotelImages" resourcePath="/api/{api_version}/destinations/{destinationId}/destination_hotel_images" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="get destination hotel list" id="f00ef24d-81e4-44a7-b43f-423ab7721729" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for destination hotel detail#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/destinations/67/destination_hotel_images.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="69d48784-f9f6-4d46-b41f-4e97a941b7af" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="7d45352f-9592-4e9d-a41f-cafe6b72a7f2" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def hotels= json_response_holder.hotel_images;
for (def hotel in hotels){
	messageExchange.modelItem.testCase.setPropertyValue("address",hotel.address);
	messageExchange.modelItem.testCase.setPropertyValue("category",String.valueOf(hotel.category));
	messageExchange.modelItem.testCase.setPropertyValue("city",hotel.city);
	messageExchange.modelItem.testCase.setPropertyValue("city_id",String.valueOf(hotel.city_id));
	messageExchange.modelItem.testCase.setPropertyValue("d_id",String.valueOf(hotel.d_id));
	messageExchange.modelItem.testCase.setPropertyValue("img",hotel.img);
	messageExchange.modelItem.testCase.setPropertyValue("name",hotel.name);
	messageExchange.modelItem.testCase.setPropertyValue("picture",hotel.pictures);
	break;

}
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="destinationId" value="${loggedIn user rquest a quote#destination_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>destinationId</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="admin tag agent with trip" id="af9c2bbc-edba-4b9c-ac17-9318c5c62bee"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>16865839-07a3-4d5d-aff3-bc09595f8bf3</con:targetTestCase><con:properties><con:property><con:name>Agent_TagID</con:name><con:value>521</con:value></con:property><con:property><con:name>request_id</con:name><con:value>${loggedIn user rquest a quote#requestID}</con:value></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTk1YTMzMTJmYzAyOTVhNzIwYWNkMDA5YTU1YzgzODM1BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA06VC0kiIiQyYSQxMCRJWDBpRG9HLm5aSWRmR1ptbFNXRC9PBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--13b0b4dd83e0b2e712b400b7e674d57849a99369; path=/; HttpOnly</con:value></con:property></con:properties><con:returnProperties><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="agent give quote to traveller" id="34329813-ce75-455a-919f-f4a088043738"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5794d198-7055-4330-be4a-67978cc6ef03</con:targetTestCase><con:properties><con:property><con:name>user_id</con:name></con:property><con:property><con:name>auth_key</con:name></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTM1MTk0NDNhY2Y0YWFmMmQ5M2RmZDFjYWE2YjA4MWU4BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA02VC0kiIiQyYSQxMCRJa3hSLk02Sm9aYmhKZm9DTVZMZ0guBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--9e8cffa61cd2980e061c2ac0ae4881d83ba5e589; path=/; HttpOnly</con:value></con:property><con:property><con:name>user_email</con:name></con:property><con:property><con:name>user_password</con:name></con:property><con:property><con:name>request_id</con:name><con:value>${loggedIn user rquest a quote#requestID}</con:value></con:property><con:property><con:name>Agent_TagID</con:name><con:value>521</con:value></con:property><con:property><con:name>quoteid</con:name><con:value>4807336</con:value></con:property><con:property><con:name>quoteincl</con:name></con:property><con:property><con:name>traveldays</con:name></con:property><con:property><con:name>saveinclusions</con:name></con:property><con:property><con:name>price</con:name><con:value>32430</con:value></con:property><con:property><con:name>hotelnames</con:name><con:value>${#TestCase#name}</con:value></con:property><con:property><con:name>hotelcityname</con:name><con:value>${#TestCase#city}</con:value></con:property><con:property><con:name>hotelcityid</con:name><con:value>${#TestCase#city_id}</con:value></con:property><con:property><con:name>hoteldetail</con:name></con:property><con:property><con:name>excluded</con:name></con:property><con:property><con:name>included</con:name></con:property></con:properties><con:returnProperties><con:entry>Cookie</con:entry><con:entry>quoteid</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for get quote detail" id="8fab0fd8-5737-4fb0-ab07-38066af228d4"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/${loggedIn user rquest a quote#RequestID}?include_quotes=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>klA9pgKlAyBoTyJc3DjX2mVHfQMqxlwmoGDKOZr6ZMQ=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user view request detail" id="2dc04643-38a8-4371-93c7-0063262f70e8"><con:settings/><con:config service="GetRequestDetail" resourcePath="/api/{version}/requested_trips/{rtripId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user view request detail" id="3bb87632-a6dc-4ec6-a6d6-0d9edb486313" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for get quote detail#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1838358</con:originalUri><con:assertion type="GroovyScriptAssertion" id="bfa7c350-0a50-471d-9c61-269f35459f60" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def quotes = json_response_holder.quotes;

String quoteID = context.expand('${agent give quote to traveller#quoteid}');
String price = context.expand('${agent give quote to traveller#price}');
boolean isQuoteFound = false;
for (quote in quotes){
	if(quote.id==quoteID.toInteger() &amp;&amp; quote.price==price.toInteger()){
		isQuoteFound =  true;
		break;
	}	
}

assert isQuoteFound==true : "quoteID "+quoteID +" are not present in response quotes detaile "+ quotes
</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="d6176990-0894-4497-b407-3505c582b8e6" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="rtripId" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="include_quotes" value="true"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="version" value="v2"/>
</con:parameters><con:parameterOrder><con:entry>rtripId</con:entry><con:entry>version</con:entry><con:entry>include_quotes</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="again get the hash for set quote status detail" id="58e7c819-2743-4c74-8add-1290ce6f1bd7"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/requested_trips/${loggedIn user rquest a quote#RequestID}/quotes/${agent give quote to traveller#quoteid}/statusChange?state=8&amp;quote_decline_reason=2&amp;request=decline</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>wpKPe6K503P6nnBTflTUOu2qoHhoxeUS/ZGDnRiCboQ=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user cancel the quote" id="23397c1b-7766-4e1e-b44f-f181e38680a2"><con:settings/><con:config service="SetStatusOfQuote" resourcePath="/api/v1/requested_trips/{requested_trip_id}/quotes/{quote_id}/statusChange" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user cancel the quote" id="22a0bfba-34d9-4651-b664-c2b5ce6edd42" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${again get the hash for set quote status detail#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1840799/statusChange</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8a48e4c6-a379-4a2a-9a29-632c32ea6a2a" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="bedb9a4a-ccf0-4a32-8381-3f6809b84273" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def successmessage = json_response_holder.success;



assert (successmessage=="Quote has been declined") : "message should be Quote has been declined  bit it is "+successmessage
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="quote_decline_reason" value="2"/>
  <con:entry key="request" value="decline"/>
  <con:entry key="requested_trip_id" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="state" value="8"/>
  <con:entry key="quote_id" value="${agent give quote to traveller#quoteid}"/>
</con:parameters><con:parameterOrder><con:entry>requested_trip_id</con:entry><con:entry>quote_id</con:entry><con:entry>state</con:entry><con:entry>quote_decline_reason</con:entry><con:entry>request</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="user again get the hash for get quote detail" id="bfa04185-071f-403a-8960-d6f06ef56a75"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/${loggedIn user rquest a quote#RequestID}?include_quotes=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>klA9pgKlAyBoTyJc3DjX2mVHfQMqxlwmoGDKOZr6ZMQ=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="and user view request detail to check quote rejection detail" id="b70e57b7-e80b-4cb6-bc68-283b20fcd26f"><con:settings/><con:config service="GetRequestDetail" resourcePath="/api/{version}/requested_trips/{rtripId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="and user view request detail to check quote rejection detail" id="3bb87632-a6dc-4ec6-a6d6-0d9edb486313" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${user again get the hash for get quote detail#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1838358</con:originalUri><con:assertion type="GroovyScriptAssertion" id="bfa7c350-0a50-471d-9c61-269f35459f60" name="get request detail and validate quote status is booked"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def quotes = json_response_holder.quotes;

String quoteID = context.expand('${agent give quote to traveller#quoteid}');
String price = context.expand('${agent give quote to traveller#price}');
String destination = json_response_holder.to_loc;
messageExchange.modelItem.testCase.setPropertyValue("destination",destination);
boolean isQuoteFound = false;
for (quote in quotes){
	if(quote.id==quoteID.toInteger() &amp;&amp; quote.price==price.toInteger() &amp;&amp; quote.status==8){
	messageExchange.modelItem.testCase.setPropertyValue("currency",quote.currency);
	messageExchange.modelItem.testCase.setPropertyValue("agentname",quote.user.username);		
		isQuoteFound =  true;
		break;
	}	
}

assert isQuoteFound==true : "quoteID "+quoteID +" are not present in response quotes detaile "+ quotes
</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="d6176990-0894-4497-b407-3505c582b8e6" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="rtripId" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="include_quotes" value="true"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="version" value="v2"/>
</con:parameters><con:parameterOrder><con:entry>rtripId</con:entry><con:entry>version</con:entry><con:entry>include_quotes</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="user get the hash for reactive quote" id="44a559bb-18bc-46c5-986d-910382d872fb"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/requested_trips/${loggedIn user rquest a quote#RequestID}/quotes/${agent give quote to traveller#quoteid}/statusChange?state=8&amp;request=reactivate</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>Wamv4YzRIx/JY+xDxPDu6UL+k+FvpWRpH0pI1Z+vV+k=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user reactive the quote" id="4a30ae69-cb94-4a27-86e4-b5649e843105"><con:settings/><con:config service="SetStatusOfQuote" resourcePath="/api/v1/requested_trips/{requested_trip_id}/quotes/{quote_id}/statusChange" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user reactive the quote" id="22a0bfba-34d9-4651-b664-c2b5ce6edd42" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${user get the hash for reactive quote#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1840799/statusChange</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8a48e4c6-a379-4a2a-9a29-632c32ea6a2a" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="bedb9a4a-ccf0-4a32-8381-3f6809b84273" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def successmessage = json_response_holder.success;



assert (successmessage=="Quote has been declined") : "message should be Quote has been declined  bit it is "+successmessage
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="request" value="reactivate"/>
  <con:entry key="requested_trip_id" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="state" value="8"/>
  <con:entry key="quote_id" value="${agent give quote to traveller#quoteid}"/>
</con:parameters><con:parameterOrder><con:entry>requested_trip_id</con:entry><con:entry>quote_id</con:entry><con:entry>state</con:entry><con:entry>quote_decline_reason</con:entry><con:entry>request</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="user again get the hash for view the reactivate quote detail" id="3cbcdecc-57eb-47bb-a876-a1a0657ebd18"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/${loggedIn user rquest a quote#RequestID}?include_quotes=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>klA9pgKlAyBoTyJc3DjX2mVHfQMqxlwmoGDKOZr6ZMQ=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user view request detail to check quote activate detail" id="3dab6cd7-f8c0-4b3c-a76b-d78ecd98129f"><con:settings/><con:config service="GetRequestDetail" resourcePath="/api/{version}/requested_trips/{rtripId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user view request detail to check quote activate detail" id="3bb87632-a6dc-4ec6-a6d6-0d9edb486313" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${user again get the hash for get quote detail#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1838358</con:originalUri><con:assertion type="GroovyScriptAssertion" id="bfa7c350-0a50-471d-9c61-269f35459f60" name="get request detail and validate quote status is booked"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def quotes = json_response_holder.quotes;

String quoteID = context.expand('${agent give quote to traveller#quoteid}');
String price = context.expand('${agent give quote to traveller#price}');
String destination = json_response_holder.to_loc;
messageExchange.modelItem.testCase.setPropertyValue("destination",destination);
boolean isQuoteFound = false;
for (quote in quotes){
	if(quote.id==quoteID.toInteger() &amp;&amp; quote.price==price.toInteger() &amp;&amp; quote.status==1){
	messageExchange.modelItem.testCase.setPropertyValue("currency",quote.currency);
	messageExchange.modelItem.testCase.setPropertyValue("agentname",quote.user.username);		
		isQuoteFound =  true;
		break;
	}	
}

assert isQuoteFound==true : "quoteID "+quoteID +" are not present in response quotes detaile "+ quotes
</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="d6176990-0894-4497-b407-3505c582b8e6" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="rtripId" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="include_quotes" value="true"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="version" value="v2"/>
</con:parameters><con:parameterOrder><con:entry>rtripId</con:entry><con:entry>version</con:entry><con:entry>include_quotes</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>number_of_days</con:name><con:value>4-6</con:value></con:property><con:property><con:name>per_page</con:name><con:value>50</con:value></con:property><con:property><con:name>activity</con:name><con:value>5,3</con:value></con:property><con:property><con:name>months</con:name><con:value>4-6</con:value></con:property><con:property><con:name>price_ranges</con:name><con:value>0-10000</con:value></con:property><con:property><con:name>destination_type</con:name><con:value>international</con:value></con:property><con:property><con:name>price_ranges_encoded</con:name><con:value>0-10000</con:value></con:property><con:property><con:name>activity_encoded</con:name><con:value>5%2C3</con:value></con:property><con:property><con:name>months_encoded</con:name><con:value>4-6</con:value></con:property><con:property><con:name>currency</con:name><con:value>Rupee</con:value></con:property><con:property><con:name>destination</con:name><con:value>Thailand</con:value></con:property><con:property><con:name>agentname</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>address</con:name><con:value>80/167 Moo 9, Nongprue, Banglamung Pattaya - 20150
, Thailand</con:value></con:property><con:property><con:name>category</con:name><con:value>4</con:value></con:property><con:property><con:name>city</con:name><con:value>Pattaya</con:value></con:property><con:property><con:name>city_id</con:name><con:value>26357</con:value></con:property><con:property><con:name>d_id</con:name><con:value>2422243</con:value></con:property><con:property><con:name>img</con:name><con:value>w_300/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861507/original/4901399_63_b_w.jpg</con:value></con:property><con:property><con:name>name</con:name><con:value>Centara Nova Hotel &amp; Spa Pattaya</con:value></con:property><con:property><con:name>picture</con:name><con:value>w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861507/original/4901399_63_b_w.jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861508/original/4901399_87_b_w.jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861509/original/4901399_91_b_w.jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861510/original/centara-nova-hotel-spa_(1).jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/861511/original/centara-nova-hotel-spa_(2).jpg</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="4e7945fa-bf71-446a-a648-3c583af3e73f" name="CancelRequest"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="8e14f6cb-c83b-4f0c-8eb7-041f5a7fc28f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User Cancel Trip Request" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="loggedIn user rquest a quote" id="cfef33af-5d1b-4d9d-936f-3b1b085a8b64"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>2040cc92-e9d4-4517-a063-39395e85cdb8</con:targetTestCase><con:properties><con:property><con:name>number_of_days</con:name><con:value>${#TestCase#number_of_days}</con:value></con:property><con:property><con:name>per_page</con:name><con:value>${#TestCase#per_page}</con:value></con:property><con:property><con:name>activity</con:name><con:value>${#TestCase#activity}</con:value></con:property><con:property><con:name>months</con:name><con:value>${#TestCase#months}</con:value></con:property><con:property><con:name>price_ranges</con:name><con:value>${#TestCase#price_ranges}</con:value></con:property><con:property><con:name>destination_type</con:name><con:value>${#TestCase#destination_type}</con:value></con:property><con:property><con:name>activity_encoded</con:name><con:value>${#TestCase#activity_encoded}</con:value></con:property><con:property><con:name>price_ranges_encoded</con:name><con:value>${#TestCase#price_ranges_encoded}</con:value></con:property><con:property><con:name>months_encoded</con:name><con:value>${#TestCase#months_encoded}</con:value></con:property><con:property><con:name>destination_id</con:name></con:property><con:property><con:name>destination_name</con:name></con:property><con:property><con:name>selected_package_id</con:name></con:property><con:property><con:name>selected_package_name</con:name></con:property><con:property><con:name>selected_package_price_total</con:name></con:property><con:property><con:name>selected_package_headline</con:name></con:property><con:property><con:name>selected_package_days</con:name></con:property><con:property><con:name>selected_package_nights</con:name></con:property><con:property><con:name>selected_package_cities</con:name></con:property><con:property><con:name>destinations</con:name></con:property><con:property><con:name>destinations_encoded</con:name></con:property><con:property><con:name>destination_names</con:name></con:property><con:property><con:name>destination_names_encoded</con:name></con:property><con:property><con:name>start_date</con:name></con:property><con:property><con:name>RequestID</con:name><con:value>2612704</con:value></con:property><con:property><con:name>request_redirectUrl</con:name></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CkkiD3Nlc3Npb25faWQGOgZFVEkiJWRlZjhmYTQ4ZDYyMjVhM2NkMmY3NmJhNmVlYWMwZDcwBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRVVDZUSmpMeTdYOTZsVThCQ1o2MG11BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVEkiGGFsbG93X2N1c3RvbWl6YXRpb24GOwBGaQPC3SdJIgpmbGFzaAY7AFRvOiVBY3Rpb25EaXNwYXRjaDo6Rmxhc2g6OkZsYXNoSGFzaAk6CkB1c2VkbzoIU2V0BjoKQGhhc2h9AEY6DEBjbG9zZWRGOg1AZmxhc2hlc3sGOhJydHJpcF9jcmVhdGVkVDoJQG5vdzA%3D--f83897513643ffb3ed015dfe5e6d463adbdd7cbb; path=/; HttpOnly</con:value></con:property><con:property><con:name>user_id</con:name></con:property></con:properties><con:returnProperties><con:entry>RequestID</con:entry><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash to cancel the quote" id="ce2e573f-0682-4a1f-af60-40640db60642"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/requested_trips/{loggedIn user rquest a quote#RequestID}/cancelRequest</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>post</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>GR486AYqjPUnYu76T+mzDogFbAgwY7Rz90tp9bQbIjs=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user cancel the trip request" id="284b7351-507c-4994-b6c6-8cb8b3afd28d"><con:settings/><con:config service="CancelRequest" resourcePath="/api/{apiVersion}/requested_trips/{tripID}/cancelRequest" methodName="CancelRequest" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user cancel the trip request" id="8966fe98-1554-439a-a86d-e0ad1cf9bd81" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash to cancel the quote#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"cancel_reason":"","changed_destination_name":"","commit":"Cancel Request","id":${loggedIn user rquest a quote#RequestID},"otherReason":"","quote_customization":"","reason":"Canceled"}</con:request><con:originalUri>http://traveler-api.ttdev.in/api/v1/requested_trips/456360/cancelRequest</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="26808243-d4e4-42a5-9ba0-c2da9650d10e" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8325740b-67b9-4595-a5ac-486fdd00aaa2" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def successmessage = json_response_holder.success;

assert successmessage==true: "Success message should be true but it is : "+ successmessage;</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="apiVersion" value="v1"/>
  <con:entry key="tripID" value="${loggedIn user rquest a quote#RequestID}"/>
</con:parameters><con:parameterOrder><con:entry>apiVersion</con:entry><con:entry>tripID</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for get requested trip detail" id="840d1c78-d8fa-43ff-9573-bfa77b76d187"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/${loggedIn user rquest a quote#RequestID}?include_quotes=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>0CRp6kKnTCxCwhWmGredY4h4LuSY5UeQyEA4IJRHdM4=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user view request detail" id="4854b3bf-a88f-4dea-a395-117e47d448e3"><con:settings/><con:config service="GetRequestDetail" resourcePath="/api/{version}/requested_trips/{rtripId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user view request detail" id="3bb87632-a6dc-4ec6-a6d6-0d9edb486313" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for get requested trip detail#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1838358</con:originalUri><con:assertion type="GroovyScriptAssertion" id="bfa7c350-0a50-471d-9c61-269f35459f60" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);


def tripStatus = json_response_holder.status;

assert tripStatus=="Cancelled" : " Trip status should be Cancelled but it is"+ tripStatus;
</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="d6176990-0894-4497-b407-3505c582b8e6" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="rtripId" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="include_quotes" value="true"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="version" value="v2"/>
</con:parameters><con:parameterOrder><con:entry>rtripId</con:entry><con:entry>version</con:entry><con:entry>include_quotes</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>number_of_days</con:name><con:value>4-6</con:value></con:property><con:property><con:name>per_page</con:name><con:value>50</con:value></con:property><con:property><con:name>activity</con:name><con:value>5,3</con:value></con:property><con:property><con:name>months</con:name><con:value>4-6</con:value></con:property><con:property><con:name>price_ranges</con:name><con:value>0-10000</con:value></con:property><con:property><con:name>destination_type</con:name><con:value>international</con:value></con:property><con:property><con:name>price_ranges_encoded</con:name><con:value>0-10000</con:value></con:property><con:property><con:name>activity_encoded</con:name><con:value>5%2C3</con:value></con:property><con:property><con:name>months_encoded</con:name><con:value>4-6</con:value></con:property><con:property><con:name>quoteIDs</con:name><con:value>[[cabs:fjhfjhfjhgfj, perperson:per person, terms_conditions:gghhg, status:1, is_full_payment:null, places:null, raw_text:true, currency:Rupee, hotels:gjfjhg, id:1840799, hotel_new_format:true, updated_at:2016-10-22T01:16:57+05:30, flights:, price:32430, days:9, excluded:● Meal plan : Breakfast
, description:hfhg, included:● Meal plan : Lunch
● Meal plan : Dinner
● Airport Transfer : Arrival
● Airport Transfer : Departure
● International Airfare
● Internal Airfare
● Government Taxes/VAT/ Service Charges
● Siteseeing 
● Cab type : SIC
● Cab type : Private
● VISA
● Travel Insurance
, share_quote_url:http://traveltriangle.com/quotes/31383430373939/share_quote, user:[chat_channel:notification_199585, id:199585, first_name:TT Agent Demo, username:TT agent demo, last_visited:2016-05-24T14:44:17+05:30, tr_a_profile:[thumb_image:/avatars/thumb/missing.png, company:TT Agent Demo, medium_image:/avatars/medium/missing.png], email:ttagentdemo@gmail.com, last_name:, converted_trips:16, agent_reviews_converted_quotes:0, rating_extra_info:[pos_rating_percentage:0.0], current_phone_no:+918826683631]], [cabs:fjhfjhfjhgfj, perperson:per person, terms_conditions:gghhg, status:1, is_full_payment:null, places:null, raw_text:true, currency:Rupee, hotels:gjfjhg, id:1838358, hotel_new_format:true, updated_at:2016-10-21T14:03:20+05:30, flights:, price:32430, days:9, excluded:● Meal plan : Breakfast
, description:hfhg, included:● Meal plan : Lunch
● Meal plan : Dinner
● Airport Transfer : Arrival
● Airport Transfer : Departure
● International Airfare
● Internal Airfare
● Government Taxes/VAT/ Service Charges
● Siteseeing 
● Cab type : SIC
● Cab type : Private
● VISA
● Travel Insurance
, share_quote_url:http://traveltriangle.com/quotes/31383338333538/share_quote, user:[chat_channel:notification_199585, id:199585, first_name:TT Agent Demo, username:TT agent demo, last_visited:2016-05-24T14:44:17+05:30, tr_a_profile:[thumb_image:/avatars/thumb/missing.png, company:TT Agent Demo, medium_image:/avatars/medium/missing.png], email:ttagentdemo@gmail.com, last_name:, converted_trips:16, agent_reviews_converted_quotes:0, rating_extra_info:[pos_rating_percentage:0.0], current_phone_no:+918826683631]]]</con:value></con:property><con:property><con:name>currency</con:name><con:value>Rupee</con:value></con:property><con:property><con:name>agentname</con:name><con:value/></con:property><con:property><con:name>destination</con:name><con:value>NewZealand</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="022eee29-97a5-45b7-97ec-5aee20c91e4a" name="ReactivateTrip"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="386ed854-2a98-497e-8e33-d31d178c352f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User Cancel Trip Request" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="loggedIn user rquest a quote" id="01969f4a-f48f-4796-b712-bacd93466e84"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>2040cc92-e9d4-4517-a063-39395e85cdb8</con:targetTestCase><con:properties><con:property><con:name>number_of_days</con:name><con:value>${#TestCase#number_of_days}</con:value></con:property><con:property><con:name>per_page</con:name><con:value>${#TestCase#per_page}</con:value></con:property><con:property><con:name>activity</con:name><con:value>${#TestCase#activity}</con:value></con:property><con:property><con:name>months</con:name><con:value>${#TestCase#months}</con:value></con:property><con:property><con:name>price_ranges</con:name><con:value>${#TestCase#price_ranges}</con:value></con:property><con:property><con:name>destination_type</con:name><con:value>${#TestCase#destination_type}</con:value></con:property><con:property><con:name>activity_encoded</con:name><con:value>${#TestCase#activity_encoded}</con:value></con:property><con:property><con:name>price_ranges_encoded</con:name><con:value>${#TestCase#price_ranges_encoded}</con:value></con:property><con:property><con:name>months_encoded</con:name><con:value>${#TestCase#months_encoded}</con:value></con:property><con:property><con:name>destination_id</con:name></con:property><con:property><con:name>destination_name</con:name></con:property><con:property><con:name>selected_package_id</con:name></con:property><con:property><con:name>selected_package_name</con:name></con:property><con:property><con:name>selected_package_price_total</con:name></con:property><con:property><con:name>selected_package_headline</con:name></con:property><con:property><con:name>selected_package_days</con:name></con:property><con:property><con:name>selected_package_nights</con:name></con:property><con:property><con:name>selected_package_cities</con:name></con:property><con:property><con:name>destinations</con:name></con:property><con:property><con:name>destinations_encoded</con:name></con:property><con:property><con:name>destination_names</con:name></con:property><con:property><con:name>destination_names_encoded</con:name></con:property><con:property><con:name>start_date</con:name></con:property><con:property><con:name>RequestID</con:name><con:value>2612705</con:value></con:property><con:property><con:name>request_redirectUrl</con:name></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CkkiD3Nlc3Npb25faWQGOgZFVEkiJWU3ZWYyYWE3NmZjYTQ5ZjA2OGExNzExYzA4NjgzMGU0BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRVVDZUSmpMeTdYOTZsVThCQ1o2MG11BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVEkiGGFsbG93X2N1c3RvbWl6YXRpb24GOwBGaQPC3SdJIgpmbGFzaAY7AFRvOiVBY3Rpb25EaXNwYXRjaDo6Rmxhc2g6OkZsYXNoSGFzaAk6CkB1c2VkbzoIU2V0BjoKQGhhc2h9AEY6DEBjbG9zZWRGOg1AZmxhc2hlc3sGOhJydHJpcF9jcmVhdGVkVDoJQG5vdzA%3D--3c3265cae85969e1767ef5ed1b3c94e345ddbaf6; path=/; HttpOnly</con:value></con:property><con:property><con:name>user_id</con:name></con:property></con:properties><con:returnProperties><con:entry>RequestID</con:entry><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash to cancel the request" id="065e2c3c-fad5-4f1b-b031-21c36a6f0ffc"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/requested_trips/{loggedIn user rquest a quote#RequestID}/cancelRequest</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>post</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>GR486AYqjPUnYu76T+mzDogFbAgwY7Rz90tp9bQbIjs=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user cancel the trip request" id="9723b706-7efa-4cc2-b10d-3b35887d32a7"><con:settings/><con:config service="CancelRequest" resourcePath="/api/{apiVersion}/requested_trips/{tripID}/cancelRequest" methodName="CancelRequest" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user cancel the trip request" id="8966fe98-1554-439a-a86d-e0ad1cf9bd81" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash to cancel the request#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=UTF-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"cancel_reason":"","changed_destination_name":"","commit":"Cancel Request","id":${loggedIn user rquest a quote#RequestID},"otherReason":"","quote_customization":"","reason":"Canceled"}</con:request><con:originalUri>http://traveler-api.ttdev.in/api/v1/requested_trips/456360/cancelRequest</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="26808243-d4e4-42a5-9ba0-c2da9650d10e" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="8325740b-67b9-4595-a5ac-486fdd00aaa2" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def successmessage = json_response_holder.success;

assert successmessage==true: "Success message should be true but it is : "+ successmessage;</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="apiVersion" value="v1"/>
  <con:entry key="tripID" value="${loggedIn user rquest a quote#RequestID}"/>
</con:parameters><con:parameterOrder><con:entry>apiVersion</con:entry><con:entry>tripID</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for get requested trip detail" id="68fa2d09-3a61-4847-825d-017bb343f2d3"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/${loggedIn user rquest a quote#RequestID}?include_quotes=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>76DSxAld7g6NhXheLPf2XBSvYCkhulCnlmQ7UWNQ8dE=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user view request detail" id="47ec2d74-73f0-4e4d-b052-510328b1ade1"><con:settings/><con:config service="GetRequestDetail" resourcePath="/api/{version}/requested_trips/{rtripId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user view request detail" id="3bb87632-a6dc-4ec6-a6d6-0d9edb486313" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for get requested trip detail#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1838358</con:originalUri><con:assertion type="GroovyScriptAssertion" id="bfa7c350-0a50-471d-9c61-269f35459f60" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);


def tripStatus = json_response_holder.status;

assert tripStatus=="Cancelled" : " Trip status should be Cancelled but it is"+ tripStatus;
</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="d6176990-0894-4497-b407-3505c582b8e6" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="rtripId" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="include_quotes" value="true"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="version" value="v2"/>
</con:parameters><con:parameterOrder><con:entry>rtripId</con:entry><con:entry>version</con:entry><con:entry>include_quotes</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash to reactive the request" id="3c62453f-2605-4200-97a4-b008642a0308"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v1/requested_trips/${loggedIn user rquest a quote#RequestID}/reactive</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>post</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>GR486AYqjPUnYu76T+mzDogFbAgwY7Rz90tp9bQbIjs=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user reactive the trip" id="9493b963-7bb7-4535-b3cb-5ae785c1aa12"><con:settings/><con:config service="ReactivateTrip" resourcePath="/api/v1/requested_trips/{rid}/reactivate" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user reactive the trip" id="b5de6e3f-e9ea-4de7-bbdc-12793f33aba5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash to reactive the request#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"id":${loggedIn user rquest a quote#RequestID}}</con:request><con:originalUri>http://traveler-api.ttdev.in/api/v1/requested_trips/947690/reactivate</con:originalUri><con:assertion type="GroovyScriptAssertion" id="2e3a38b1-1e58-4e7b-b3b8-cc5ca8677aaa" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def successmessage = json_response_holder.success;

assert successmessage==true: "Success message should be true but it is : "+ successmessage;</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="f2156be6-5a3b-4aa4-a8c5-f63152b862de" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="rid" value="${loggedIn user rquest a quote#RequestID}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="again get the hash for get requested trip detail" id="bde97f66-76f8-4443-bf0a-790244212564"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/${loggedIn user rquest a quote#RequestID}?include_quotes=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>76DSxAld7g6NhXheLPf2XBSvYCkhulCnlmQ7UWNQ8dE=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="again user view reactive request detail" id="7ce667cc-6481-4adf-b8c6-c34f6d4ee6b4"><con:settings/><con:config service="GetRequestDetail" resourcePath="/api/{version}/requested_trips/{rtripId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="again user view reactive request detail" id="3bb87632-a6dc-4ec6-a6d6-0d9edb486313" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${again get the hash for get requested trip detail#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1838358</con:originalUri><con:assertion type="GroovyScriptAssertion" id="bfa7c350-0a50-471d-9c61-269f35459f60" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);


def tripStatus = json_response_holder.status;

assert tripStatus=="Active" : " Trip status should be Cancelled but it is"+ tripStatus;
</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="d6176990-0894-4497-b407-3505c582b8e6" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="rtripId" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="include_quotes" value="true"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="version" value="v2"/>
</con:parameters><con:parameterOrder><con:entry>rtripId</con:entry><con:entry>version</con:entry><con:entry>include_quotes</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>number_of_days</con:name><con:value>4-6</con:value></con:property><con:property><con:name>per_page</con:name><con:value>50</con:value></con:property><con:property><con:name>activity</con:name><con:value>5,3</con:value></con:property><con:property><con:name>months</con:name><con:value>4-6</con:value></con:property><con:property><con:name>price_ranges</con:name><con:value>0-10000</con:value></con:property><con:property><con:name>destination_type</con:name><con:value>international</con:value></con:property><con:property><con:name>price_ranges_encoded</con:name><con:value>0-10000</con:value></con:property><con:property><con:name>activity_encoded</con:name><con:value>5%2C3</con:value></con:property><con:property><con:name>months_encoded</con:name><con:value>10-12</con:value></con:property><con:property><con:name>quoteIDs</con:name><con:value>[[cabs:fjhfjhfjhgfj, perperson:per person, terms_conditions:gghhg, status:1, is_full_payment:null, places:null, raw_text:true, currency:Rupee, hotels:gjfjhg, id:1840799, hotel_new_format:true, updated_at:2016-10-22T01:16:57+05:30, flights:, price:32430, days:9, excluded:● Meal plan : Breakfast
, description:hfhg, included:● Meal plan : Lunch
● Meal plan : Dinner
● Airport Transfer : Arrival
● Airport Transfer : Departure
● International Airfare
● Internal Airfare
● Government Taxes/VAT/ Service Charges
● Siteseeing 
● Cab type : SIC
● Cab type : Private
● VISA
● Travel Insurance
, share_quote_url:http://traveltriangle.com/quotes/31383430373939/share_quote, user:[chat_channel:notification_199585, id:199585, first_name:TT Agent Demo, username:TT agent demo, last_visited:2016-05-24T14:44:17+05:30, tr_a_profile:[thumb_image:/avatars/thumb/missing.png, company:TT Agent Demo, medium_image:/avatars/medium/missing.png], email:ttagentdemo@gmail.com, last_name:, converted_trips:16, agent_reviews_converted_quotes:0, rating_extra_info:[pos_rating_percentage:0.0], current_phone_no:+918826683631]], [cabs:fjhfjhfjhgfj, perperson:per person, terms_conditions:gghhg, status:1, is_full_payment:null, places:null, raw_text:true, currency:Rupee, hotels:gjfjhg, id:1838358, hotel_new_format:true, updated_at:2016-10-21T14:03:20+05:30, flights:, price:32430, days:9, excluded:● Meal plan : Breakfast
, description:hfhg, included:● Meal plan : Lunch
● Meal plan : Dinner
● Airport Transfer : Arrival
● Airport Transfer : Departure
● International Airfare
● Internal Airfare
● Government Taxes/VAT/ Service Charges
● Siteseeing 
● Cab type : SIC
● Cab type : Private
● VISA
● Travel Insurance
, share_quote_url:http://traveltriangle.com/quotes/31383338333538/share_quote, user:[chat_channel:notification_199585, id:199585, first_name:TT Agent Demo, username:TT agent demo, last_visited:2016-05-24T14:44:17+05:30, tr_a_profile:[thumb_image:/avatars/thumb/missing.png, company:TT Agent Demo, medium_image:/avatars/medium/missing.png], email:ttagentdemo@gmail.com, last_name:, converted_trips:16, agent_reviews_converted_quotes:0, rating_extra_info:[pos_rating_percentage:0.0], current_phone_no:+918826683631]]]</con:value></con:property><con:property><con:name>currency</con:name><con:value>Rupee</con:value></con:property><con:property><con:name>agentname</con:name><con:value>TT agent demo</con:value></con:property><con:property><con:name>destination</con:name><con:value>NewZealand</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="451965a9-9480-434e-884a-5581db6bd215" name="Hotel"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="5e7469f7-1f93-4f40-83a9-01197ae37540" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="User Get Hotel Of Quote" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="loggedIn user rquest a quote" id="646122e5-7293-4f77-9a28-69874736ac83"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>9ebac769-8f29-4aaf-8165-c80e46b42f43</con:targetTestCase><con:properties><con:property><con:name>number_of_days</con:name></con:property><con:property><con:name>per_page</con:name></con:property><con:property><con:name>activity</con:name></con:property><con:property><con:name>months</con:name></con:property><con:property><con:name>price_ranges</con:name></con:property><con:property><con:name>destination_type</con:name></con:property><con:property><con:name>activity_encoded</con:name></con:property><con:property><con:name>price_ranges_encoded</con:name></con:property><con:property><con:name>months_encoded</con:name></con:property><con:property><con:name>destination_id</con:name><con:value>56</con:value></con:property><con:property><con:name>destination_name</con:name></con:property><con:property><con:name>selected_package_id</con:name></con:property><con:property><con:name>selected_package_name</con:name></con:property><con:property><con:name>selected_package_price_total</con:name></con:property><con:property><con:name>selected_package_headline</con:name></con:property><con:property><con:name>selected_package_days</con:name></con:property><con:property><con:name>selected_package_nights</con:name></con:property><con:property><con:name>selected_package_cities</con:name></con:property><con:property><con:name>destinations</con:name></con:property><con:property><con:name>destinations_encoded</con:name></con:property><con:property><con:name>destination_names</con:name></con:property><con:property><con:name>destination_names_encoded</con:name></con:property><con:property><con:name>start_date</con:name><con:value/></con:property><con:property><con:name>RequestID</con:name><con:value>2612706</con:value></con:property><con:property><con:name>request_redirectUrl</con:name></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CkkiD3Nlc3Npb25faWQGOgZFVEkiJTFlNTQwZmM2ZjYyNjM0N2I3NjJhMGI2ODIxMTdkZDE3BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA7SLDkkiIiQyYSQxMCRVVDZUSmpMeTdYOTZsVThCQ1o2MG11BjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVEkiGGFsbG93X2N1c3RvbWl6YXRpb24GOwBGaQPB3SdJIgpmbGFzaAY7AFRvOiVBY3Rpb25EaXNwYXRjaDo6Rmxhc2g6OkZsYXNoSGFzaAk6CkB1c2VkbzoIU2V0BjoKQGhhc2h9AEY6DEBjbG9zZWRGOg1AZmxhc2hlc3sGOhJydHJpcF9jcmVhdGVkVDoJQG5vdzA%3D--6cd94684f74c58cb5e91ced256ce179074b06930; path=/; HttpOnly</con:value></con:property><con:property><con:name>user_id</con:name><con:value>953268</con:value></con:property></con:properties><con:returnProperties><con:entry>RequestID</con:entry><con:entry>Cookie</con:entry><con:entry>user_id</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="admin tag agent with trip" id="c51d637b-e2a0-4f4f-96d3-180a2d2c0257"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>16865839-07a3-4d5d-aff3-bc09595f8bf3</con:targetTestCase><con:properties><con:property><con:name>Agent_TagID</con:name><con:value>521</con:value></con:property><con:property><con:name>request_id</con:name><con:value>${loggedIn user rquest a quote#RequestID}</con:value></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWMyZWYxZjhmNTY2NTBiZGIyMTg2YWNmYjYxZmQ4ZGEyBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA06VC0kiIiQyYSQxMCRJWDBpRG9HLm5aSWRmR1ptbFNXRC9PBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--e67079c83564bcc99bd0f3931281985cca878cf9; path=/; HttpOnly</con:value></con:property></con:properties><con:returnProperties><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for destination hotel detail" id="0650f9b9-4e65-488f-b62f-1b62ef2df7e0"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/destinations/${loggedIn user rquest a quote#destination_id}/destination_hotel_images</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>rwPAZPgnLRu2gcUQuaclsT+wAmX1GRGmrvl/O+sU4mM=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="get destination hotel list" id="c910d054-6f64-4152-9cc4-050743114b8e"><con:settings/><con:config service="DestinationHotelImages" resourcePath="/api/{api_version}/destinations/{destinationId}/destination_hotel_images" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="get destination hotel list" id="f00ef24d-81e4-44a7-b43f-423ab7721729" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for destination hotel detail#hash_key}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v2/destinations/67/destination_hotel_images.json</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="69d48784-f9f6-4d46-b41f-4e97a941b7af" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="7d45352f-9592-4e9d-a41f-cafe6b72a7f2" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def hotels= json_response_holder.hotel_images;
for (def hotel in hotels){
	messageExchange.modelItem.testCase.setPropertyValue("address",hotel.address);
	messageExchange.modelItem.testCase.setPropertyValue("category",String.valueOf(hotel.category));
	messageExchange.modelItem.testCase.setPropertyValue("city",hotel.city);
	messageExchange.modelItem.testCase.setPropertyValue("city_id",String.valueOf(hotel.city_id));
	messageExchange.modelItem.testCase.setPropertyValue("d_id",String.valueOf(hotel.d_id));
	messageExchange.modelItem.testCase.setPropertyValue("img",hotel.img);
	messageExchange.modelItem.testCase.setPropertyValue("name",hotel.name);
	messageExchange.modelItem.testCase.setPropertyValue("picture",hotel.pictures);
	break;

}
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="destinationId" value="${loggedIn user rquest a quote#destination_id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>destinationId</con:entry><con:entry>api_version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="agent give quote to traveller" id="cc68357b-f613-43c7-aa32-63b11f6dddde"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5794d198-7055-4330-be4a-67978cc6ef03</con:targetTestCase><con:properties><con:property><con:name>user_id</con:name></con:property><con:property><con:name>auth_key</con:name></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJTJjYTA3MDEwZTBjMzY5MWM0ZmMwOGUyZDc4ODY4N2Y3BjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA02VC0kiIiQyYSQxMCRJa3hSLk02Sm9aYmhKZm9DTVZMZ0guBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--b5646d4b64bede7aaabf34de1ea223ae3a4ab72a; path=/; HttpOnly</con:value></con:property><con:property><con:name>user_email</con:name></con:property><con:property><con:name>user_password</con:name></con:property><con:property><con:name>request_id</con:name><con:value>${loggedIn user rquest a quote#requestID}</con:value></con:property><con:property><con:name>Agent_TagID</con:name><con:value>521</con:value></con:property><con:property><con:name>quoteid</con:name><con:value>4807337</con:value></con:property><con:property><con:name>quoteincl</con:name></con:property><con:property><con:name>traveldays</con:name></con:property><con:property><con:name>saveinclusions</con:name></con:property><con:property><con:name>price</con:name><con:value>32430</con:value></con:property><con:property><con:name>hotelnames</con:name><con:value>${#TestCase#name}</con:value></con:property><con:property><con:name>hotelcityname</con:name><con:value>${#TestCase#city}</con:value></con:property><con:property><con:name>hotelcityid</con:name><con:value>${#TestCase#city_id}</con:value></con:property><con:property><con:name>hoteldetail</con:name><con:value/></con:property><con:property><con:name>excluded</con:name></con:property><con:property><con:name>included</con:name></con:property></con:properties><con:returnProperties><con:entry>Cookie</con:entry><con:entry>quoteid</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash for get quote detail" id="51830647-344a-4e8c-9d7e-6bf4ef329221"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v2/requested_trips/${loggedIn user rquest a quote#RequestID}?include_quotes=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value/></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>4lWDpGcdSxayAffaynRWudl7sxqXroQFIwNGvQIifko=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user view request detail" id="3517a4e6-5bd4-43b6-9edf-7f34d3ff383b"><con:settings/><con:config service="GetRequestDetail" resourcePath="/api/{version}/requested_trips/{rtripId}" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user view request detail" id="3bb87632-a6dc-4ec6-a6d6-0d9edb486313" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash for get quote detail#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveltriangle.com/api/v1/requested_trips/1095915/quotes/1838358</con:originalUri><con:assertion type="GroovyScriptAssertion" id="bfa7c350-0a50-471d-9c61-269f35459f60" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def quotes = json_response_holder.quotes;

String quoteID = context.expand('${agent give quote to traveller#quoteid}');
String price = context.expand('${agent give quote to traveller#price}');
boolean isQuoteFound = false;
for (quote in quotes){
	if(quote.id==quoteID.toInteger() &amp;&amp; quote.price==price.toInteger()){
		isQuoteFound =  true;
		break;
	}	
}

assert isQuoteFound==true : "quoteID "+quoteID +" are not present in response quotes detaile "+ quotes
</scriptText></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="d6176990-0894-4497-b407-3505c582b8e6" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="rtripId" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="include_quotes" value="true"/>
  <con:entry key="security_auth_token" value="ekxnfvoxefmpelbvzuerofqmtcffxxcuwengpdrvwwgrbajkrk"/>
  <con:entry key="version" value="v2"/>
</con:parameters><con:parameterOrder><con:entry>rtripId</con:entry><con:entry>version</con:entry><con:entry>include_quotes</con:entry><con:entry>security_auth_token</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash key for quote hotel detail" id="a4f31a94-4142-48df-871d-a61f2392fb26"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v3/quotes/${agent give quote to traveller#quoteid}/get_hotel_detail?requested_trip_id=${loggedIn user rquest a quote#RequestID}</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>h58YpSJQjc4rj5J80NXUN40KZ9BZV8CiZE0yLT4QkWE=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user get quote hotel detail" id="8b687217-d201-446d-aa20-5f7cce255802"><con:settings/><con:config service="GetHotelDetails" resourcePath="/api/{version}/quotes/{quote_id}/get_hotel_detail" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user get quote hotel detail" id="1636edc6-4369-41e1-9fa7-7a6b5fbb4a94" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash key for quote hotel detail#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v3/quotes/1534639/get_hotel_detail</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="51b1534d-5700-4c15-bf7b-0e44a13d76ea" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="01c09cd4-68e2-4031-8b65-5a8f24abcdc6" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def hotels = json_response_holder.hotels;
String hotelname = context.expand('${#TestCase#name}');
int d_id = context.expand('${#TestCase#d_id}').toInteger();
int city_id = context.expand('${#TestCase#city_id}').toInteger();
String address = context.expand('${#TestCase#address}');
String city_name = context.expand('${#TestCase#city}');

boolean isfound = false;
for (def hotel in hotels){
	for(hotelinfo in hotel){
		assert hotelinfo.city_name==city_name:"City name should be "+city_name +"but it is "+hotelinfo.city_name;
		messageExchange.modelItem.testCase.setPropertyValue("quotecityid",hotelinfo.quote_city_id.toString());
		if (hotelinfo.hotel_info.name == hotelname){
			isfound =false;
			assert hotelinfo.hotel_info.d_id == d_id;
			assert hotelinfo.hotel_info.city_id == city_id;
			assert hotelinfo.hotel_info.address == address;
			isfound =true;
			break
		}
	}
}
assert isfound == true : "hotel info is wrong"


</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="requested_trip_id" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="quote_id" value="${agent give quote to traveller#quoteid}"/>
  <con:entry key="version" value="v3"/>
</con:parameters><con:parameterOrder><con:entry>quote_id</con:entry><con:entry>requested_trip_id</con:entry><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="get the hash key for hotel accept" id="2ce42c92-bed9-4ae0-93e0-bdc13d9e077b"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v3/mark_hotel_accepted?id=${agent give quote to traveller#quoteid}</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>post</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>GR486AYqjPUnYu76T+mzDogFbAgwY7Rz90tp9bQbIjs=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user accept hotel" id="c819d573-6b51-4bce-b469-bf3b88f7cc1f"><con:settings/><con:config service="HotelAccept" resourcePath="/api/v3/mark_hotel_accepted" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user accept hotel" id="dc0645be-c1f1-4a69-8912-6f4f067f12de" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${get the hash key for hotel accept#hash_key}"/>
  <con:entry key="Accept" value="application/json; charset=utf-8"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request>{"_json":{"${#TestCase#quotecityid}":{"status":1,"reason":"","other_reason":""}}}</con:request><con:originalUri>http://traveler-api.ttdev.in/api/v3/mark_hotel_accepted</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="ddc5f3d8-1061-4cbf-b813-17b0953cfca4" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="290df2d4-df57-4fc5-bcaf-62ca9d174725" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def hotelacceptsuccess = json_response_holder.success;
assert hotelacceptsuccess=="true":"Hotel success should be true bit it is "+ hotelacceptsuccess</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="${agent give quote to traveller#quoteid}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>id</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="again get the hash key for quote hotel detail" id="f64b3227-f8ba-4639-be36-f3919c78799d"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>${#Project#httpverb}://${#Project#traveler_apiendpoint}/api/v3/quotes/${agent give quote to traveller#quoteid}/get_hotel_detail?requested_trip_id=${loggedIn user rquest a quote#RequestID}</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>get</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>h58YpSJQjc4rj5J80NXUN40KZ9BZV8CiZE0yLT4QkWE=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="user again get quote hotel detail" id="196b959e-8bf3-46de-9deb-88c34fc0295a"><con:settings/><con:config service="GetHotelDetails" resourcePath="/api/{version}/quotes/{quote_id}/get_hotel_detail" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="user again get quote hotel detail" id="1636edc6-4369-41e1-9fa7-7a6b5fbb4a94" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${loggedIn user rquest a quote#Cookie}"/>
  <con:entry key="TT-Mobile" value="${again get the hash key for quote hotel detail#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="Content-Type" value="application/json; charset=utf-8"/>
  <con:entry key="AppIdentifier" value="com.traveltriangle.traveller"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>${#Project#httpverb}://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v3/quotes/1534639/get_hotel_detail</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="51b1534d-5700-4c15-bf7b-0e44a13d76ea" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="01c09cd4-68e2-4031-8b65-5a8f24abcdc6" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def hotels = json_response_holder.hotels;
String hotelname = context.expand('${#TestCase#name}');
int d_id = context.expand('${#TestCase#d_id}').toInteger();
int city_id = context.expand('${#TestCase#city_id}').toInteger();
String address = context.expand('${#TestCase#address}');
String city_name = context.expand('${#TestCase#city}');
String quotecityid = context.expand('${#TestCase#quotecityid}');

boolean isfound = false;
for (def hotel in hotels){
	for(hotelinfo in hotel){
		assert hotelinfo.city_name==city_name:"City name should be "+city_name +"but it is "+hotelinfo.city_name;
		assert hotelinfo.quote_city_id == quotecityid.toInteger();
		assert hotelinfo.status == 1;
		if (hotelinfo.hotel_info.name == hotelname){
			isfound =false;
			assert hotelinfo.hotel_info.d_id == d_id;
			assert hotelinfo.hotel_info.city_id == city_id;
			assert hotelinfo.hotel_info.address == address;
			isfound =true;
			break
		}
	}
}
assert isfound == true : "hotel info is wrong"


</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="requested_trip_id" value="${loggedIn user rquest a quote#RequestID}"/>
  <con:entry key="quote_id" value="${agent give quote to traveller#quoteid}"/>
  <con:entry key="version" value="v3"/>
</con:parameters><con:parameterOrder><con:entry>quote_id</con:entry><con:entry>requested_trip_id</con:entry><con:entry>version</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>number_of_days</con:name><con:value>4-6</con:value></con:property><con:property><con:name>per_page</con:name><con:value>50</con:value></con:property><con:property><con:name>activity</con:name><con:value>5,3</con:value></con:property><con:property><con:name>months</con:name><con:value>4-6</con:value></con:property><con:property><con:name>price_ranges</con:name><con:value>0-10000</con:value></con:property><con:property><con:name>destination_type</con:name><con:value>international</con:value></con:property><con:property><con:name>price_ranges_encoded</con:name><con:value>0-10000</con:value></con:property><con:property><con:name>activity_encoded</con:name><con:value>5%2C3</con:value></con:property><con:property><con:name>months_encoded</con:name><con:value>4-6</con:value></con:property><con:property><con:name>currency</con:name><con:value>Rupee</con:value></con:property><con:property><con:name>destination</con:name><con:value>Europe,France,Switzerland,Netherlands</con:value></con:property><con:property><con:name>agentname</con:name><con:value>TT agent demo</con:value></con:property><con:property><con:name>commentID</con:name><con:value>1733625</con:value></con:property><con:property><con:name>comment</con:name><con:value>hii</con:value></con:property><con:property><con:name>commenttitle</con:name><con:value>preferences_input_comment</con:value></con:property><con:property><con:name>address</con:name><con:value>PB. No. 40, 685612 Munnar, India</con:value></con:property><con:property><con:name>category</con:name><con:value>4</con:value></con:property><con:property><con:name>city</con:name><con:value>Munnar</con:value></con:property><con:property><con:name>city_id</con:name><con:value>26320</con:value></con:property><con:property><con:name>d_id</con:name><con:value>587488</con:value></con:property><con:property><con:name>img</con:name><con:value>w_300/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/668492/original/3699808.jpg</con:value></con:property><con:property><con:name>name</con:name><con:value>Tall Trees</con:value></con:property><con:property><con:name>picture</con:name><con:value>w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/668492/original/3699808.jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/668493/original/3699833.jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/668494/original/3699824.jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/668495/original/3699823.jpg,w_630/http://d29m6q8e2acg44.cloudfront.net/attachments/pictures/668496/original/3699822.jpg</con:value></con:property><con:property><con:name>quotecityid</con:name><con:value>22978258</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:testSuite id="9fc8815e-c6d9-47b6-962d-dfc3c04d0423" name="Admin" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="16865839-07a3-4d5d-aff3-bc09595f8bf3" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Admin Tag  Trip With Agent" searchProperties="true"><con:settings/><con:testStep type="calltestcase" name="Admin Login To Application" id="45fad3f2-be2c-4a1c-a99a-f00b6f176141"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>67e7e418-8cca-4c1e-abab-7049529c68de</con:targetTestCase><con:properties><con:property><con:name>user_id</con:name><con:value>759118</con:value></con:property><con:property><con:name>auth_key</con:name><con:value>e3a117c23bc611e8b460064d670c296a</con:value></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWMyZWYxZjhmNTY2NTBiZGIyMTg2YWNmYjYxZmQ4ZGEyBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA06VC0kiIiQyYSQxMCRJWDBpRG9HLm5aSWRmR1ptbFNXRC9PBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--e67079c83564bcc99bd0f3931281985cca878cf9; path=/; HttpOnly</con:value></con:property></con:properties><con:returnProperties><con:entry>user_id</con:entry><con:entry>auth_key</con:entry><con:entry>Cookie</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="calltestcase" name="Get the hash for Agent Tagging" id="6b80880f-6353-46c8-99fa-99b3f3ec9957"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>http://${#Project#traveler_apiendpoint}/api/v3/requested_trips/${#TestCase#request_id}/add_tag_and_activate_trip?is_activate=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#admin_user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>post</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>CLtif+rkGPg3AQIXO2F9T1l5DcAktw7ZX7tOWWv0ZS8=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Admin Active the Trip" id="e32e055f-dbb0-4922-91bd-2e1fcc5d828b"><con:settings/><con:config service="AddAgentTagAndActivetrip" resourcePath="/api/v3/requested_trips/{rtrip_id}/add_tag_and_activate_trip" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Admin Active the Trip" id="e6fc8241-2c92-43eb-985f-aac69af3230d" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Admin Login To Application#Cookie}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="TT-Mobile" value="${Get the hash for Agent Tagging#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v3/requested_trips/946681/add_tag_and_activate_trip</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="a3d3d5e3-fcd2-4d28-a6dd-fb81d652cd15" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="1804b58b-901f-4c49-b46d-990668eb0e15" name="validate agent tagged and trip activate"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

def is_activate = json_response_holder.is_activate;


assert(is_activate == true) : "trip is not set to active"


messageExchange.modelItem.testCase.setPropertyValue("Cookie",context.expand('${Admin Login To Application#Cookie}'));
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="rtrip_id" value="${#TestCase#request_id}"/>
  <con:entry key="is_activate" value="true"/>
</con:parameters><con:parameterOrder><con:entry>rtrip_id</con:entry><con:entry>tag_id</con:entry><con:entry>is_activate</con:entry><con:entry>delete_agent_tags</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="and again get the hash for Agent Tagging" id="873f365f-bd80-47b6-abd2-a6bc3461705d"><con:settings/><con:config xsi:type="con:RunTestCaseStep" copyHttpSession="true" copyLoadTestProperties="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1966b330-a53d-494b-ba1a-a687afdeabe8</con:targetTestCase><con:properties><con:property><con:name>request_url</con:name><con:value>http://${#Project#traveler_apiendpoint}/api/v3/requested_trips/${#TestCase#request_id}/add_tag_and_activate_trip?tag_id=521&amp;is_activate=true&amp;delete_agent_tags=true</con:value></con:property><con:property><con:name>user_email</con:name><con:value>${#Project#admin_user_email}</con:value></con:property><con:property><con:name>request_type</con:name><con:value>post</con:value></con:property><con:property><con:name>hash_key</con:name><con:value>CLtif+rkGPg3AQIXO2F9T1l5DcAktw7ZX7tOWWv0ZS8=</con:value></con:property></con:properties><con:returnProperties><con:entry>hash_key</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="Admin Tag the Trip With Agent" id="9b085bff-1322-4825-ac4a-3bb58d51e3d0"><con:settings/><con:config service="AddAgentTagAndActivetrip" resourcePath="/api/v3/requested_trips/{rtrip_id}/add_tag_and_activate_trip" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Admin Tag the Trip With Agent" id="e6fc8241-2c92-43eb-985f-aac69af3230d" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Cookie" value="${Admin Login To Application#Cookie}"/>
  <con:entry key="User-Agent" value="${#Project#user_agent}"/>
  <con:entry key="TT-Mobile" value="${Get the hash for Agent Tagging#hash_key}"/>
  <con:entry key="Accept" value="application/json"/>
</xml-fragment>]]></con:setting></con:settings><con:endpoint>http://${#Project#traveler_apiendpoint}</con:endpoint><con:request/><con:originalUri>http://traveler-api.ttdev.in/api/v3/requested_trips/946681/add_tag_and_activate_trip</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="a3d3d5e3-fcd2-4d28-a6dd-fb81d652cd15" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="1804b58b-901f-4c49-b46d-990668eb0e15" name="validate agent tagged and trip activate"><con:configuration><scriptText>import groovy.json.JsonSlurper;

String response = messageExchange.getResponseContent();
def json_response_holder = new JsonSlurper().parseText(response);

//def is_activate = json_response_holder.is_activate;
def is_tagged = json_response_holder.tag_added;

//assert(is_activate == true) : "trip is not set to active"
assert(is_tagged == true) : "trip is not tag to agent"

messageExchange.modelItem.testCase.setPropertyValue("Cookie",context.expand('${Admin Login To Application#Cookie}'));
</scriptText></con:configuration></con:assertion><con:credentials><con:username>ttuser</con:username><con:password>ttuser</con:password><con:selectedAuthProfile>Basic</con:selectedAuthProfile><con:addedBasicAuthenticationTypes>Basic</con:addedBasicAuthenticationTypes><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="rtrip_id" value="${#TestCase#request_id}"/>
  <con:entry key="delete_agent_tags" value="true"/>
  <con:entry key="tag_id" value="${#TestCase#Agent_TagID}"/>
</con:parameters><con:parameterOrder><con:entry>rtrip_id</con:entry><con:entry>tag_id</con:entry><con:entry>is_activate</con:entry><con:entry>delete_agent_tags</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>Agent_TagID</con:name><con:value>521</con:value></con:property><con:property><con:name>request_id</con:name><con:value>2612706</con:value></con:property><con:property><con:name>Cookie</con:name><con:value>_trips3m_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWMyZWYxZjhmNTY2NTBiZGIyMTg2YWNmYjYxZmQ4ZGEyBjsAVEkiGXdhcmRlbi51c2VyLnVzZXIua2V5BjsAVFsHWwZpA06VC0kiIiQyYSQxMCRJWDBpRG9HLm5aSWRmR1ptbFNXRC9PBjsAVEkiDHJlZmVyZXIGOwBUSSIABjsAVA%3D%3D--e67079c83564bcc99bd0f3931281985cca878cf9; path=/; HttpOnly</con:value></con:property></con:properties></con:testCase><con:properties/></con:testSuite><con:requirements/><con:properties><con:property><con:name>execution_tag</con:name><con:value>regression</con:value></con:property><con:property><con:name>dbname</con:name><con:value/></con:property><con:property><con:name>traveler_apiendpoint</con:name><con:value>master.ttdev.in</con:value></con:property><con:property><con:name>user_email</con:name><con:value>lorem_tt_test_ipsum@mailinator.com</con:value></con:property><con:property><con:name>user_password</con:name><con:value>tt1234</con:value></con:property><con:property><con:name>api_version</con:name><con:value>v2</con:value></con:property><con:property><con:name>appversion</con:name><con:value>3.2</con:value></con:property><con:property><con:name>agent_user_email</con:name><con:value>ttprodagent@gmail.com</con:value></con:property><con:property><con:name>agent_user_password</con:name><con:value>ttprodagent123</con:value></con:property><con:property><con:name>admin_user_email</con:name><con:value>ttprodops@gmail.com</con:value></con:property><con:property><con:name>admin_user_password</con:name><con:value>ttprodops123</con:value></con:property><con:property><con:name>httpverb</con:name><con:value>https</con:value></con:property><con:property><con:name>user_agent</con:name><con:value>Dalvik/2.1.0 (Linux; U; Android 7.1.2; Nexus 5X Build/N2G47W)</con:value></con:property></con:properties><con:wssContainer/><con:databaseConnectionContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/><con:reporting><con:xmlTemplates/><con:parameters/></con:reporting><con:beforeRunScript>import groovy.lang.Binding;
import groovy.util.GroovyScriptEngine;
import java.sql.DriverManager;
import java.sql.Connection;
import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import com.mongodb.MongoClient;
import com.mongodb.MongoClientURI;
import com.mongodb.client.MongoDatabase;

////////////////////// Functions /////////////////////////

def filterList(commaSperatedListContent){
	def list = commaSperatedListContent.split(",");
	def filteredList = [];
	list.each(){
	def entry = it.toLowerCase().replaceAll("^\\s+", "");
	entry = entry.trim();
	if(entry != ""){
	filteredList.add(entry);}	
	}
	return filteredList;
}

def customListCompare(list1,list2){
	//list1 is the list of tags that are given by user to execute.
	//list2 is the list of tags for specific test suite.
	boolean isRunnable = false;
	for(int l1 in 0 .. list1.size()-1)
	{
		def inputTag = list1.get(l1);		
		for(int l2 in 0 .. list2.size()-1){
			
			if(inputTag.toString() == list2.get(l2).toString()){
				isRunnable =  true;
				break;
			}
		}
		if(isRunnable){
			break;
		}
	}
	return isRunnable;
}
///////////////////// Function //////////////////////////////////////////////

log.info "Start execution";
def projDir = context.expand('${projectDir}')
try{
File propFile =new File(projDir + "/Configurations/" + project.getName() + "/" + project.getName() + ".properties");
log.info propFile;
boolean isDeleted = propFile.delete();
log.info isDeleted;
}
catch(Exception e){log.info e.getMessage();}



def execution_Tag = project.getPropertyValue("execution_tag");

log.info "Test Execution Base Tag : "+ execution_Tag;

//Fetch the tags to execute the required test suites.
def filteredTags = filterList(execution_Tag) ;

def Conf_input = "";

log.info "Reading the Configuration file.....";

try{

Conf_input = new File(projDir + "/Configurations/" + project.getName() + "/TestData.xml");

def parser = new XmlParser(); //Get XML Parser.

def Configuration = parser.parse(Conf_input);//Point parser to configration file.

context.Configuration = Configuration;

}
catch(Exception e){
		assert false : "Error in reading configuration file -- " + e.getMessage();
}

def testSuiteListToExecute = [];

log.info "Fetching Test-Scenarios to execute....";

def testSuites = project.getTestSuiteList();

//Enable all TestSuites.
for(j in 0 .. testSuites.size()-1){
	//log.info testSuites.get(j).getName();
	testSuites.get(j).setDisabled(false); 
}
//Decide which test suites to execute and eventually disabled the non-relevant test suites.
		for(i in 0 .. testSuites.size()-1) {
   			def testSuiteName = testSuites.get(i).getName();
   			def tags = context.Configuration.TestSuite."${testSuiteName}".tags.text()
   			def testSuiteTags = filterList(tags);
   			   			
   			if(filteredTags == null || filteredTags.empty){
   				break;
   			}
   			else{
   				if(testSuiteTags == null || testSuiteTags.empty){
   					testSuites.get(i).setDisabled(true);
   				}
   				else{
   					def isRunnable = customListCompare(filteredTags,testSuiteTags);
   					log.info testSuiteName+":::"+isRunnable
   					if(!isRunnable){
   						testSuites.get(i).setDisabled(true);
   					}
   				}
   			}
   			
		}


// Load Databases.
log.info"Loading Databases........";

int index = 1;

String[] db_Names = project.getPropertyValue("dbname").split(",");

for(String db_Name in db_Names){

db_Name = db_Name.trim();

if(db_Name == ""){break;}

context.dbName = db_Name;

String dbConnectionString = "";

String dbDriver = "";

String dbType = "";

try{
	String databaseCollectionFile_Location = projDir + "/Configurations/" + project.getName() + "/DataBases.csv";
	
	BufferedReader reader = new BufferedReader(new FileReader(databaseCollectionFile_Location));
	
	String lineInFile = reader.readLine();
		
		while(lineInFile != null){
		
		String[] lineContents = lineInFile.split(",");
		
		if(lineContents[0] == context.dbName){
			dbType = lineContents[1]
			dbDriver = lineContents[2];
			dbConnectionString = lineContents[3];
			break;
		}
		lineInFile = reader.readLine();
		}
}
catch(Exception e){
	log.info "Couldn't load database from 'Databases' repo.Please review the file again!!" + e.getMessage();
}
context.dbDriver = dbDriver

context.dbConnectionString = dbConnectionString

log.info "Connecting to : [" + context.dbName + "] ................";

log.info "DB Connection String --" + dbConnectionString;

if(dbType.toLowerCase().contains("mongo")){
	try{
	MongoClient mongoClient = new MongoClient(new MongoClientURI(context.dbConnectionString));
   	
     context.dbConnection = mongoClient;
	if(context.mongoConnection == null){
     context.mongoConnection = mongoClient;}
     else{
     	String mongoConnectionString = "mongoConnection" + index;
     	log.info mongoConnectionString;
     	context."${mongoConnectionString}" = mongoClient;
     }
	}
	catch(Exception e){
		runner.fail("Couldn't connect to application DB -- " + context.dbName + " " + e.getMessage());
	}
}
else if(dbType.toLowerCase().contains("mysql")){
	if(context.dbName != "" &amp;&amp; context.dbName != null){
	try{
		com.eviware.soapui.support.GroovyUtils.registerJdbcDriver(context.dbDriver )
		
		def connection = DriverManager.getConnection(context.dbConnectionString);
		context.dbConnection = connection;
		if(context.mysqlConnection == null){
     		context.mysqlConnection = connection;}
     	else{
     		String mysqlConnectionString = "mysqlConnection" + index;
     		context."${mysqlConnectionString}" = connection;
    		 }
		context.statement = connection.createStatement();
	}
	catch(Exception e){
			runner.fail("Couldn't connect to application DB -- " + context.dbName + " " + e.getMessage());	
	}
}
}
index++;
}
log.info "Loading utilities......";
//create an instance of generic utilities.
try{
def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
String path = projDir + "/ext/";

GroovyScriptEngine gse = new GroovyScriptEngine(path) ;
externalScript = gse.loadScriptByName("Utilities.groovy")
instance = externalScript.newInstance()
context.utility = instance ; 
}
catch(Exception e){
	log.info "Unable to initialize framework utility, error being -- " + e.getMessage();
}

log.info"Preparing test data ..............";

context.Configuration.children().each{
	if(it.name() == "TestSuite"){
		it.children().each{
	String testSuiteNameInConf = it.name();
	
	it.children().each{
		if(it.name() != "tags"){			
			String testCaseNameInConf = it.name();
			
			it.children().each{
				try{
					//log.info testSuiteNameInConf+":::"+testCaseNameInConf+":::"+it.name()+":::"+it.text()
					project.getTestSuiteByName(testSuiteNameInConf).getTestCaseByName(testCaseNameInConf).setPropertyValue(it.name(), it.text());
					}
				catch(Exception e){ }
			}
		}
	}
}
}
}</con:beforeRunScript><con:afterRunScript>import com.eviware.soapui.model.testsuite.TestSuiteRunner;
import com.eviware.soapui.model.testsuite.TestCaseRunner;
import com.eviware.soapui.model.testsuite.TestRunner.Status;

def projDir = context.expand('${projectDir}')
// Get the Execution tag.
String executiontag = project.getPropertyValue("execution_tag");

//Start Time
def projectstartTime = new Date(runner.getStartTime());

//Time Taken
def pr_timeTaken = runner.getTimeTaken();

int testcasespassed = 0;
int testcasesfailed = 0;
int testcasesexecuted = 0;
List&lt;String> testCaseNameFailed = new ArrayList&lt;String>();
//Number Of test cases passed/failed/didn't run.
def List&lt;TestSuiteRunner> testSuiteRunners = runner.getResults()

for(TestSuiteRunner suiterunner in testSuiteRunners){
	String testSuiteName = suiterunner.getTestSuite().getName();
	List&lt;TestCaseRunner> testcaserunners = suiterunner.getResults();
	for(TestCaseRunner testcaserunner in testcaserunners){
		Status status = testcaserunner.getStatus();
		 String testcasename = testcaserunner.getTestCase().getName();
		if(status == Status.FINISHED){
			testcasespassed++;
		}
		if(status == Status.FAILED){
			testcasesfailed++;
			testCaseNameFailed.add(testcasename);
		}
		log.info status;
	}
}
testcasesexecuted = testcasespassed + testcasesfailed;
def percentPassed = (testcasespassed / testcasesexecuted) * 100;
percentPassed = Math.round(percentPassed * 100) / 100
String testCaseFailedInStringFormat = "";
for(String testCaseFailed in testCaseNameFailed){
	if(testCaseFailedInStringFormat == ""){
		testCaseFailedInStringFormat = testCaseFailed;
	}
	else{
	testCaseFailedInStringFormat = testCaseFailedInStringFormat + "," + testCaseFailed}
}

// create a property file.
try{
File propFile =new File(projDir + "/Configurations/" + project.getName() + "/" + project.getName() + ".properties");
propFile.delete();
boolean isCreated = propFile.createNewFile();
log.info isCreated;
Properties props = new Properties();
props.load(propFile.newDataInputStream());
props.setProperty("testgroup",executiontag);
props.setProperty("StartTime",projectstartTime.toString());
props.setProperty("timetaken",pr_timeTaken.toString());
props.setProperty("testexecuted",testcasesexecuted.toString());
props.setProperty("testcasespassed",testcasespassed.toString());
props.setProperty("testcasesfailed",testcasesfailed.toString());
props.setProperty("persentpassed",percentPassed.toString());
props.setProperty("testCaseFailedInStringFormat",testCaseFailedInStringFormat);
props.store(propFile.newWriter(), null)
}
catch(Exception e){
	log.info "Error in storing test execution data"  + e.getMessage();
}
</con:afterRunScript><con:sensitiveInformation/><con:authRepository/><con:tags/></con:soapui-project>